<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-3 docs-doc-page docs-doc-id-intro" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0-rc.0">
<title data-rh="true">v3 Documentation | React Query Builder</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://react-querybuilder.js.org/docs/3/intro"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3"><meta data-rh="true" name="docsearch:version" content="3"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3"><meta data-rh="true" property="og:title" content="v3 Documentation | React Query Builder"><meta data-rh="true" name="description" content="Usage"><meta data-rh="true" property="og:description" content="Usage"><link data-rh="true" rel="icon" href="/img/react-querybuilder.png"><link data-rh="true" rel="canonical" href="https://react-querybuilder.js.org/docs/3/intro"><link data-rh="true" rel="alternate" href="https://react-querybuilder.js.org/docs/3/intro" hreflang="en"><link data-rh="true" rel="alternate" href="https://react-querybuilder.js.org/docs/3/intro" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1ECMJ15RQA-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7VHBQ0YBTJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7VHBQ0YBTJ",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="React Query Builder" href="/opensearch.xml">






<script src="/js/console.js"></script><link rel="stylesheet" href="/assets/css/styles.4720254c.css">
<script src="/assets/js/runtime~main.a853c09b.js" defer="defer"></script>
<script src="/assets/js/main.833d1a41.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/react-querybuilder.svg" alt="React Query Builder Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/react-querybuilder.svg" alt="React Query Builder Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">React Query Builder</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/components/querybuilder">Docs</a><a class="navbar__item navbar__link" href="/demo">Demo</a><a class="navbar__item navbar__link" href="/api">API</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/3/intro">v3.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/intro">Next</a></li><li><a class="dropdown__link" href="/docs/intro">v6.x</a></li><li><a class="dropdown__link" href="/docs/5/intro">v5.x</a></li><li><a class="dropdown__link" href="/docs/4/intro">v4.x</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/3/intro">v3.x</a></li></ul></div><a href="https://github.com/react-querybuilder/react-querybuilder" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a class="navbar__item navbar__link header-discord-link" aria-label="Discord server" href="/discord"></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/3/intro">v3 Documentation</a></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->React Query Builder<!-- --> <b>v3.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/intro">latest version</a></b> (<!-- -->v6.x<!-- -->).</div></div><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">v3 Documentation</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v3.x</span><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>v3 Documentation</h1></header><h2 id="usage">Usage</h2>
<pre><code class="language-tsx">import { useState } from &#x27;react&#x27;;
import QueryBuilder, { RuleGroupType } from &#x27;react-querybuilder&#x27;;

const fields = [
  { name: &#x27;firstName&#x27;, label: &#x27;First Name&#x27; },
  { name: &#x27;lastName&#x27;, label: &#x27;Last Name&#x27; },
  { name: &#x27;age&#x27;, label: &#x27;Age&#x27;, inputType: &#x27;number&#x27; },
  { name: &#x27;address&#x27;, label: &#x27;Address&#x27; },
  { name: &#x27;phone&#x27;, label: &#x27;Phone&#x27; },
  { name: &#x27;email&#x27;, label: &#x27;Email&#x27;, validator: ({ value }) =&gt; /^[^@]+@[^@]+/.test(value) },
  { name: &#x27;twitter&#x27;, label: &#x27;Twitter&#x27; },
  { name: &#x27;isDev&#x27;, label: &#x27;Is a Developer?&#x27;, valueEditorType: &#x27;checkbox&#x27;, defaultValue: false },
];

export const App = () =&gt; {
  const [query, setQuery] = useState&lt;RuleGroupType&gt;({
    combinator: &#x27;and&#x27;,
    rules: [],
  });

  return &lt;QueryBuilder fields={fields} query={query} onQueryChange={setQuery} /&gt;;
};
</code></pre>
<h2 id="props">Props</h2>
<p>The default export of this library is the <code>QueryBuilder</code> React component, which supports the following props.</p>
<h3 id="query"><code>query</code></h3>
<p><code>{ id?: string; combinator: string; rules: ({ field: string; operator: string; value: any; } | { combinator: string; rules: ...[]; })[]; }</code></p>
<p>The initial query, in JSON form (follows the same format as the parameter passed to the <a href="#onquerychange-optional"><code>onQueryChange</code></a> callback). <code>id</code> is optional.</p>
<h3 id="fields"><code>fields</code></h3>
<p>The array of fields that should be used. Each field should be an object with the following signature:</p>
<pre><code class="language-ts">interface Field {
  id?: string; // The field identifier (if not provided, then `name` will be used)
  name: string; // REQUIRED - the field name
  label: string; // REQUIRED - the field label
  operators?: { name: string; label: string }[]; // Array of operators (if not provided, then `getOperators()` will be used)
  valueEditorType?: &#x27;text&#x27; | &#x27;select&#x27; | &#x27;checkbox&#x27; | &#x27;radio&#x27; | null; // Value editor type for this field (if not provided, then `getValueEditorType()` will be used)
  inputType?: string | null; // Input type for text box inputs, e.g. &#x27;text&#x27;, &#x27;number&#x27;, or &#x27;date&#x27; (if not provided, then `getInputType()` will be used)
  values?: { name: string; label: string }[]; // Array of values, applicable when valueEditorType is &#x27;select&#x27; or &#x27;radio&#x27; (if not provided, then `getValues()` will be used)
  defaultOperator?: string; // Default operator for this field (if not provided, then `getDefaultOperator()` will be used)
  defaultValue?: any; // Default value for this field (if not provided, then `getDefaultValue()` will be used)
  placeholder?: string; // Value to be displayed in the placeholder of the text field
  validator?(): boolean | ValidationResult; // Called when a rule specifies this field (see the [main validator prop](#validator-optional) for more information)
}
</code></pre>
<p>Field objects can also contain other data. Each field object will be passed to the appropriate <code>OperatorSelector</code> and <code>ValueEditor</code> components as <code>fieldData</code> (see the section on <a href="#controlelements-optional"><code>controlElements</code></a>).</p>
<h3 id="context"><code>context</code></h3>
<p><code>any</code></p>
<p>A &quot;bucket&quot; for passing arbitrary props down to custom components. The <code>context</code> prop is passed to each and every component, so it&#x27;s accessible anywhere in the <code>QueryBuilder</code> component tree.</p>
<h3 id="operators"><code>operators</code></h3>
<p><code>{ name: string; label: string; }[]</code></p>
<p>The array of operators that should be used. The default operators include:</p>
<pre><code class="language-ts">[
  { name: &#x27;=&#x27;, label: &#x27;=&#x27; },
  { name: &#x27;!=&#x27;, label: &#x27;!=&#x27; },
  { name: &#x27;&lt;&#x27;, label: &#x27;&lt;&#x27; },
  { name: &#x27;&gt;&#x27;, label: &#x27;&gt;&#x27; },
  { name: &#x27;&lt;=&#x27;, label: &#x27;&lt;=&#x27; },
  { name: &#x27;&gt;=&#x27;, label: &#x27;&gt;=&#x27; },
  { name: &#x27;contains&#x27;, label: &#x27;contains&#x27; },
  { name: &#x27;beginsWith&#x27;, label: &#x27;begins with&#x27; },
  { name: &#x27;endsWith&#x27;, label: &#x27;ends with&#x27; },
  { name: &#x27;doesNotContain&#x27;, label: &#x27;does not contain&#x27; },
  { name: &#x27;doesNotBeginWith&#x27;, label: &#x27;does not begin with&#x27; },
  { name: &#x27;doesNotEndWith&#x27;, label: &#x27;does not end with&#x27; },
  { name: &#x27;null&#x27;, label: &#x27;is null&#x27; },
  { name: &#x27;notNull&#x27;, label: &#x27;is not null&#x27; },
  { name: &#x27;in&#x27;, label: &#x27;in&#x27; },
  { name: &#x27;notIn&#x27;, label: &#x27;not in&#x27; },
  { name: &#x27;between&#x27;, label: &#x27;between&#x27; },
  { name: &#x27;notBetween&#x27;, label: &#x27;not between&#x27; },
];
</code></pre>
<h3 id="combinators"><code>combinators</code></h3>
<p><code>{ name: string, label: string; }[]</code></p>
<p>The array of combinators that should be used for RuleGroups. The default set includes:</p>
<pre><code class="language-ts">[
  { name: &#x27;and&#x27;, label: &#x27;AND&#x27; },
  { name: &#x27;or&#x27;, label: &#x27;OR&#x27; },
];
</code></pre>
<h3 id="controlelements"><code>controlElements</code></h3>
<pre><code class="language-ts">interface Controls {
  addGroupAction?: React.ComponentType&lt;ActionWithRulesProps&gt;;
  addRuleAction?: React.ComponentType&lt;ActionWithRulesProps&gt;;
  cloneGroupAction?: React.ComponentType&lt;ActionWithRulesProps&gt;;
  cloneRuleAction?: React.ComponentType&lt;ActionProps&gt;;
  combinatorSelector?: React.ComponentType&lt;CombinatorSelectorProps&gt;;
  fieldSelector?: React.ComponentType&lt;FieldSelectorProps&gt;;
  notToggle?: React.ComponentType&lt;NotToggleProps&gt;;
  operatorSelector?: React.ComponentType&lt;OperatorSelectorProps&gt;;
  removeGroupAction?: React.ComponentType&lt;ActionWithRulesProps&gt;;
  removeRuleAction?: React.ComponentType&lt;ActionProps&gt;;
  rule?: React.ComponentType&lt;RuleProps&gt;;
  ruleGroup?: React.ComponentType&lt;RuleGroupProps&gt;;
  valueEditor?: React.ComponentType&lt;ValueEditorProps&gt;;
}
</code></pre>
<p>This is a custom controls object that allows you to override the control elements used. The following control overrides are supported:</p>
<ul>
<li><code>addGroupAction</code>: By default a <code>&lt;button /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface ActionWithRulesProps {
  label: string; // translations.addGroup.label, e.g. &quot;+Group&quot;
  title: string; // translations.addGroup.title, e.g. &quot;Add group&quot;
  className: string; // CSS classNames to be applied
  handleOnClick: (e: React.MouseEvent) =&gt; void; // Callback function to invoke adding a &lt;RuleGroup /&gt;
  rules: (RuleGroupType | RuleType)[]; // Provides the number of rules already present for this group
  level: number; // The level of the current group
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this group
}
</code></pre>
<ul>
<li><code>cloneGroupAction</code>: By default a <code>&lt;button /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface ActionWithRulesProps {
  label: string; // translations.addGroup.label, e.g. &quot;+Group&quot;
  title: string; // translations.addGroup.title, e.g. &quot;Add group&quot;
  className: string; // CSS classNames to be applied
  handleOnClick: (e: React.MouseEvent) =&gt; void; // Callback function to invoke adding a &lt;RuleGroup /&gt;
  rules: (RuleGroupType | RuleType)[]; // Provides the number of rules already present for this group
  level: number; // The level of the current group
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this group
}
</code></pre>
<ul>
<li><code>removeGroupAction</code>: By default a <code>&lt;button /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface ActionWithRulesProps {
  label: string; // translations.removeGroup.label, e.g. &quot;x&quot;
  title: string; // translations.removeGroup.title, e.g. &quot;Remove group&quot;
  className: string; // CSS classNames to be applied
  handleOnClick: (e: React.MouseEvent) =&gt; void; // Callback function to invoke adding a &lt;RuleGroup /&gt;
  rules: (RuleGroupType | RuleType)[]; // Provides the number of rules already present for this group
  level: number; // The level of the current group
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this group
}
</code></pre>
<ul>
<li><code>addRuleAction</code>: By default a <code>&lt;button /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface ActionWithRulesProps {
  label: string; // translations.addGroup.label, e.g. &quot;+Rule&quot;
  title: string; // translations.addGroup.title, e.g. &quot;Add rule&quot;
  className: string; // CSS classNames to be applied
  handleOnClick: (e: React.MouseEvent) =&gt; void; // Callback function to invoke adding a &lt;RuleGroup /&gt;
  rules: (RuleGroupType | RuleType)[]; // Provides the number of rules already present for this group
  level: number; // The level of the current group
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this group
}
</code></pre>
<ul>
<li><code>cloneRuleAction</code>: By default a <code>&lt;button /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface ActionProps {
  label: string; // translations.addGroup.label, e.g. &quot;+Rule&quot;
  title: string; // translations.addGroup.title, e.g. &quot;Add rule&quot;
  className: string; // CSS classNames to be applied
  handleOnClick: (e: React.MouseEvent) =&gt; void; // Callback function to invoke adding a &lt;RuleGroup /&gt;
  level: number; // The level of the current group
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this rule
}
</code></pre>
<ul>
<li><code>removeRuleAction</code>: By default a <code>&lt;button /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface ActionProps {
  label: string; // translations.removeRule.label, e.g. &quot;x&quot;
  title: string; // translations.removeRule.title, e.g. &quot;Remove rule&quot;
  className: string; // CSS classNames to be applied
  handleOnClick: (e: React.MouseEvent) =&gt; void; // Callback function to invoke adding a &lt;RuleGroup /&gt;
  level: number; // The level of the current group
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this rule
}
</code></pre>
<ul>
<li><code>combinatorSelector</code>: By default a <code>&lt;select /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface CombinatorSelectorProps {
  options: { name: string; label: string }[]; // Same as &#x27;combinators&#x27; passed into QueryBuilder
  value: string; // Selected combinator from the existing query representation, if any
  className: string; // CSS classNames to be applied
  handleOnChange: (value: any) =&gt; void; // Callback function to update query representation
  rules: (RuleGroupType | RuleType)[]; // Provides the number of rules already present for this group
  level: number; // The level of the current group
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this group
}
</code></pre>
<ul>
<li><code>fieldSelector</code>: By default a <code>&lt;select /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface FieldSelectorProps {
  options: Field[]; // Same as &#x27;fields&#x27; passed into QueryBuilder
  value: string; // Selected field from the existing query representation, if any
  title: string; // translations.fields.title, e.g. &quot;Fields&quot;
  operator: string; // Selected operator from the existing query representation, if any
  className: string; // CSS classNames to be applied
  handleOnChange: (value: any) =&gt; void; // Callback function to update query representation
  level: number; // The level the group this rule belongs to
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this rule
}
</code></pre>
<ul>
<li><code>operatorSelector</code>: By default a <code>&lt;select /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface OperatorSelectorProps {
  field: string; // Field name corresponding to this rule
  fieldData: Field; // The entire object from the fields array for this field
  options: { name: string; label: string }[]; // Return value of getOperators(field)
  value: string; // Selected operator from the existing query representation, if any
  title: string; // translations.operators.title, e.g. &quot;Operators&quot;
  className: string; // CSS classNames to be applied
  handleOnChange: (value: any) =&gt; void; // Callback function to update query representation
  level: number; // The level the group this rule belongs to
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this rule
}
</code></pre>
<ul>
<li><code>valueEditor</code>: By default an <code>&lt;input type=&quot;text&quot; /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface ValueEditorProps {
  field: string; // Field name corresponding to this rule
  fieldData: Field; // The entire object from the fields array for this field
  operator: string; // Operator name corresponding to this rule
  value: string; // Value from the existing query representation, if any
  title: string; // translations.value.title, e.g. &quot;Value&quot;
  handleOnChange: (value: any) =&gt; void; // Callback function to update the query representation
  type: &#x27;text&#x27; | &#x27;select&#x27; | &#x27;checkbox&#x27; | &#x27;radio&#x27;; // Type of editor to be displayed
  inputType: string; // @type of &lt;input&gt; if `type` is &quot;text&quot;
  values: any[]; // List of available values for this rule
  level: number; // The level the group this rule belongs to
  className: string; // CSS classNames to be applied
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this rule
}
</code></pre>
<ul>
<li><code>notToggle</code>: By default, <code>&lt;label&gt;&lt;input type=&quot;checkbox&quot; /&gt;Not&lt;/label&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface NotToggleProps {
  checked: boolean; // Whether the input should be checked or not
  handleOnChange: (checked: boolean) =&gt; void; // Callback function to update the query representation
  title: string; // translations.notToggle.title, e.g. &quot;Invert this group&quot;
  level: number; // The level of the group
  className: string; // CSS classNames to be applied
  context: any; // Container for custom props that are passed to all components
  validation: boolean | ValidationResult; // validation result of this group
}
</code></pre>
<ul>
<li><code>ruleGroup</code>: By default, <code>&lt;RuleGroup /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface RuleGroupProps {
  id?: string; // Unique identifier for this rule group
  path: number[]; // path of indexes through a rule group hierarchy
  combinator: string; // Combinator for this group, e.g. &quot;and&quot; / &quot;or&quot;
  rules: (RuleType | RuleGroupType)[]; // List of rules and/or sub-groups for this group
  translations: Translations; // The full translations object
  schema: Schema; // See `Schema` documentation below
  not: boolean; // Whether or not to invert this group
  context: any; // Container for custom props that are passed to all components
}
</code></pre>
<ul>
<li><code>rule</code>: By default, <code>&lt;Rule /&gt;</code> is used. The following props are passed:</li>
</ul>
<pre><code class="language-ts">interface RuleProps {
  id?: string; // Unique identifier for this rule
  path: number[]; // path of indexes through a rule group hierarchy
  field: string; // Field name for this rule
  operator: string; // Operator name for this rule
  value: any; // Value for this rule
  translations: Translations; // The full translations object
  schema: Schema; // See `Schema` documentation below
  context: any; // Container for custom props that are passed to all components
}
</code></pre>
<p>The <code>Schema</code> object passed in the <code>rule</code> and <code>ruleGroup</code> props has the following signature:</p>
<pre><code class="language-ts">interface Schema {
  fields: Field[];
  fieldMap: { [k: string]: Field };
  classNames: Classnames;
  combinators: { name: string; label: string }[];
  controls: Controls;
  createRule(): RuleType;
  createRuleGroup(): RuleGroupTypeAny;
  getOperators(field: string): { name: string; label: string }[];
  getValueEditorType(field: string, operator: string): ValueEditorType;
  getInputType(field: string, operator: string): string | null;
  getValues(field: string, operator: string): { name: string; label: string }[];
  isRuleGroup(ruleOrGroup: RuleType | RuleGroupTypeAny): ruleOrGroup is RuleGroupTypeAny;
  onGroupAdd(group: RuleGroupTypeAny, parentPath: number[]): void;
  onGroupRemove(path: number[]): void;
  onPropChange(prop: string, value: any, path: number[]): void;
  onRuleAdd(rule: RuleType, parentPath: number[]): void;
  onRuleRemove(path: number[]): void;
  updateIndependentCombinator(value: string, path: number[]): void;
  showCombinatorsBetweenRules: boolean;
  showNotToggle: boolean;
  showCloneButtons: boolean;
  autoSelectField: boolean;
  addRuleToNewGroups: boolean;
  validationMap: ValidationMap;
  independentCombinators: boolean;
}
</code></pre>
<h3 id="getoperators"><code>getOperators</code></h3>
<p><code>(field: string) =&gt; { name: string; label: string; }[] | null</code></p>
<p>This is a callback function invoked to get the list of allowed operators for the given field. If <code>null</code> is returned, the default operators are used.</p>
<h3 id="getvalueeditortype"><code>getValueEditorType</code></h3>
<p><code>(field: string, operator: string) =&gt; &#x27;text&#x27; | &#x27;select&#x27; | &#x27;checkbox&#x27; | &#x27;radio&#x27; | null</code></p>
<p>This is a callback function invoked to get the type of <code>ValueEditor</code> for the given field and operator. Allowed values are <code>&quot;text&quot;</code> (the default if the function is not provided or if <code>null</code> is returned), <code>&quot;select&quot;</code>, <code>&quot;checkbox&quot;</code>, and <code>&quot;radio&quot;</code>.</p>
<h3 id="getinputtype"><code>getInputType</code></h3>
<p><code>(field: string, operator: string) =&gt; string</code></p>
<p>This is a callback function invoked to get the <code>type</code> of <code>&lt;input /&gt;</code> for the given field and operator (only applicable when <code>getValueEditorType</code> returns <code>&quot;text&quot;</code> or a falsy value). If no function is provided, <code>&quot;text&quot;</code> is used as the default.</p>
<h3 id="getvalues"><code>getValues</code></h3>
<p><code>(field: string, operator: string) =&gt; { name: string; label: string; }[]</code></p>
<p>This is a callback function invoked to get the list of allowed values for the given field and operator (only applicable when <code>getValueEditorType</code> returns <code>&quot;select&quot;</code> or <code>&quot;radio&quot;</code>). If no function is provided, an empty array is used as the default.</p>
<h3 id="getdefaultfield"><code>getDefaultField</code></h3>
<p><code>string | ((fieldsData: Field[]) =&gt; string)</code></p>
<p>The default field for new rules. This can be a string identifying the default field, or a function that returns a field name.</p>
<h3 id="getdefaultoperator"><code>getDefaultOperator</code></h3>
<p><code>string | ((field: string) =&gt; string)</code></p>
<p>The default operator for new rules. This can be a string identifying the default operator, or a function that returns an operator name.</p>
<h3 id="getdefaultvalue"><code>getDefaultValue</code></h3>
<p><code>(rule: RuleType) =&gt; any</code></p>
<p>This function returns the default value for new rules.</p>
<h3 id="onaddrule"><code>onAddRule</code></h3>
<p><code>(rule: RuleType, parentPath: number[], query: RuleGroupType) =&gt; RuleType | false</code></p>
<p>This callback is invoked before a new rule is added. The function should either manipulate the rule and return it, or return <code>false</code> to cancel the addition of the rule. <em>(To completely prevent the addition of new rules, pass <code>controlElements={{ addRuleAction: () =&gt; null }}</code> which will hide the &quot;+Rule&quot; button.)</em> You can use <code>findRule(parentId, query)</code> to locate the parent group to which the new rule will be added among the entire query hierarchy.</p>
<h3 id="onaddgroup"><code>onAddGroup</code></h3>
<p><code>(ruleGroup: RuleGroupType, parentPath: number[], query: RuleGroupType) =&gt; RuleGroupType | false</code></p>
<p>This callback is invoked before a new group is added. The function should either manipulate the group and return it, or return <code>false</code> to cancel the addition of the group. <em>(To completely prevent the addition of new groups, pass <code>controlElements={{ addGroupAction: () =&gt; null }}</code> which will hide the &quot;+Group&quot; button.)</em> You can use <code>findRule(parentId, query)</code> to locate the parent group to which the new group will be added among the entire query hierarchy.</p>
<h3 id="onquerychange"><code>onQueryChange</code></h3>
<p><code>(query: RuleGroupType) =&gt; void</code></p>
<p>This is a notification that is invoked anytime the query configuration changes. The query is provided as a JSON structure, as shown below:</p>
<pre><code class="language-json">{
  &quot;combinator&quot;: &quot;and&quot;,
  &quot;not&quot;: false,
  &quot;rules&quot;: [
    {
      &quot;field&quot;: &quot;firstName&quot;,
      &quot;operator&quot;: &quot;null&quot;,
      &quot;value&quot;: &quot;&quot;
    },
    {
      &quot;field&quot;: &quot;lastName&quot;,
      &quot;operator&quot;: &quot;null&quot;,
      &quot;value&quot;: &quot;&quot;
    },
    {
      &quot;combinator&quot;: &quot;and&quot;,
      &quot;rules&quot;: [
        {
          &quot;field&quot;: &quot;age&quot;,
          &quot;operator&quot;: &quot;&gt;&quot;,
          &quot;value&quot;: &quot;30&quot;
        }
      ]
    }
  ]
}
</code></pre>
<h3 id="controlclassnames"><code>controlClassnames</code></h3>
<p>This can be used to assign specific <code>CSS</code> classes to various controls that are created by the <code>&lt;QueryBuilder /&gt;</code>. This is an object with the following signature:</p>
<pre><code class="language-ts">interface Classnames {
  queryBuilder?: string; // Root &lt;div&gt; element
  ruleGroup?: string; // &lt;div&gt; containing the RuleGroup
  header?: string; // &lt;div&gt; containing the RuleGroup header controls
  body?: string; // &lt;div&gt; containing the RuleGroup child rules/groups
  combinators?: string; // &lt;select&gt; control for combinators
  addRule?: string; // &lt;button&gt; to add a Rule
  addGroup?: string; // &lt;button&gt; to add a RuleGroup
  cloneRule?: string; // &lt;button&gt; to clone a Rule
  cloneGroup?: string; // &lt;button&gt; to clone a RuleGroup
  removeGroup?: string; // &lt;button&gt; to remove a RuleGroup
  notToggle?: string; // &lt;label&gt; on the &quot;not&quot; toggle
  rule?: string; // &lt;div&gt; containing the Rule
  fields?: string; // &lt;select&gt; control for fields
  operators?: string; // &lt;select&gt; control for operators
  value?: string; // &lt;input&gt; for the field value
  removeRule?: string; // &lt;button&gt; to remove a Rule
}
</code></pre>
<h3 id="translations"><code>translations</code></h3>
<p>This can be used to override translatable texts applied to various controls that are created by the <code>&lt;QueryBuilder /&gt;</code>. This is an object with the following properties:</p>
<pre><code class="language-ts">{
  fields: {
    title: &quot;Fields&quot;,
  },
  operators: {
    title: &quot;Operators&quot;,
  },
  value: {
    title: &quot;Value&quot;,
  },
  removeRule: {
    label: &quot;x&quot;,
    title: &quot;Remove rule&quot;,
  },
  removeGroup: {
    label: &quot;x&quot;,
    title: &quot;Remove group&quot;,
  },
  addRule: {
    label: &quot;+Rule&quot;,
    title: &quot;Add rule&quot;,
  },
  addGroup: {
    label: &quot;+Group&quot;,
    title: &quot;Add group&quot;,
  },
  combinators: {
    title: &quot;Combinators&quot;,
  },
  notToggle: {
    label: &quot;Not&quot;,
    title: &quot;Invert this group&quot;,
  },
  cloneRule: {
    label: &#x27;⧉&#x27;,
    title: &#x27;Clone rule&#x27;
  },
  cloneRuleGroup: {
    label: &#x27;⧉&#x27;,
    title: &#x27;Clone group&#x27;
  }
}
</code></pre>
<h3 id="showcombinatorsbetweenrules"><code>showCombinatorsBetweenRules</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>true</code> to show the combinators (and/or) between rules and rule groups instead of at the top of rule groups. This can make some queries easier to understand as it encourages a more natural style of reading.</p>
<h3 id="shownottoggle"><code>showNotToggle</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>true</code> to show the &quot;Not&quot; toggle switch for each rule group.</p>
<h3 id="showclonebuttons"><code>showCloneButtons</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>true</code> to show the &quot;Clone rule&quot; and &quot;Clone group&quot; buttons.</p>
<h3 id="resetonfieldchange"><code>resetOnFieldChange</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>false</code> not to reset operator and value for field change.</p>
<h3 id="resetonoperatorchange"><code>resetOnOperatorChange</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>true</code> to reset value on operator change.</p>
<h3 id="enablemountquerychange"><code>enableMountQueryChange</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>false</code> to disable the <code>onQueryChange</code> on mount of component which will set default value.</p>
<h3 id="autoselectfield"><code>autoSelectField</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>false</code> to add an empty option (<code>&quot;------&quot;</code>) to the <code>fields</code> array as the first element (which is selected by default for new rules). When the empty field option is selected, the operator and value components will not display for that rule.</p>
<h3 id="addruletonewgroups"><code>addRuleToNewGroups</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>true</code> to automatically add a rule to new groups. If a <code>query</code> prop is not passed in, a rule will be added to the root group when the component is mounted. If a <code>query</code> prop is passed in with an empty <code>rules</code> array, no rule will be added automatically.</p>
<h3 id="independentcombinators"><code>independentCombinators</code></h3>
<p><code>boolean</code></p>
<p>Pass <code>true</code> to insert an independent combinator (and/or) selector between each rule/group in a rule group. (The combinator selector at the group level will not be available.) This is similar to the <a href="#showcombinatorsbetweenrules-optional"><code>showCombinatorsBetweenRules</code></a> option, except that each combinator selector is independent. You may find that users take to this configuration more naturally, as it allows them to express queries more like they would in their own language.</p>
<h3 id="validator"><code>validator</code></h3>
<p><code>(query: RuleGroupType) =&gt; boolean | { [id: string]: boolean | { valid: boolean; reasons?: any[] } }</code></p>
<p>This is a callback function that is executed each time <code>QueryBuilder</code> renders. The return value should be a boolean (<code>true</code> for valid queries, <code>false</code> for invalid) or an object whose keys are the <code>id</code>s of each rule and group in the query tree. If such an object is returned, the values associated to each key should be a boolean (<code>true</code> for valid rules/groups, <code>false</code> for invalid) or an object with a <code>valid</code> boolean property and an optional <code>reasons</code> array. The full object will be passed to each rule and group component, and all sub-components of each rule/group will receive the value associated with the rule&#x27;s or group&#x27;s <code>id</code>.</p>
<h2 id="other-exports">Other exports</h2>
<h3 id="defaultvalidator"><code>defaultValidator</code></h3>
<pre><code class="language-ts">function defaultValidator(query: RuleGroupType): {
  [id: string]: { valid: boolean; reasons: string[] };
};
</code></pre>
<p>Pass <code>validator={defaultValidator}</code> to automatically validate groups (rules will be ignored). A group will be marked invalid if either 1) it has no child rules or groups (<code>rules.length === 0</code>), or 2) it has a missing/invalid <code>combinator</code> and more than one child rule or group (<code>rules.length &gt;= 2</code>). You can see an example of the default validator in action in the <a href="#demo">demo</a> -- empty groups will have bold text on the &quot;+Rule&quot; button.</p>
<h3 id="findpath"><code>findPath</code></h3>
<pre><code class="language-ts">function findPath(path: number[], query: RuleGroupType): RuleType | RuleGroupType;
</code></pre>
<p><code>findPath</code> is a utility function for finding the rule or group within the query hierarchy that has a given <code>path</code>. Useful in custom <a href="#onAddRule-optional"><code>onAddRule</code></a> and <a href="#onAddGroup-optional"><code>onAddGroup</code></a> functions.</p>
<h3 id="formatquery"><code>formatQuery</code></h3>
<pre><code class="language-ts">function formatQuery(
  query: RuleGroupType,
  options?: ExportFormat | FormatQueryOptions
): string | ParameterizedSQL | ParameterizedNamedSQL;
</code></pre>
<p><code>formatQuery</code> parses a given query into one of the following formats: SQL, parameterized SQL, JSON, MongoDB, or JSON without IDs (which can be useful if you need to serialize the rules). The inversion operator (setting <code>not: true</code> for a rule group) is currently unsupported for the MongoDB format, but rules can be created using the <code>&quot;!=&quot;</code> operator.</p>
<p>Example:</p>
<pre><code class="language-ts">import { formatQuery } from &#x27;react-querybuilder&#x27;;

const query = {
  combinator: &#x27;and&#x27;,
  not: false,
  rules: [
    {
      field: &#x27;firstName&#x27;,
      value: &#x27;Steve&#x27;,
      operator: &#x27;=&#x27;,
    },
    {
      field: &#x27;lastName&#x27;,
      value: &#x27;Vai&#x27;,
      operator: &#x27;=&#x27;,
    },
  ],
};

console.log(formatQuery(query, &#x27;sql&#x27;)); // &#x27;(firstName = &quot;Steve&quot; and lastName = &quot;Vai&quot;)&#x27;
console.log(formatQuery(query, &#x27;parameterized&#x27;)); // { sql: &quot;(firstName = ? and lastName = ?)&quot;, params: [&quot;Steve&quot;, &quot;Vai&quot;] }
console.log(formatQuery(query, &#x27;mongodb&#x27;)); // &#x27;{$and:[{firstName:{$eq:&quot;Steve&quot;}},{lastName:{$eq:&quot;Vai&quot;}}]}&#x27;
</code></pre>
<p>An <code>options</code> object can be passed as the second argument instead of a format string in order to have more detailed control over the output. The options object takes the following form:</p>
<pre><code class="language-ts">interface FormatQueryOptions {
  format?: &#x27;sql&#x27; | &#x27;json&#x27; | &#x27;json_without_ids&#x27; | &#x27;parameterized&#x27;; // same as passing a `format` string instead of an options object
  valueProcessor?: (field: string, operator: string, value: any) =&gt; string; // see below for an example
  quoteFieldNamesWith?: string; // e.g. &quot;`&quot; to quote field names with backticks (useful if your field names have spaces)
  validator?: QueryValidator; // function to validate the entire query (see [validator](#validator-optional))
  fields?: { name: string; validator?: RuleValidator; [k: string]: any }[]; // This can be the same Field[] passed to &lt;QueryBuilder /&gt;, but really all you need to provide is the name and validator for each field
  fallbackExpression?: string; // this string will be inserted in place of invalid groups for &quot;sql&quot;, &quot;parameterized&quot;, &quot;parameterized_named&quot;, and &quot;mongodb&quot; formats (defaults to &#x27;(1 = 1)&#x27; for &quot;sql&quot;/&quot;parameterized&quot;/&quot;parameterized_named&quot;, &#x27;$and:[{$expr:true}]&#x27; for &quot;mongodb&quot;)
  paramPrefix?: string; // this string will be placed in front of named parameters (aka bind variables) when using the &quot;parameterized_named&quot; format. Default is &quot;:&quot;.
}
</code></pre>
<p>For example, if you need to control the way the value portion of the output is processed, you can specify a custom <code>valueProcessor</code> (only applicable for &quot;sql&quot; format).</p>
<pre><code class="language-ts">const query = {
  combinator: &#x27;and&#x27;,
  not: false,
  rules: [
    {
      field: &#x27;instrument&#x27;,
      value: [&#x27;Guitar&#x27;, &#x27;Vocals&#x27;],
      operator: &#x27;in&#x27;,
    },
    {
      field: &#x27;lastName&#x27;,
      value: &#x27;Vai&#x27;,
      operator: &#x27;=&#x27;,
    },
  ],
};

const valueProcessor = (field, operator, value) =&gt; {
  if (operator === &#x27;in&#x27;) {
    // Assuming `value` is an array, such as from a multi-select
    return `(${value.map(v =&gt; `&quot;${v.trim()}&quot;`).join(&#x27;,&#x27;)})`;
  } else {
    return defaultValueProcessor(field, operator, value);
  }
};

console.log(formatQuery(query, { format: &#x27;sql&#x27;, valueProcessor })); // &#x27;(instrument in (&quot;Guitar&quot;,&quot;Vocals&quot;) and lastName = &quot;Vai&quot;)&#x27;
</code></pre>
<p>The &#x27;json_without_ids&#x27; format will return the same query without the IDs. This can be useful, for example, if you need to save the query to the URL so that it becomes bookmarkable:</p>
<pre><code class="language-ts">const query = {
  id: &#x27;root&#x27;,
  rules: [
    {
      id: &#x27;r1&#x27;,
      field: &#x27;instrument&#x27;,
      value: [&#x27;Guitar&#x27;, &#x27;Vocals&#x27;],
      operator: &#x27;in&#x27;,
    },
    {
      id: &#x27;r2&#x27;,
      field: &#x27;lastName&#x27;,
      value: &#x27;Vai&#x27;,
      operator: &#x27;=&#x27;,
    },
  ],
  combinator: &#x27;and&#x27;,
  not: false,
};

console.log(formatQuery(query, &#x27;json_without_ids&#x27;));
// &#x27;{&quot;rules&quot;:[{&quot;field&quot;:&quot;instrument&quot;,&quot;value&quot;:[&quot;Guitar&quot;,&quot;Vocals&quot;],&quot;operator&quot;:&quot;in&quot;},{&quot;field&quot;:&quot;lastName&quot;,&quot;value&quot;:&quot;Vai&quot;,&quot;operator&quot;:&quot;=&quot;}],&quot;combinator&quot;:&quot;and&quot;,&quot;not&quot;:false}&#x27;
</code></pre>
<p>The validation options (<code>validator</code> and <code>fields</code>) only affect the output when <code>format</code> is &quot;sql&quot;, &quot;parameterized&quot;, or &quot;mongodb&quot;. If the <code>validator</code> function returns <code>false</code>, the &quot;sql&quot; and &quot;parameterized&quot; formats will return <code>&quot;(1 = 1)&quot;</code> and the <code>mongodb</code> format will return <code>&quot;{$and:[{$expr:true}]}&quot;</code> to maintain valid syntax while (hopefully) not affecting the query criteria. Otherwise, groups and rules marked as invalid (either by the validation map produced by the <code>validator</code> function or the result of the field-based <code>validator</code> function) will be ignored.</p>
<p>Example:</p>
<pre><code class="language-ts">const query = {
  id: &#x27;root&#x27;,
  rules: [
    {
      id: &#x27;r1&#x27;,
      field: &#x27;firstName&#x27;,
      value: &#x27;&#x27;,
      operator: &#x27;=&#x27;,
    },
    {
      id: &#x27;r2&#x27;,
      field: &#x27;lastName&#x27;,
      value: &#x27;Vai&#x27;,
      operator: &#x27;=&#x27;,
    },
  ],
  combinator: &#x27;and&#x27;,
  not: false,
};

// Invalid query
console.log(formatQuery(query, { format: &#x27;sql&#x27;, validator: () =&gt; false })); // &quot;(1 = 1)&quot; &lt;-- see `fallbackExpression` option
// Invalid rule based on validation map
console.log(formatQuery(query, { format: &#x27;sql&#x27;, validator: () =&gt; ({ r1: false }) })); // &quot;(lastName = &#x27;Vai&#x27;)&quot;
// Invalid rule based on field validator
console.log(
  formatQuery(query, { format: &#x27;sql&#x27;, fields: [{ name: &#x27;firstName&#x27;, validator: () =&gt; false }] })
); // &quot;(lastName = &#x27;Vai&#x27;)&quot;
</code></pre>
<p>A basic form of validation will be used by <code>formatQuery</code> for the &quot;in&quot;, &quot;notIn&quot;, &quot;between&quot;, and &quot;notBetween&quot; operators when the output format is &quot;sql&quot;, &quot;parameterized&quot;, or &quot;mongodb&quot;. This validation is used regardless of the presence of any <code>validator</code> options either at the query or field level.</p>
<ul>
<li>Rules that specify an &quot;in&quot; or &quot;notIn&quot; <code>operator</code> will be deemed invalid if the rule&#x27;s <code>value</code> is neither an array with at least one element (<code>value.length &gt; 0</code>) nor a non-empty string.</li>
<li>Rules that specify a &quot;between&quot; or &quot;notBetween&quot; <code>operator</code> will be deemed invalid if the rule&#x27;s <code>value</code> is neither an array of length two (<code>value.length === 2</code>) nor a string with exactly one comma that isn&#x27;t the first or last character (<code>value.split(&#x27;,&#x27;).length === 2</code> and neither element is an empty string).</li>
</ul>
<h3 id="parsesql"><code>parseSQL</code></h3>
<pre><code class="language-ts">function parseSQL(sql: string, options?: ParseSQLOptions): RuleGroupType;
</code></pre>
<p><code>parseSQL</code> takes a SQL <code>SELECT</code> statement (either the full statement, or just the <code>WHERE</code> clause by itself) and returns a query object fit for using as the <code>query</code> prop in the <code>&lt;QueryBuilder /&gt;</code> component. Try it out in the <a href="https://react-querybuilder.js.org/react-querybuilder">demo</a> by clicking the &quot;Load from SQL&quot; button.</p>
<p>The optional second parameter to <code>parseSQL</code> is an options object that configures how the function handles named or anonymous bind variables.</p>
<pre><code class="language-ts">interface ParseSQLOptions {
  independentCombinators?: boolean;
  paramPrefix?: string;
  params?: any[] | { [p: string]: any };
}
</code></pre>
<p>Examples:</p>
<pre><code class="language-ts">const standardSQL = parseSQL(`SELECT * FROM t WHERE firstName = &#x27;Steve&#x27; AND lastName = &#x27;Vai&#x27;`);
const paramsArray = parseSQL(`SELECT * FROM t WHERE firstName = ? AND lastName = ?`, {
  params: [&#x27;Steve&#x27;, &#x27;Vai&#x27;],
});
const paramsObject = parseSQL(`SELECT * FROM t WHERE firstName = :p1 AND lastName = :p2`, {
  params: { p1: &#x27;Steve&#x27;, p2: &#x27;Vai&#x27; },
});
const paramsObject$ = parseSQL(`SELECT * FROM t WHERE firstName = $p1 AND lastName = $p2`, {
  params: { p1: &#x27;Steve&#x27;, p2: &#x27;Vai&#x27; },
  paramPrefix: &#x27;$&#x27;,
});

// Running any of the following statements will log the same result (see below)
console.log(JSON.stringify(standardSQL, null, 2));
console.log(JSON.stringify(paramsArray, null, 2));
console.log(JSON.stringify(paramsObject, null, 2));
console.log(JSON.stringify(paramsObject$, null, 2));
/*
{
  &quot;combinator&quot;: &quot;and&quot;,
  &quot;rules&quot;: [
    {
      &quot;field&quot;: &quot;firstName&quot;,
      &quot;operator&quot;: &quot;=&quot;,
      &quot;value&quot;: &quot;Steve&quot;
    },
    {
      &quot;field&quot;: &quot;lastName&quot;,
      &quot;operator&quot;: &quot;=&quot;,
      &quot;value&quot;: &quot;Vai&quot;
    }
  ]
}
*/
</code></pre>
<p>When the <code>independentCombinators</code> option is <code>true</code>, <code>parseSQL</code> will output a query with combinator identifiers between each rule/group.</p>
<pre><code class="language-ts">const standardSQLinlineCombinators = parseSQL(
  `SELECT * FROM t WHERE firstName = &#x27;Steve&#x27; AND lastName = &#x27;Vai&#x27;`,
  { independentCombinators: true }
);
console.log(JSON.stringify(standardSQLinlineCombinators, null, 2));
/*
{
  &quot;rules&quot;: [
    {
      &quot;field&quot;: &quot;firstName&quot;,
      &quot;operator&quot;: &quot;=&quot;,
      &quot;value&quot;: &quot;Steve&quot;
    },
    &quot;and&quot;,
    {
      &quot;field&quot;: &quot;lastName&quot;,
      &quot;operator&quot;: &quot;=&quot;,
      &quot;value&quot;: &quot;Vai&quot;
    }
  ]
}
*/
</code></pre>
<h3 id="defaults">Defaults</h3>
<p>The following default configuration objects are exported for convenience.</p>
<ul>
<li><code>defaultCombinators</code></li>
<li><code>defaultOperators</code></li>
<li><code>defaultTranslations</code></li>
<li><code>defaultValueProcessor</code></li>
</ul>
<p>The following components are exported as well:</p>
<ul>
<li><code>ActionElement</code> - used for buttons (&quot;Add rule&quot;, &quot;Remove group&quot;, etc.)</li>
<li><code>NotToggle</code> - used for the &quot;Invert this group&quot; toggle switch</li>
<li><code>ValueEditor</code> - the default ValueEditor component</li>
<li><code>ValueSelector</code> - used for drop-down lists: the combinator, field, and operator selectors</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/react-querybuilder/react-querybuilder/edit/main/website/versioned_docs/version-3/intro.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_pbO5"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#props" class="table-of-contents__link toc-highlight">Props</a><ul><li><a href="#query" class="table-of-contents__link toc-highlight"><code>query</code></a></li><li><a href="#fields" class="table-of-contents__link toc-highlight"><code>fields</code></a></li><li><a href="#context" class="table-of-contents__link toc-highlight"><code>context</code></a></li><li><a href="#operators" class="table-of-contents__link toc-highlight"><code>operators</code></a></li><li><a href="#combinators" class="table-of-contents__link toc-highlight"><code>combinators</code></a></li><li><a href="#controlelements" class="table-of-contents__link toc-highlight"><code>controlElements</code></a></li><li><a href="#getoperators" class="table-of-contents__link toc-highlight"><code>getOperators</code></a></li><li><a href="#getvalueeditortype" class="table-of-contents__link toc-highlight"><code>getValueEditorType</code></a></li><li><a href="#getinputtype" class="table-of-contents__link toc-highlight"><code>getInputType</code></a></li><li><a href="#getvalues" class="table-of-contents__link toc-highlight"><code>getValues</code></a></li><li><a href="#getdefaultfield" class="table-of-contents__link toc-highlight"><code>getDefaultField</code></a></li><li><a href="#getdefaultoperator" class="table-of-contents__link toc-highlight"><code>getDefaultOperator</code></a></li><li><a href="#getdefaultvalue" class="table-of-contents__link toc-highlight"><code>getDefaultValue</code></a></li><li><a href="#onaddrule" class="table-of-contents__link toc-highlight"><code>onAddRule</code></a></li><li><a href="#onaddgroup" class="table-of-contents__link toc-highlight"><code>onAddGroup</code></a></li><li><a href="#onquerychange" class="table-of-contents__link toc-highlight"><code>onQueryChange</code></a></li><li><a href="#controlclassnames" class="table-of-contents__link toc-highlight"><code>controlClassnames</code></a></li><li><a href="#translations" class="table-of-contents__link toc-highlight"><code>translations</code></a></li><li><a href="#showcombinatorsbetweenrules" class="table-of-contents__link toc-highlight"><code>showCombinatorsBetweenRules</code></a></li><li><a href="#shownottoggle" class="table-of-contents__link toc-highlight"><code>showNotToggle</code></a></li><li><a href="#showclonebuttons" class="table-of-contents__link toc-highlight"><code>showCloneButtons</code></a></li><li><a href="#resetonfieldchange" class="table-of-contents__link toc-highlight"><code>resetOnFieldChange</code></a></li><li><a href="#resetonoperatorchange" class="table-of-contents__link toc-highlight"><code>resetOnOperatorChange</code></a></li><li><a href="#enablemountquerychange" class="table-of-contents__link toc-highlight"><code>enableMountQueryChange</code></a></li><li><a href="#autoselectfield" class="table-of-contents__link toc-highlight"><code>autoSelectField</code></a></li><li><a href="#addruletonewgroups" class="table-of-contents__link toc-highlight"><code>addRuleToNewGroups</code></a></li><li><a href="#independentcombinators" class="table-of-contents__link toc-highlight"><code>independentCombinators</code></a></li><li><a href="#validator" class="table-of-contents__link toc-highlight"><code>validator</code></a></li></ul></li><li><a href="#other-exports" class="table-of-contents__link toc-highlight">Other exports</a><ul><li><a href="#defaultvalidator" class="table-of-contents__link toc-highlight"><code>defaultValidator</code></a></li><li><a href="#findpath" class="table-of-contents__link toc-highlight"><code>findPath</code></a></li><li><a href="#formatquery" class="table-of-contents__link toc-highlight"><code>formatQuery</code></a></li><li><a href="#parsesql" class="table-of-contents__link toc-highlight"><code>parseSQL</code></a></li><li><a href="#defaults" class="table-of-contents__link toc-highlight">Defaults</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/components/querybuilder">Components</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/tips--tricks">Tips &amp; Tricks</a></li><li class="footer__item"><a class="footer__link-item" href="/demo">Showcase</a></li></ul></div><div class="col footer__col"><div class="footer__title">External</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/react-querybuilder/react-querybuilder" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/discord">Discord</a></li><li class="footer__item"><a href="https://www.npmjs.com/package/react-querybuilder" target="_blank" rel="noopener noreferrer" class="footer__link-item">npm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/sponsors/jakeboone02" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support ♥<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 React Query Builder authors. Built with Docusaurus.<br><br><a href="https://www.netlify.com"><img src="https://www.netlify.com/v3/img/components/netlify-dark.svg" alt="Deploys by Netlify"></a></div></div></div></footer></div>
</body>
</html>