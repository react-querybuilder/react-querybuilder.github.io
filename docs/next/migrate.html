<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-migrate" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Migrating to v7 | React Query Builder</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://react-querybuilder.js.org/docs/next/migrate"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migrating to v7 | React Query Builder"><meta data-rh="true" name="description" content="Version 7 shouldn&#x27;t require many—if any—code changes when migrating from v6, although some of the defaults have changed. Also, taking advantage of the performance improvements, new features, and other conveniences may require some minor refactoring. A summary of the important changes is below."><meta data-rh="true" property="og:description" content="Version 7 shouldn&#x27;t require many—if any—code changes when migrating from v6, although some of the defaults have changed. Also, taking advantage of the performance improvements, new features, and other conveniences may require some minor refactoring. A summary of the important changes is below."><link data-rh="true" rel="icon" href="/img/react-querybuilder.png"><link data-rh="true" rel="canonical" href="https://react-querybuilder.js.org/docs/next/migrate"><link data-rh="true" rel="alternate" href="https://react-querybuilder.js.org/docs/next/migrate" hreflang="en"><link data-rh="true" rel="alternate" href="https://react-querybuilder.js.org/docs/next/migrate" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1ECMJ15RQA-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7VHBQ0YBTJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7VHBQ0YBTJ",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="React Query Builder" href="/opensearch.xml">







<script src="/js/console.js"></script><link rel="stylesheet" href="/assets/css/styles.3ef10e89.css">
<script src="/assets/js/runtime~main.783c3b7e.js" defer="defer"></script>
<script src="/assets/js/main.e015249d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/react-querybuilder.svg" alt="React Query Builder Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/react-querybuilder.svg" alt="React Query Builder Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">React Query Builder</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next/components/querybuilder">Docs</a><a class="navbar__item navbar__link" href="/demo">Demo</a><a class="navbar__item navbar__link" href="/api">API</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/intro">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/migrate">Next</a></li><li><a class="dropdown__link" href="/docs/migrate">v6.x</a></li><li><a class="dropdown__link" href="/docs/5/migrate">v5.x</a></li><li><a class="dropdown__link" href="/docs/4/migrate">v4.x</a></li><li><a class="dropdown__link" href="/docs/3/intro">v3.x</a></li></ul></div><a href="https://github.com/react-querybuilder/react-querybuilder" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a class="navbar__item navbar__link header-discord-link" aria-label="Discord server" href="/discord"></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/intro">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/category/components">Components</a><button aria-label="Expand sidebar category &#x27;Components&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/category/styling">Styling</a><button aria-label="Expand sidebar category &#x27;Styling&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/category/utilities">Utilities</a><button aria-label="Expand sidebar category &#x27;Utilities&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/next/category/tips--tricks">Tips &amp; tricks</a><button aria-label="Expand sidebar category &#x27;Tips &amp; tricks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/compat">Compatibility packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/typescript">TypeScript reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/buildless">Buildless</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/next/migrate">Migrating to v7</a></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->React Query Builder<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/migrate">latest version</a></b> (<!-- -->v6.x<!-- -->).</div></div><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Migrating to v7</span><meta itemprop="position" content="1"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Migrating to v7</h1></header><p>Version 7 shouldn&#x27;t require many—if any—code changes when migrating from v6, although <a href="#updated-default-labels">some of the defaults have changed</a>. Also, taking advantage of the <a href="#performance-improvements">performance improvements</a>, <a href="#shift-actions">new features</a>, and <a href="#option-lists-can-use-value-as-identifiers-instead-of-name">other</a> <a href="#query-selector-getter-and-dispatcher">conveniences</a> may require some minor refactoring. A summary of the important changes is below.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="breaking-changes">Breaking changes<a href="#breaking-changes" class="hash-link" aria-label="Direct link to Breaking changes" title="Direct link to Breaking changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="no-default-export">No default export<a href="#no-default-export" class="hash-link" aria-label="Direct link to No default export" title="Direct link to No default export">​</a></h3>
<p><code>react-querybuilder</code> no longer has a default export. Use <code>import { QueryBuilder } from &quot;react-querybuilder&quot;</code> instead:</p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">import QueryBuilder from &quot;react-querybuilder&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">import { QueryBuilder } from &quot;react-querybuilder&quot;;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or, if you named the default export something other than <code>QueryBuilder</code>, like <code>ReactQueryBuilder</code>:</p>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">import ReactQueryBuilder from &quot;react-querybuilder&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">import { QueryBuilder as ReactQueryBuilder } from &quot;react-querybuilder&quot;;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="querybuilder-prop-types"><code>QueryBuilder</code> prop types<a href="#querybuilder-prop-types" class="hash-link" aria-label="Direct link to querybuilder-prop-types" title="Direct link to querybuilder-prop-types">​</a></h3>
<p>The props themselves for the main component haven&#x27;t changed much from version 6, but the TypeScript interface has been overhauled. Notable changes:</p>
<ul>
<li>The query type, extending either <code>RuleGroupType</code> or <code>RuleGroupTypeIC</code>, will be automatically inferred instead of relying on the now-deprecated (and ignored) <code>independentCombinators</code> prop. See <a href="/docs/next/components/querybuilder#independent-combinators">independent combinators</a>.</li>
<li>The <code>QueryBuilderProps</code> type now requires four generic arguments.<!-- -->
<ul>
<li>This shouldn&#x27;t affect JSX which renders a <code>&lt;QueryBuilder /&gt;</code> component since the generic types can almost always be inferred from the props.</li>
<li>While all props are technically still optional, TypeScript may have problems inferring the generics if <code>fields</code> and <code>query</code>/<code>defaultQuery</code> are not provided.</li>
<li>When manually creating an object of type <code>QueryBuilderProps</code>, all four generics must be provided. In order, they represent the query type (extending <code>RuleGroupType</code> or <code>RuleGroupTypeIC</code>), the field type (extending <code>Field</code>), the operator type (extending <code>Operator</code>), and the combinator type (extending <code>Combinator</code>).</li>
</ul>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Valid in version 6:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> qbp6</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">QueryBuilderProps</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Version 7 with the defaults (equivalent to the &quot;version 6&quot; line above):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> qbp7</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">QueryBuilderProps</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">RuleGroupType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Field</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Operator</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Combinator</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Also valid in version 7 (since Field, Operator, and Combinator all extend Option):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> qbp7a</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">QueryBuilderProps</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">RuleGroupType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Option</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Option</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Option</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="parser-functions-removed-from-main-bundle">Parser functions removed from main bundle<a href="#parser-functions-removed-from-main-bundle" class="hash-link" aria-label="Direct link to Parser functions removed from main bundle" title="Direct link to Parser functions removed from main bundle">​</a></h3>
<p>Since the parser functions are used less frequently than other utility functions—and generally not used together—they have been removed from the main export. They have been available as separate exports for some time now (along with <a href="/docs/next/utils/export"><code>formatQuery</code></a> and <a href="/docs/next/utils/misc#transformquery"><code>transformQuery</code></a>), but before version 7 they could still be imported from <code>&quot;react-querybuilder&quot;</code>. They are now available <em>only</em> as separate exports. (This reduces the main bundle size by roughly 50%.)</p>
<table><thead><tr><th>Function</th><th>V7 <code>import</code> udpate</th></tr></thead><tbody><tr><td><code>parseCEL</code></td><td><div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">import { parseCEL } from &quot;react-querybuilder&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">import { parseCEL } from &quot;react-querybuilder/parseCEL&quot;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr><tr><td><code>parseJsonLogic</code></td><td><div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">import { parseJsonLogic } from &quot;react-querybuilder&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">import { parseJsonLogic } from &quot;react-querybuilder/parseJsonLogic&quot;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr><tr><td><code>parseMongoDB</code></td><td><div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">import { parseMongoDB } from &quot;react-querybuilder&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">import { parseMongoDB } from &quot;react-querybuilder/parseMongoDB&quot;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr><tr><td><code>parseSQL</code></td><td><div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">import { parseSQL } from &quot;react-querybuilder&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">import { parseSQL } from &quot;react-querybuilder/parseSQL&quot;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="json-without-identifiers">JSON without identifiers<a href="#json-without-identifiers" class="hash-link" aria-label="Direct link to JSON without identifiers" title="Direct link to JSON without identifiers">​</a></h3>
<p>The <code>&quot;json_without_ids&quot;</code> export format now explicitly removes the <code>id</code> and <code>path</code> properties from the output, leaving all other properties unchanged. Previously this format would only <em>include</em> specific properties which had the effect of removing any non-standard properties. The following command will replicate the previous behavior:</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">query</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;rules&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;field&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;value&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;operator&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;combinator&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;not&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;valueSource&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="miscellaneous">Miscellaneous<a href="#miscellaneous" class="hash-link" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">​</a></h3>
<ul>
<li><code>@react-querybuilder/mantine</code> now requires Mantine v7+.</li>
<li><code>parseMongoDB</code> now generates more concise queries when it encounters <code>$not</code> operators that specify a single, boolean condition. Whereas previously that would yield a group with <code>not: true</code>, now it generates a rule with a negated operator (<code>&quot;=&quot;</code> becomes <code>&quot;!=&quot;</code>, <code>&quot;contains&quot;</code> becomes <code>&quot;doesNotContain&quot;</code>, etc.).</li>
<li>Paths are now declared with a new type alias <code>Path</code> instead of <code>number[]</code>. The actual type is the same: <code>type Path = number[]</code>.</li>
<li>The <code>RuleGroupTypeIC</code> type now includes <code>combinator?: undefined</code> to ensure that query objects intended for use in query builders where <code>independentCombinators</code> is enabled do not contain <code>combinator</code> properties.</li>
<li>The <code>useQueryBuilder</code> hook has been split into <code>useQueryBuilderSetup</code> and <code>useQueryBuilderSchema</code>. <code>useQueryBuilderSchema</code> must be called from a child component of one that calls <code>useQueryBuilderSetup</code> (<code>QueryBuilder</code> takes care of that internally). For example usage, see the <a href="https://github.com/react-querybuilder/react-querybuilder/blob/main/packages/react-querybuilder/src/components/QueryBuilder.tsx" target="_blank" rel="noopener noreferrer"><code>QueryBuilder</code> source code</a>.</li>
<li>The <code>useStopEventPropagation</code> hook, called from the default <code>Rule</code> and <code>RuleGroup</code> components, now takes a single function as its parameter instead of an object map of functions. It must be run for each wrapped function individually.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="new-features">New features<a href="#new-features" class="hash-link" aria-label="Direct link to New features" title="Direct link to New features">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="performance-improvements">Performance improvements<a href="#performance-improvements" class="hash-link" aria-label="Direct link to Performance improvements" title="Direct link to Performance improvements">​</a></h3>
<p>In version 7, internal state is managed in a custom Redux context. Props, components, and derived values are aggressively memoized using <code>React.memo</code>, <code>useMemo</code>, and <code>useCallback</code>. These changes can noticeably improve rendering performance for large queries, especially when using certain style libraries. To take advantage of this change, <em>every</em> prop except <code>query</code> must be memoized or have a stable reference.</p>
<p>The most common violation of that requirement is probably inline arrow functions in the <code>onQueryChange</code> prop (something like <code>&lt;QueryBuilder onQueryChange={q =&gt; setQuery(q)} /&gt;</code>). This can usually be addressed by memoizing the change handler function with <code>useCallback</code>, or, if possible, by moving the change handler definition outside the component rendering function.</p>
<p>If you&#x27;re using a state setter function generated by <code>useState</code> or <code>useReducer</code>, you don&#x27;t need to memoize it. Relatedly, TypeScript no longer throws an error in version 7 if you pass the setter function directly like <code>onQueryChange={setQuery}</code>. Version 6 and earlier required a wrapper function like <code>onQueryChange={q =&gt; setQuery(q)}</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="option-lists-can-use-value-as-identifiers-instead-of-name">Option lists can use <code>value</code> as identifiers instead of <code>name</code><a href="#option-lists-can-use-value-as-identifiers-instead-of-name" class="hash-link" aria-label="Direct link to option-lists-can-use-value-as-identifiers-instead-of-name" title="Direct link to option-lists-can-use-value-as-identifiers-instead-of-name">​</a></h3>
<p>Previously, props and properties that accepted an <code>OptionList</code> type or extension thereof (<code>fields</code>, <code>combinators</code>, etc.) required a <code>name</code> property as the unique identifier for each member within the list. In version 7, list members may specify a <code>value</code> property as their identifier instead of <code>name</code>. If both <code>name</code> and <code>value</code> properties are present for a given item, <code>value</code> will take precedence. All option list members will be augmented to contain equivalent <code>name</code> and <code>value</code> properties if only one is provided, so subcomponents can always assume both will be present. <strong>NOTE</strong>: The <code>Field</code>, <code>Combinator</code>, and <code>Operator</code> types, which extend <code>Option</code>, still require a <code>name</code> property when used directly. You can use the <code>FlexibleOption</code> type instead to avoid the <code>name</code> property requirement, but you will lose intellisense for the additional properties of the more specific types.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="bulk-override-action-and-value-selector-components">Bulk override action and value selector components<a href="#bulk-override-action-and-value-selector-components" class="hash-link" aria-label="Direct link to Bulk override action and value selector components" title="Direct link to Bulk override action and value selector components">​</a></h3>
<p>Two &quot;bulk override&quot; properties have been added to the <a href="/docs/next/components/querybuilder#controlelements"><code>controlElements</code></a> prop: <a href="/docs/next/components/querybuilder#actionelement"><code>actionElement</code></a> and <a href="/docs/next/components/querybuilder#valueselector"><code>valueSelector</code></a>. When <code>actionElement</code> is defined, it will be used for each component that defaults to <code>ActionElement</code> (as long as that component is not explicitly overridden in the <code>controlElements</code> prop). The same is true for <code>valueSelector</code> and components that default to <code>ValueSelector</code> (including <code>ValueEditor</code> in cases where it renders a value selector). This makes it possible to define replacement components for all buttons and selectors at once instead of one-by-one.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="query-selector-getter-and-dispatcher">Query selector, getter, and dispatcher<a href="#query-selector-getter-and-dispatcher" class="hash-link" aria-label="Direct link to Query selector, getter, and dispatcher" title="Direct link to Query selector, getter, and dispatcher">​</a></h3>
<p>Three new methods are available that should make it easier to manage arbitrary query updates from custom components. The first two methods are available from the <code>schema</code> prop which is passed to every component, and should only be used in event handlers. The third is a React Hook and should follow the <a href="https://react.dev/warnings/invalid-hook-call-warning" target="_blank" rel="noopener noreferrer">appropriate rules</a>.</p>
<ul>
<li><code>getQuery()</code>: returns the current root query object.</li>
<li><code>dispatchQuery(query)</code>: updates the internal state and calls the <code>onQueryChange</code> callback with the provided query. Previously, updates that couldn&#x27;t be performed with the <code>handleOnChange</code> or <code>handleOnClick</code> callbacks had to use external state management in conjunction with the <a href="/docs/next/utils/misc#add"><code>add</code></a>/<a href="/docs/next/utils/misc#update"><code>update</code></a>/<a href="/docs/next/utils/misc#remove"><code>remove</code></a> utilities.</li>
<li><code>useQueryBuilderSelector(selector)</code>: generate the selector with <code>getQuerySelectorById(props.schema.qbId)</code>.</li>
</ul>
<p>Notes:</p>
<ul>
<li>These functions use a custom <a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer">Redux</a> context behind the scenes.</li>
<li>Previously we recommended including the query object as a property of the <code>context</code> prop. That workaround is no longer necessary.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="field-data-passed-to-get-callbacks">Field data passed to <code>get*</code> callbacks<a href="#field-data-passed-to-get-callbacks" class="hash-link" aria-label="Direct link to field-data-passed-to-get-callbacks" title="Direct link to field-data-passed-to-get-callbacks">​</a></h3>
<p>Most of the <code>get*</code> callback props now receive an additional &quot;meta&quot; parameter with a <code>fieldData</code> property (more properties may be added to the &quot;meta&quot; object in the future). <code>fieldData</code> is the full <code>Field</code> object from the <code>fields</code> array for the given <code>field</code> name, including any custom properties (a common one is <code>datatype</code>). This eliminates the need to find the field object based solely on the field&#x27;s <code>name</code> within the <code>get*</code> functions themselves. Instead of something like <code>fields.find(f =&gt; f.name === field)</code>, you can retrieve <code>fieldData</code> from the last parameter.</p>
<p>The following callback props provide the new &quot;meta&quot; parameter: <code>getDefaultOperator</code>, <code>getDefaultValue</code>, <code>getInputType</code>, <code>getOperators</code>, <code>getRuleClassname</code>, <code>getValueEditorSeparator</code>, <code>getValueEditorType</code>, <code>getValues</code>, and <code>getValueSources</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="field-data-passed-to-formatquery-rule-processors">Field data passed to <code>formatQuery</code> rule processors<a href="#field-data-passed-to-formatquery-rule-processors" class="hash-link" aria-label="Direct link to field-data-passed-to-formatquery-rule-processors" title="Direct link to field-data-passed-to-formatquery-rule-processors">​</a></h3>
<ul>
<li>Custom rule processors for <code>formatQuery</code> now receive the full <code>Field</code> object in the options parameter, as long as a <code>fields</code> array is provided alongside <code>ruleProcessor</code>. In TypeScript, the member type of the <code>fields</code> array now requires a <code>label: string</code> property (just like <code>QueryBuilder</code>&#x27;s <code>fields</code> prop). Previously, only <code>name</code> was required.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="shift-actions">Shift actions<a href="#shift-actions" class="hash-link" aria-label="Direct link to Shift actions" title="Direct link to Shift actions">​</a></h3>
<p>A new <code>showShiftActions</code> prop provides first class support for rearranging rules within a query without enabling drag-and-drop. When <code>showShiftActions</code> is <code>true</code>, two buttons will appear at the front of each rule and group (except the root group), stacked vertically by default. The first/upper button will shift the rule or group one spot higher, while the second/lower button will shift it one spot lower. Pressing the modifier key (<code>Alt</code> on Windows/Linux, <code>Option</code>/<code>⌥</code> on Mac) while clicking will clone the rule/group instead of just moving it.</p>
<p>Related additions:</p>
<ul>
<li><code>ShiftActions</code> component (with a corresponding component in each compatibility package) that renders &quot;shift up&quot; and &quot;shift down&quot; action buttons. The default styles remove the border and background from these buttons, leaving only the <code>shiftActionUp.label</code>/<code>shiftActionDown.label</code> translation properties visible.</li>
<li><code>useShiftActions</code> hook, called by the <code>ShiftActions</code> component, returns <code>shiftUp</code>/<code>shiftDown</code> methods and determines whether either button should be disabled. (Within the root group, &quot;shift up&quot; is disabled for the very first rule or group and &quot;shift down&quot; is disabled for the very last rule or group).</li>
<li>New properties on the <code>translations</code> prop: <code>shiftActionUp</code> and <code>shiftActionDown</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="accessibility">Accessibility<a href="#accessibility" class="hash-link" aria-label="Direct link to Accessibility" title="Direct link to Accessibility">​</a></h3>
<p>Accessibility is improved with the addition of a <code>title</code> attribute to the outermost <code>&lt;div&gt;</code> of each rule group. The text of this attribute can be customized with the <code>accessibleDescriptionGenerator</code> function prop. The default implementation is exported as <a href="https://github.com/react-querybuilder/react-querybuilder/blob/main/packages/react-querybuilder/src/utils/generateAccessibleDescription.ts" target="_blank" rel="noopener noreferrer">generateAccessibleDescription</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="drag-and-drop-candrop-callback">Drag-and-drop <code>canDrop</code> callback<a href="#drag-and-drop-candrop-callback" class="hash-link" aria-label="Direct link to drag-and-drop-candrop-callback" title="Direct link to drag-and-drop-candrop-callback">​</a></h3>
<p><code>&lt;QueryBuilderDnD /&gt;</code> and <code>&lt;QueryBuilderDndWithoutProvider /&gt;</code> from <code>@react-querybuilder/dnd</code> now accept a <code>canDrop</code> function prop. If provided, the function will be called when dragging a rule or group. The only parameter will be an object containing the dragged <code>item</code> (type <code>{ path: Path }</code>) and the <code>path</code> of the rule/group over which the dragged item is hovering. If <code>canDrop</code> returns <code>false</code>, dropping the item at its current position will have no effect on the query. If <code>canDrop</code> returns <code>true</code>, the normal rules will apply.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="enhanced-parsenumber-behavior">Enhanced <code>parseNumber</code> behavior<a href="#enhanced-parsenumber-behavior" class="hash-link" aria-label="Direct link to enhanced-parsenumber-behavior" title="Direct link to enhanced-parsenumber-behavior">​</a></h3>
<p>The <code>parseNumber</code> function now delegates parsing to <a href="https://www.npmjs.com/package/numeric-quantity" target="_blank" rel="noopener noreferrer"><code>numeric-quantity</code></a> (essentially an enhanced version of <code>parseFloat</code>). The default behavior has not changed, but a new &quot;enhanced&quot; option will ignore trailing invalid characters (e.g., the &quot;abc&quot; in &quot;123abc&quot;). This matches the bahavior of the &quot;native&quot; option, which uses <code>parseFloat</code> directly, except it returns the original string when parsing fails instead of <code>NaN</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="updated-default-labels">Updated default labels<a href="#updated-default-labels" class="hash-link" aria-label="Direct link to Updated default labels" title="Direct link to Updated default labels">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="main-package">Main package<a href="#main-package" class="hash-link" aria-label="Direct link to Main package" title="Direct link to Main package">​</a></h3>
<table><thead><tr><th>Key</th><th>Old</th><th>New</th><th>Notes</th></tr></thead><tbody><tr><td><code>translations.addRule.label</code></td><td><code>&quot;+Rule&quot;</code></td><td><code>&quot;+ Rule&quot;</code></td><td>Space added between &quot;+&quot; and &quot;Rule&quot;</td></tr><tr><td><code>translations.addGroup.label</code></td><td><code>&quot;+Group&quot;</code></td><td><code>&quot;+ Group&quot;</code></td><td>Space added between &quot;+&quot; and &quot;Group&quot;</td></tr><tr><td><code>translations.removeRule.label</code></td><td><code>&quot;x&quot;</code></td><td><code>&quot;⨯&quot;</code></td><td>HTML entity <code>&amp;cross;</code> / <code>&amp;#x2A2F;</code></td></tr><tr><td><code>translations.removeGroup.label</code></td><td><code>&quot;x&quot;</code></td><td><code>&quot;⨯&quot;</code></td><td>HTML entity <code>&amp;cross;</code> / <code>&amp;#x2A2F;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="compatibility-packages">Compatibility packages<a href="#compatibility-packages" class="hash-link" aria-label="Direct link to Compatibility packages" title="Direct link to Compatibility packages">​</a></h3>
<p>Several compatibility packages take advantage of the new ability to use a <code>ReactNode</code> as a <code>label</code> (previously only <code>string</code>s were allowed). These packages override the default <code>label</code> for non-text components (<code>lock*</code>, <code>clone*</code>, <code>remove*</code>, and <code>dragHandle</code>) with SVG icons from their official icon packages. This brings them more in line with their respective design systems by default. To avoid using the icons, use <code>translations={defaultTranslations}</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="react-querybuilderantd"><code>@react-querybuilder/antd</code><a href="#react-querybuilderantd" class="hash-link" aria-label="Direct link to react-querybuilderantd" title="Direct link to react-querybuilderantd">​</a></h4>
<p>Icon package: <a href="https://npmjs.com/package/@ant-design/icons" target="_blank" rel="noopener noreferrer"><code>@ant-design/icons</code></a></p>
<table><thead><tr><th>Key</th><th>Icon</th></tr></thead><tbody><tr><td><code>translations.removeGroup.label</code></td><td><code>&lt;CloseOutlined /&gt;</code></td></tr><tr><td><code>translations.removeRule.label</code></td><td><code>&lt;CloseOutlined /&gt;</code></td></tr><tr><td><code>translations.cloneRule.label</code></td><td><code>&lt;CopyOutlined /&gt;</code></td></tr><tr><td><code>translations.cloneRuleGroup.label</code></td><td><code>&lt;CopyOutlined /&gt;</code></td></tr><tr><td><code>translations.lockGroup.label</code></td><td><code>&lt;UnlockOutlined /&gt;</code></td></tr><tr><td><code>translations.lockRule.label</code></td><td><code>&lt;UnlockOutlined /&gt;</code></td></tr><tr><td><code>translations.lockGroupDisabled.label</code></td><td><code>&lt;LockOutlined /&gt;</code></td></tr><tr><td><code>translations.lockRuleDisabled.label</code></td><td><code>&lt;LockOutlined /&gt;</code></td></tr><tr><td><code>translations.shiftActionUp.label</code></td><td><code>&lt;UpOutlined /&gt;</code></td></tr><tr><td><code>translations.shiftActionDown.label</code></td><td><code>&lt;DownOutlined /&gt;</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="react-querybuilderbootstrap"><code>@react-querybuilder/bootstrap</code><a href="#react-querybuilderbootstrap" class="hash-link" aria-label="Direct link to react-querybuilderbootstrap" title="Direct link to react-querybuilderbootstrap">​</a></h4>
<p>Icon package: <a href="https://npmjs.com/package/bootstrap-icons" target="_blank" rel="noopener noreferrer"><code>bootstrap-icons</code></a></p>
<blockquote>
<p><em>Note: The <code>BootstrapDragHandle</code> component has been removed. It is unnecessary now that the default drag handle component can accept a <code>ReactNode</code> as its <code>label</code>.</em></p>
</blockquote>
<table><thead><tr><th>Key</th><th>Icon</th></tr></thead><tbody><tr><td><code>translations.removeGroup.label</code></td><td><code>&lt;i className=&quot;bi bi-x&quot; /&gt;</code></td></tr><tr><td><code>translations.removeRule.label</code></td><td><code>&lt;i className=&quot;bi bi-x&quot; /&gt;</code></td></tr><tr><td><code>translations.cloneRule.label</code></td><td><code>&lt;i className=&quot;bi bi-copy&quot; /&gt;</code></td></tr><tr><td><code>translations.cloneRuleGroup.label</code></td><td><code>&lt;i className=&quot;bi bi-copy&quot; /&gt;</code></td></tr><tr><td><code>translations.dragHandle.label</code></td><td><code>&lt;i className=&quot;bi bi-grip-vertical&quot; /&gt;</code></td></tr><tr><td><code>translations.lockGroup.label</code></td><td><code>&lt;i className=&quot;bi bi-unlock&quot; /&gt;</code></td></tr><tr><td><code>translations.lockRule.label</code></td><td><code>&lt;i className=&quot;bi bi-unlock&quot; /&gt;</code></td></tr><tr><td><code>translations.lockGroupDisabled.label</code></td><td><code>&lt;i className=&quot;bi bi-lock&quot; /&gt;</code></td></tr><tr><td><code>translations.lockRuleDisabled.label</code></td><td><code>&lt;i className=&quot;bi bi-lock&quot; /&gt;</code></td></tr><tr><td><code>translations.shiftActionUp.label</code></td><td><code>&lt;i className=&quot;bi bi-chevron-compact-up&quot; /&gt;</code></td></tr><tr><td><code>translations.shiftActionDown.label</code></td><td><code>&lt;i className=&quot;bi bi-chevron-compact-down&quot; /&gt;</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="react-querybuilderchakra"><code>@react-querybuilder/chakra</code><a href="#react-querybuilderchakra" class="hash-link" aria-label="Direct link to react-querybuilderchakra" title="Direct link to react-querybuilderchakra">​</a></h4>
<p>Icon package: <a href="https://npmjs.com/package/@chakra-ui/icons" target="_blank" rel="noopener noreferrer"><code>@chakra-ui/icons</code></a></p>
<table><thead><tr><th>Key</th><th>Icon</th></tr></thead><tbody><tr><td><code>translations.removeGroup.label</code></td><td><code>&lt;CloseIcon /&gt;</code></td></tr><tr><td><code>translations.removeRule.label</code></td><td><code>&lt;CloseIcon /&gt;</code></td></tr><tr><td><code>translations.cloneRuleGroup.label</code></td><td><code>&lt;CopyIcon /&gt;</code></td></tr><tr><td><code>translations.cloneRule.label</code></td><td><code>&lt;CopyIcon /&gt;</code></td></tr><tr><td><code>translations.lockGroup.label</code></td><td><code>&lt;UnlockIcon /&gt;</code></td></tr><tr><td><code>translations.lockRule.label</code></td><td><code>&lt;UnlockIcon /&gt;</code></td></tr><tr><td><code>translations.lockGroupDisabled.label</code></td><td><code>&lt;LockIcon /&gt;</code></td></tr><tr><td><code>translations.lockRuleDisabled.label</code></td><td><code>&lt;LockIcon /&gt;</code></td></tr><tr><td><code>translations.shiftActionDown.label</code></td><td><code>&lt;ChevronDownIcon /&gt;</code></td></tr><tr><td><code>translations.shiftActionUp.label</code></td><td><code>&lt;ChevronUpIcon /&gt;</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="react-querybuilderfluent"><code>@react-querybuilder/fluent</code><a href="#react-querybuilderfluent" class="hash-link" aria-label="Direct link to react-querybuilderfluent" title="Direct link to react-querybuilderfluent">​</a></h4>
<p>Icon package: <a href="https://npmjs.com/package/@fluentui/react-icons-mdl2" target="_blank" rel="noopener noreferrer"><code>@fluentui/react-icons-mdl2</code></a></p>
<table><thead><tr><th>Key</th><th>Icon</th></tr></thead><tbody><tr><td><code>translations.removeGroup.label</code></td><td><code>&lt;CancelIcon /&gt;</code></td></tr><tr><td><code>translations.removeRule.label</code></td><td><code>&lt;CancelIcon /&gt;</code></td></tr><tr><td><code>translations.cloneRule.label</code></td><td><code>&lt;DuplicateRowIcon /&gt;</code></td></tr><tr><td><code>translations.cloneRuleGroup.label</code></td><td><code>&lt;DuplicateRowIcon /&gt;</code></td></tr><tr><td><code>translations.dragHandle.label</code></td><td><code>&lt;GripperDotsVerticalIcon /&gt;</code></td></tr><tr><td><code>translations.lockGroup.label</code></td><td><code>&lt;UnlockIcon /&gt;</code></td></tr><tr><td><code>translations.lockRule.label</code></td><td><code>&lt;UnlockIcon /&gt;</code></td></tr><tr><td><code>translations.lockGroupDisabled.label</code></td><td><code>&lt;LockIcon /&gt;</code></td></tr><tr><td><code>translations.lockRuleDisabled.label</code></td><td><code>&lt;LockIcon /&gt;</code></td></tr><tr><td><code>translations.shiftActionDown.label</code></td><td><code>&lt;ChevronDownIcon /&gt;</code></td></tr><tr><td><code>translations.shiftActionUp.label</code></td><td><code>&lt;ChevronUpIcon /&gt;</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="react-querybuildermaterial"><code>@react-querybuilder/material</code><a href="#react-querybuildermaterial" class="hash-link" aria-label="Direct link to react-querybuildermaterial" title="Direct link to react-querybuildermaterial">​</a></h4>
<p>Icon package: <a href="https://npmjs.com/package/@mui/icons-material" target="_blank" rel="noopener noreferrer"><code>@mui/icons-material</code></a></p>
<table><thead><tr><th>Key</th><th>Icon</th></tr></thead><tbody><tr><td><code>translations.removeGroup.label</code></td><td><code>&lt;Close /&gt;</code></td></tr><tr><td><code>translations.removeRule.label</code></td><td><code>&lt;Close /&gt;</code></td></tr><tr><td><code>translations.cloneRule.label</code></td><td><code>&lt;ContentCopy /&gt;</code></td></tr><tr><td><code>translations.cloneRuleGroup.label</code></td><td><code>&lt;ContentCopy /&gt;</code></td></tr><tr><td><code>translations.lockGroup.label</code></td><td><code>&lt;LockOpen /&gt;</code></td></tr><tr><td><code>translations.lockRule.label</code></td><td><code>&lt;LockOpen /&gt;</code></td></tr><tr><td><code>translations.lockGroupDisabled.label</code></td><td><code>&lt;Lock /&gt;</code></td></tr><tr><td><code>translations.lockRuleDisabled.label</code></td><td><code>&lt;Lock /&gt;</code></td></tr><tr><td><code>translations.shiftActionDown.label</code></td><td><code>&lt;ShiftDown /&gt;</code></td></tr><tr><td><code>translations.shiftActionUp.label</code></td><td><code>&lt;ShiftUp /&gt;</code></td></tr></tbody></table>
<p>Instructions on migrating from v5 to v6 are <a href="/docs/migrate">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/react-querybuilder/react-querybuilder/edit/main/website/docs/migrate.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_pbO5"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/buildless"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Buildless</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking changes</a><ul><li><a href="#no-default-export" class="table-of-contents__link toc-highlight">No default export</a></li><li><a href="#querybuilder-prop-types" class="table-of-contents__link toc-highlight"><code>QueryBuilder</code> prop types</a></li><li><a href="#parser-functions-removed-from-main-bundle" class="table-of-contents__link toc-highlight">Parser functions removed from main bundle</a></li><li><a href="#json-without-identifiers" class="table-of-contents__link toc-highlight">JSON without identifiers</a></li><li><a href="#miscellaneous" class="table-of-contents__link toc-highlight">Miscellaneous</a></li></ul></li><li><a href="#new-features" class="table-of-contents__link toc-highlight">New features</a><ul><li><a href="#performance-improvements" class="table-of-contents__link toc-highlight">Performance improvements</a></li><li><a href="#option-lists-can-use-value-as-identifiers-instead-of-name" class="table-of-contents__link toc-highlight">Option lists can use <code>value</code> as identifiers instead of <code>name</code></a></li><li><a href="#bulk-override-action-and-value-selector-components" class="table-of-contents__link toc-highlight">Bulk override action and value selector components</a></li><li><a href="#query-selector-getter-and-dispatcher" class="table-of-contents__link toc-highlight">Query selector, getter, and dispatcher</a></li><li><a href="#field-data-passed-to-get-callbacks" class="table-of-contents__link toc-highlight">Field data passed to <code>get*</code> callbacks</a></li><li><a href="#field-data-passed-to-formatquery-rule-processors" class="table-of-contents__link toc-highlight">Field data passed to <code>formatQuery</code> rule processors</a></li><li><a href="#shift-actions" class="table-of-contents__link toc-highlight">Shift actions</a></li><li><a href="#accessibility" class="table-of-contents__link toc-highlight">Accessibility</a></li><li><a href="#drag-and-drop-candrop-callback" class="table-of-contents__link toc-highlight">Drag-and-drop <code>canDrop</code> callback</a></li><li><a href="#enhanced-parsenumber-behavior" class="table-of-contents__link toc-highlight">Enhanced <code>parseNumber</code> behavior</a></li></ul></li><li><a href="#updated-default-labels" class="table-of-contents__link toc-highlight">Updated default labels</a><ul><li><a href="#main-package" class="table-of-contents__link toc-highlight">Main package</a></li><li><a href="#compatibility-packages" class="table-of-contents__link toc-highlight">Compatibility packages</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Getting started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/components/querybuilder">Components</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/tips--tricks">Tips &amp; Tricks</a></li><li class="footer__item"><a class="footer__link-item" href="/demo">Showcase</a></li></ul></div><div class="col footer__col"><div class="footer__title">External</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/react-querybuilder/react-querybuilder" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/discord">Discord</a></li><li class="footer__item"><a href="https://www.npmjs.com/package/react-querybuilder" target="_blank" rel="noopener noreferrer" class="footer__link-item">npm<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/sponsors/jakeboone02" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support ♥<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 React Query Builder authors. Built with Docusaurus.<br><br><a href="https://www.netlify.com"><img src="https://www.netlify.com/v3/img/components/netlify-dark.svg" alt="Deploys by Netlify"></a></div></div></div></footer></div>
</body>
</html>