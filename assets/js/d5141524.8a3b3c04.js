"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9237],{70876:(e,r,n)=>{n.d(r,{Z:()=>j});var o=n(27378),s=n(37140),t=n(33441),i=n(90362),l=n(74229);const d={details:"details_IpIu",isBrowser:"isBrowser_QD4r",collapsibleContent:"collapsibleContent_Fd2D"};var a=n(24246);function c(e){return!!e&&("SUMMARY"===e.tagName||c(e.parentElement))}function u(e,r){return!!e&&(e===r||u(e.parentElement,r))}function h(e){let{summary:r,children:n,...s}=e;const h=(0,i.Z)(),p=(0,o.useRef)(null),{collapsed:x,setCollapsed:j}=(0,l.u)({initialState:!s.open}),[f,m]=(0,o.useState)(s.open),y=o.isValidElement(r)?r:(0,a.jsx)("summary",{children:r??"Details"});return(0,a.jsxs)("details",{...s,ref:p,open:f,"data-collapsed":x,className:(0,t.Z)(d.details,h&&d.isBrowser,s.className),onMouseDown:e=>{c(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const r=e.target;c(r)&&u(r,p.current)&&(e.preventDefault(),x?(j(!1),m(!0)):j(!0))},children:[y,(0,a.jsx)(l.z,{lazy:!1,collapsed:x,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{j(e),m(!e)},children:(0,a.jsx)("div",{className:d.collapsibleContent,children:n})})]})}const p={details:"details_jERq"},x="alert alert--info";function j(e){let{...r}=e;return(0,a.jsx)(h,{...r,className:(0,s.Z)(x,p.details,r.className)})}},7009:(e,r,n)=>{n.d(r,{L:()=>s});var o=n(24246);const s=e=>{let{option:r,disabled:n=!1,text:s}=e;return(0,o.jsx)("a",{href:`/demo#${r}=${!n}`,children:s||"Click here for demo"+(n?" with this feature disabled":"")})}},4820:(e,r,n)=>{n.d(r,{ZP:()=>i});var o=n(24246),s=n(71670);function t(e){const r={a:"a",admonition:"admonition",p:"p",...(0,s.a)(),...e.components};return(0,o.jsx)(r.admonition,{type:"info",children:(0,o.jsxs)(r.p,{children:["Please refer to the ",(0,o.jsx)(r.a,{href:"../typescript",children:"TypeScript"})," page for information about the types and interfaces referenced below."]})})}function i(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},65743:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>u,contentTitle:()=>a,default:()=>x,frontMatter:()=>d,metadata:()=>c,toc:()=>h});var o=n(24246),s=n(71670),t=n(7009),i=n(70876),l=n(4820);const d={title:"Miscellaneous",hide_table_of_contents:!0,description:"Assorted utilities and other exports"},a=void 0,c={id:"api/misc",title:"Miscellaneous",description:"Assorted utilities and other exports",source:"@site/versioned_docs/version-4/api/misc.mdx",sourceDirName:"api",slug:"/api/misc",permalink:"/docs/4/api/misc",draft:!1,unlisted:!1,editUrl:"https://github.com/react-querybuilder/react-querybuilder/edit/main/website/versioned_docs/version-4/api/misc.mdx",tags:[],version:"4",frontMatter:{title:"Miscellaneous",hide_table_of_contents:!0,description:"Assorted utilities and other exports"},sidebar:"mySidebar",previous:{title:"Validation",permalink:"/docs/4/api/validation"},next:{title:"Tips & tricks",permalink:"/docs/4/category/tips--tricks"}},u={},h=[{value:"Utilities",id:"utilities",level:2},{value:"<code>transformQuery</code>",id:"transformquery",level:3},{value:"<code>defaultValidator</code>",id:"defaultvalidator",level:3},{value:"<code>findPath</code>",id:"findpath",level:3},{value:"<code>convertQuery</code>",id:"convertquery",level:3},{value:"Query tools",id:"query-tools",level:2},{value:"<code>add</code>",id:"add",level:3},{value:"<code>remove</code>",id:"remove",level:3},{value:"<code>update</code>",id:"update",level:3},{value:"<code>move</code>",id:"move",level:3},{value:"Defaults",id:"defaults",level:2}];function p(e){const r={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.ZP,{}),"\n",(0,o.jsxs)(r.p,{children:["A non-comprehensive list of exports from ",(0,o.jsx)(r.code,{children:"react-querybuilder"}),"."]}),"\n",(0,o.jsx)(r.h2,{id:"utilities",children:"Utilities"}),"\n",(0,o.jsx)(r.h3,{id:"transformquery",children:(0,o.jsx)(r.code,{children:"transformQuery"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"function transformQuery(query: RuleGroupTypeAny, options: QueryTransformerOptions): any;\n"})}),"\n",(0,o.jsxs)(r.p,{children:["This function recursively steps through a query object (",(0,o.jsx)(r.code,{children:"RuleGroupType"})," or ",(0,o.jsx)(r.code,{children:"RuleGroupTypeIC"}),"), passing each ",(0,o.jsx)(r.code,{children:"RuleType"})," object to a provided ",(0,o.jsx)(r.code,{children:"ruleProcessor"})," function. Available options include:"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"ruleProcessor"}),": Custom processing for each rule."]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"ruleGroupProcessor"}),": Custom processing for each rule group. (The ",(0,o.jsx)(r.code,{children:"rules"})," property will be retained.)"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"propertyMap"}),": Keys in the rule or group objects that match keys in this object will be renamed to the corresponding value."]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"combinatorMap"}),": Best explained with an example: ",(0,o.jsx)(r.code,{children:'{and: "&&", or: "||"}'}),' would translate "and"/"or" combinators to "&&"/"||", respectively.']}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"operatorMap"}),": Convert operators that match the keys in this object to the corresponding values, e.g. ",(0,o.jsx)(r.code,{children:'{"=": "=="}'}),"."]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"deleteRemappedProperties"}),": Defaults to ",(0,o.jsx)(r.code,{children:"true"}),"; pass ",(0,o.jsx)(r.code,{children:"false"})," to leave the remapped properties ",(0,o.jsx)(r.em,{children:"and"})," the original properties in the resulting object."]}),"\n"]}),"\n",(0,o.jsxs)(r.p,{children:["See the ",(0,o.jsx)(r.a,{href:"https://github.com/react-querybuilder/react-querybuilder/blob/main/packages/react-querybuilder/src/utils/transformQuery.test.ts",children:"test suite"})," for example usage."]}),"\n",(0,o.jsx)(r.h3,{id:"defaultvalidator",children:(0,o.jsx)(r.code,{children:"defaultValidator"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"function defaultValidator(query: RuleGroupTypeAny): {\n  [id: string]: { valid: boolean; reasons?: string[] };\n};\n"})}),"\n",(0,o.jsxs)(r.p,{children:["Pass ",(0,o.jsx)(r.code,{children:"validator={defaultValidator}"})," to automatically validate groups (rules will be ignored). A group will be marked invalid if either 1) it has no child rules or groups (",(0,o.jsx)(r.code,{children:"query.rules.length === 0"}),"), or 2) it has a missing/invalid ",(0,o.jsx)(r.code,{children:"combinator"})," and more than one child rule or group (",(0,o.jsx)(r.code,{children:"rules.length >= 2"}),")."]}),"\n",(0,o.jsxs)(r.p,{children:["You can see an example of the default validator in action in the ",(0,o.jsx)(r.a,{href:"/demo",children:"demo"})," if you check the ",(0,o.jsx)(t.L,{option:"validateQuery",text:"'Use validation' option"}),'. Empty groups will have bold text on their "+Rule" button and a description of the situation where the rules normally appear.']}),"\n",(0,o.jsx)(r.h3,{id:"findpath",children:(0,o.jsx)(r.code,{children:"findPath"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"function findPath(path: number[], query: RuleGroupTypeAny): RuleType | RuleGroupTypeAny;\n"})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"findPath"})," is a utility function for finding the rule or group within the query hierarchy that has a given ",(0,o.jsx)(r.code,{children:"path"}),". Useful in custom ",(0,o.jsx)(r.a,{href:"./querybuilder#onaddrule",children:(0,o.jsx)(r.code,{children:"onAddRule"})})," and ",(0,o.jsx)(r.a,{href:"./querybuilder#onaddgroup",children:(0,o.jsx)(r.code,{children:"onAddGroup"})})," functions."]}),"\n",(0,o.jsx)(r.h3,{id:"convertquery",children:(0,o.jsx)(r.code,{children:"convertQuery"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"function convertQuery(query: RuleGroupType): RuleGroupTypeIC;\n// OR\nfunction convertQuery(query: RuleGroupTypeIC): RuleGroupType;\n"})}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"convertQuery"})," toggles a query between the conventional ",(0,o.jsx)(r.code,{children:"RuleGroupType"}),' structure (with combinators at the group level) and the "independent combinators" structure (',(0,o.jsx)(r.code,{children:"RuleGroupTypeIC"}),", used with the ",(0,o.jsxs)(r.a,{href:"./querybuilder#independentcombinators",children:[(0,o.jsx)(r.code,{children:"independentCombinators"})," prop"]}),")."]}),"\n",(0,o.jsxs)(r.p,{children:[(0,o.jsx)(r.code,{children:"convertToIC"})," and ",(0,o.jsx)(r.code,{children:"convertFromIC"})," do the same thing as ",(0,o.jsx)(r.code,{children:"convertQuery"}),", but only in the directions indicated by their respective names."]}),"\n",(0,o.jsx)(r.h2,{id:"query-tools",children:"Query tools"}),"\n",(0,o.jsxs)(r.p,{children:["Several methods are available to assist with programmatic manipulation of query objects. These methods are used by the ",(0,o.jsx)(r.code,{children:"<QueryBuilder />"})," component itself, so they are guaranteed to achieve the same result as a corresponding UI-based update. Each of these methods returns the modified query."]}),"\n",(0,o.jsxs)(r.p,{children:["Check out the ",(0,o.jsx)(r.a,{href:"../tips/external-controls",children:'"External controls" Tips & Tricks page'})," to see these methods used outside the context of the ",(0,o.jsx)(r.code,{children:"<QueryBuilder />"})," component."]}),"\n",(0,o.jsx)(r.h3,{id:"add",children:(0,o.jsx)(r.code,{children:"add"})}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.code,{children:"(query: RuleGroupTypeAny, ruleOrGroup: RuleGroupTypeAny | RuleType, path: number[]) => RuleGroupTypeAny"})}),"\n",(0,o.jsx)(r.p,{children:"Adds a rule or group (and an independent combinator if necessary, to keep the query valid)."}),"\n",(0,o.jsx)(r.h3,{id:"remove",children:(0,o.jsx)(r.code,{children:"remove"})}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.code,{children:"(query: RuleGroupTypeAny, path: number[]) => RuleGroupTypeAny"})}),"\n",(0,o.jsx)(r.p,{children:"Removes a rule or group (and the preceding independent combinator, if one exists)."}),"\n",(0,o.jsx)(r.h3,{id:"update",children:(0,o.jsx)(r.code,{children:"update"})}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.code,{children:"(query: RuleGroupTypeAny, prop: string, value: any, path: number[], options: UpdateOptions) => RuleGroupTypeAny"})}),"\n",(0,o.jsx)(r.p,{children:"Updates a property of a rule or group, or updates an independent combinator."}),"\n",(0,o.jsx)(i.Z,{summary:"UpdateOptions",children:(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"interface UpdateOptions {\n  /** Resets `operator` and `value` when `field` changes. Default is `true`. */\n  resetOnFieldChange?: boolean;\n  /** Resets `value` when `operator` changes. Default is `false`. */\n  resetOnOperatorChange?: boolean;\n  /** Determines the default operator name for a given field. */\n  getRuleDefaultOperator?: (field: string) => string;\n  /** Determines the valid value sources for a given field and operator. */\n  getValueSources?: (field: string, operator: string) => ValueSources;\n  /** Used when the `value` property is reset (see `resetOn*Change` options). */\n  getRuleDefaultValue?: (rule: RuleType) => any;\n}\n"})})}),"\n",(0,o.jsx)(r.h3,{id:"move",children:(0,o.jsx)(r.code,{children:"move"})}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.code,{children:"(query: RuleGroupTypeAny, oldPath: number[], newPath: number[], options: MoveOptions) => RuleGroupTypeAny"})}),"\n",(0,o.jsxs)(r.p,{children:["Moves (or clones, with a new ",(0,o.jsx)(r.code,{children:"id"}),") a rule or group to a new location in the query tree."]}),"\n",(0,o.jsx)(i.Z,{summary:"MoveOptions",children:(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-ts",children:"interface MoveOptions {\n  /** Copy the source rule/group instead of move. Default is `false`. */\n  clone?: boolean;\n  /** Only applicable for `RuleGroupTypeIC`. Default is `defaultCombinators`. */\n  combinators?: NameLabelPair[] | OptionGroup[];\n}\n"})})}),"\n",(0,o.jsx)(r.h2,{id:"defaults",children:"Defaults"}),"\n",(0,o.jsx)(r.p,{children:"The following default configuration objects are exported for convenience."}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"defaultCombinators"})," (see ",(0,o.jsxs)(r.a,{href:"./querybuilder#combinators",children:[(0,o.jsx)(r.code,{children:"combinators"})," prop"]}),")"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"defaultOperators"})," (see ",(0,o.jsxs)(r.a,{href:"./querybuilder#operators",children:[(0,o.jsx)(r.code,{children:"operators"})," prop"]}),")"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"defaultTranslations"})," (see ",(0,o.jsxs)(r.a,{href:"./querybuilder#translations",children:[(0,o.jsx)(r.code,{children:"translations"})," prop"]}),")"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"defaultValueProcessor"})," and variants for non-SQL formats (see ",(0,o.jsx)(r.a,{href:"./export",children:"Export"})," > ",(0,o.jsx)(r.a,{href:"./export#value-processor",children:"Value processor"}),")"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"defaultFields"})," (see ",(0,o.jsxs)(r.a,{href:"./querybuilder#fields",children:[(0,o.jsx)(r.code,{children:"fields"})," prop"]}),")"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"standardClassnames"})," (see ",(0,o.jsx)(r.a,{href:"./classnames",children:"CSS classes"}),")"]}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"The default components are also exported:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"ActionElement"})," - used for action buttons (to add rules, remove groups, etc.)"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"DragHandle"})," - used for the drag handle on rules and group headers"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"NotToggle"}),' - used for the "Invert this group" toggle switch']}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"Rule"})," - the default rule component"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"RuleGroup"})," - the default rule group component"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"ValueEditor"})," - the default ",(0,o.jsx)(r.code,{children:"valueEditor"})," component"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"ValueSelector"})," - used for drop-down lists (combinator, field, and operator selectors)"]}),"\n"]})]})}function x(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},71670:(e,r,n)=>{n.d(r,{Z:()=>l,a:()=>i});var o=n(27378);const s={},t=o.createContext(s);function i(e){const r=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(t.Provider,{value:r},e.children)}}}]);