"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[59312],{90488:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{Immer:()=>U,applyPatches:()=>ae,castDraft:()=>ue,castImmutable:()=>ce,createDraft:()=>ie,current:()=>H,enableMapSet:()=>ee,enablePatches:()=>Z,finishDraft:()=>le,freeze:()=>I,immerable:()=>l,isDraft:()=>p,isDraftable:()=>$,nothing:()=>i,original:()=>m,produce:()=>re,produceWithPatches:()=>ne,setAutoFreeze:()=>oe,setUseStrictShallowCopy:()=>se}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))!s.call(e,l)&&l!==a&&r(e,l,{get:()=>t[l],enumerable:!(i=n(t,l))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=Symbol.for("immer-nothing"),l=Symbol.for("immer-draftable"),u=Symbol.for("immer-state");function c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var f=Object.getPrototypeOf;function p(e){return!!e&&!!e[u]}function $(e){return!!e&&(h(e)||Array.isArray(e)||!!e[l]||!!e.constructor?.[l]||w(e)||O(e))}var d=Object.prototype.constructor.toString();function h(e){if(!e||"object"!=typeof e)return!1;let t=f(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===d}function m(e){return p(e)||c(15),e[u].t}function b(e,t){0===g(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,n)=>t(n,r,e)))}function g(e){let t=e[u];return t?t.o:Array.isArray(e)?1:w(e)?2:O(e)?3:0}function y(e,t){return 2===g(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function v(e,t){return 2===g(e)?e.get(t):e[t]}function N(e,t,r){let n=g(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function w(e){return e instanceof Map}function O(e){return e instanceof Set}function P(e){return e.e||e.t}function j(e,t){if(w(e))return new Map(e);if(O(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=h(e);if(!0===t||"class_only"===t&&!r){let t=Object.getOwnPropertyDescriptors(e);delete t[u];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){let o=r[n],s=t[o];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(f(e),t)}{let t=f(e);if(null!==t&&r)return{...e};let n=Object.create(t);return Object.assign(n,e)}}function I(e,t=!1){return W(e)||p(e)||!$(e)||(g(e)>1&&(e.set=e.add=e.clear=e.delete=S),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>I(t,!0)))),e}function S(){c(2)}function W(e){return Object.isFrozen(e)}var x,E={};function C(e){let t=E[e];return t||c(0),t}function D(e,t){E[e]||(E[e]=t)}function A(){return x}function M(e,t){t&&(C("Patches"),e.f=[],e.h=[],e.b=t)}function V(e){_(e),e.a.forEach(X),e.a=null}function _(e){e===x&&(x=e.i)}function B(e){return x=function(e,t){return{a:[],i:e,p:t,P:!0,d:0}}(x,e)}function X(e){let t=e[u];0===t.o||1===t.o?t.x():t.m=!0}function F(e,t){t.d=t.a.length;let r=t.a[0];return void 0!==e&&e!==r?(r[u].s&&(V(t),c(4)),$(e)&&(e=R(t,e),t.i||L(t,e)),t.f&&C("Patches").T(r[u].t,e,t.f,t.h)):e=R(t,r,[]),V(t),t.f&&t.b(t.f,t.h),e!==i?e:void 0}function R(e,t,r){if(W(t))return t;let n=t[u];if(!n)return b(t,((o,s)=>z(e,n,t,o,s,r))),t;if(n.n!==e)return t;if(!n.s)return L(e,n.t,!0),n.t;if(!n.c){n.c=!0,n.n.d--;let t=n.e,o=t,s=!1;3===n.o&&(o=new Set(t),t.clear(),s=!0),b(o,((o,a)=>z(e,n,t,o,a,r,s))),L(e,t,!1),r&&e.f&&C("Patches").g(n,r,e.f,e.h)}return n.e}function z(e,t,r,n,o,s,a){if(p(o)){let a=R(e,o,s&&t&&3!==t.o&&!y(t.r,n)?s.concat(n):void 0);if(N(r,n,a),!p(a))return;e.P=!1}else a&&r.add(o);if($(o)&&!W(o)){if(!e.p.y&&e.d<1)return;R(e,o),(!t||!t.n.i)&&"symbol"!=typeof n&&Object.prototype.propertyIsEnumerable.call(r,n)&&L(e,o)}}function L(e,t,r=!1){!e.i&&e.p.y&&e.P&&I(t,r)}var q={get(e,t){if(t===u)return e;let r=P(e);if(!y(r,t))return function(e,t,r){let n=Q(t,r);return n?"value"in n?n.value:n.get?.call(e.u):void 0}(e,r,t);let n=r[t];return e.c||!$(n)?n:n===J(e.t,t)?(K(e),e.e[t]=G(n,e)):n},has:(e,t)=>t in P(e),ownKeys:e=>Reflect.ownKeys(P(e)),set(e,t,r){let n=Q(P(e),t);if(n?.set)return n.set.call(e.u,r),!0;if(!e.s){let n=J(P(e),t),o=n?.[u];if(o&&o.t===r)return e.e[t]=r,e.r[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||y(e.t,t)))return!0;K(e),T(e)}return e.e[t]===r&&(void 0!==r||t in e.e)||Number.isNaN(r)&&Number.isNaN(e.e[t])||(e.e[t]=r,e.r[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==J(e.t,t)||t in e.t?(e.r[t]=!1,K(e),T(e)):delete e.r[t],e.e&&delete e.e[t],!0),getOwnPropertyDescriptor(e,t){let r=P(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.o||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty(){c(11)},getPrototypeOf:e=>f(e.t),setPrototypeOf(){c(12)}},k={};function J(e,t){let r=e[u];return(r?P(r):e)[t]}function Q(e,t){if(!(t in e))return;let r=f(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=f(r)}}function T(e){e.s||(e.s=!0,e.i&&T(e.i))}function K(e){e.e||(e.e=j(e.t,e.n.p.S))}b(q,((e,t)=>{k[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),k.deleteProperty=function(e,t){return k.set.call(this,e,t,void 0)},k.set=function(e,t,r){return q.set.call(this,e[0],t,r,e[0])};var U=class{constructor(e){this.y=!0,this.S=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let n=this;return function(e=r,...o){return n.produce(e,(e=>t.call(this,e,...o)))}}let n;if("function"!=typeof t&&c(6),void 0!==r&&"function"!=typeof r&&c(7),$(e)){let o=B(this),s=G(e,void 0),a=!0;try{n=t(s),a=!1}finally{a?V(o):_(o)}return M(o,r),F(n,o)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===i&&(n=void 0),this.y&&I(n,!0),r){let t=[],o=[];C("Patches").T(e,n,t,o),r(t,o)}return n}c(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){$(e)||c(8),p(e)&&(e=H(e));let t=B(this),r=G(e,void 0);return r[u].l=!0,_(t),r}finishDraft(e,t){let r=e&&e[u];(!r||!r.l)&&c(9);let{n:n}=r;return M(n,t),F(void 0,n)}setAutoFreeze(e){this.y=e}setUseStrictShallowCopy(e){this.S=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=C("Patches").A;return p(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function G(e,t){let r=w(e)?C("MapSet").I(e,t):O(e)?C("MapSet").D(e,t):function(e,t){let r=Array.isArray(e),n={o:r?1:0,n:t?t.n:A(),s:!1,c:!1,r:{},i:t,t:e,u:null,e:null,x:null,l:!1},o=n,s=q;r&&(o=[n],s=k);let{revoke:a,proxy:i}=Proxy.revocable(o,s);return n.u=i,n.x=a,i}(e,t);return(t?t.n:A()).a.push(r),r}function H(e){return p(e)||c(10),Y(e)}function Y(e){if(!$(e)||W(e))return e;let t,r=e[u];if(r){if(!r.s)return r.t;r.c=!0,t=j(e,r.n.p.S)}else t=j(e,!0);return b(t,((e,r)=>{N(t,e,Y(r))})),r&&(r.c=!1),t}function Z(){let e="replace",t="add",r="remove";function n(e){if(!$(e))return e;if(Array.isArray(e))return e.map(n);if(w(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,n(t)])));if(O(e))return new Set(Array.from(e).map(n));let t=Object.create(f(e));for(let r in e)t[r]=n(e[r]);return y(e,l)&&(t[l]=e[l]),t}function o(e){return p(e)?n(e):e}D("Patches",{A:function(o,s){return s.forEach((s=>{let{path:a,op:i}=s,l=o;for(let e=0;e<a.length-1;e++){let t=g(l),r=a[e];"string"!=typeof r&&"number"!=typeof r&&(r=""+r),(0===t||1===t)&&("__proto__"===r||"constructor"===r)&&c(19),"function"==typeof l&&"prototype"===r&&c(19),l=v(l,r),"object"!=typeof l&&c(18,a.join("/"))}let u=g(l),f=n(s.value),p=a[a.length-1];switch(i){case e:switch(u){case 2:return l.set(p,f);case 3:c(16);default:return l[p]=f}case t:switch(u){case 1:return"-"===p?l.push(f):l.splice(p,0,f);case 2:return l.set(p,f);case 3:return l.add(f);default:return l[p]=f}case r:switch(u){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(s.value);default:return delete l[p]}default:c(17)}})),o},g:function(n,s,a,i){switch(n.o){case 0:case 2:return function(n,s,a,i){let{t:l,e:u}=n;b(n.r,((n,c)=>{let f=v(l,n),p=v(u,n),$=c?y(l,n)?e:t:r;if(f===p&&$===e)return;let d=s.concat(n);a.push($===r?{op:$,path:d}:{op:$,path:d,value:p}),i.push($===t?{op:r,path:d}:$===r?{op:t,path:d,value:o(f)}:{op:e,path:d,value:o(f)})}))}(n,s,a,i);case 1:return function(n,s,a,i){let{t:l,r:u}=n,c=n.e;c.length<l.length&&([l,c]=[c,l],[a,i]=[i,a]);for(let t=0;t<l.length;t++)if(u[t]&&c[t]!==l[t]){let r=s.concat([t]);a.push({op:e,path:r,value:o(c[t])}),i.push({op:e,path:r,value:o(l[t])})}for(let e=l.length;e<c.length;e++){let r=s.concat([e]);a.push({op:t,path:r,value:o(c[e])})}for(let e=c.length-1;l.length<=e;--e){let t=s.concat([e]);i.push({op:r,path:t})}}(n,s,a,i);case 3:return function(e,n,o,s){let{t:a,e:i}=e,l=0;a.forEach((e=>{if(!i.has(e)){let a=n.concat([l]);o.push({op:r,path:a,value:e}),s.unshift({op:t,path:a,value:e})}l++})),l=0,i.forEach((e=>{if(!a.has(e)){let a=n.concat([l]);o.push({op:t,path:a,value:e}),s.unshift({op:r,path:a,value:e})}l++}))}(n,s,a,i)}},T:function(t,r,n,o){n.push({op:e,path:[],value:r===i?void 0:r}),o.push({op:e,path:[],value:t})}})}function ee(){class e extends Map{constructor(e,t){super(),this[u]={o:2,i:t,n:t?t.n:A(),s:!1,c:!1,e:void 0,r:void 0,t:e,u:this,l:!1,m:!1}}get size(){return P(this[u]).size}has(e){return P(this[u]).has(e)}set(e,r){let n=this[u];return o(n),(!P(n).has(e)||P(n).get(e)!==r)&&(t(n),T(n),n.r.set(e,!0),n.e.set(e,r),n.r.set(e,!0)),this}delete(e){if(!this.has(e))return!1;let r=this[u];return o(r),t(r),T(r),r.t.has(e)?r.r.set(e,!1):r.r.delete(e),r.e.delete(e),!0}clear(){let e=this[u];o(e),P(e).size&&(t(e),T(e),e.r=new Map,b(e.t,(t=>{e.r.set(t,!1)})),e.e.clear())}forEach(e,t){P(this[u]).forEach(((r,n,o)=>{e.call(t,this.get(n),n,this)}))}get(e){let r=this[u];o(r);let n=P(r).get(e);if(r.c||!$(n)||n!==r.t.get(e))return n;let s=G(n,r);return t(r),r.e.set(e,s),s}keys(){return P(this[u]).keys()}values(){let e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}}entries(){let e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let r=this.get(t.value);return{done:!1,value:[t.value,r]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.e||(e.r=new Map,e.e=new Map(e.t))}class r extends Set{constructor(e,t){super(),this[u]={o:3,i:t,n:t?t.n:A(),s:!1,c:!1,e:void 0,t:e,u:this,a:new Map,m:!1,l:!1}}get size(){return P(this[u]).size}has(e){let t=this[u];return o(t),t.e?!!(t.e.has(e)||t.a.has(e)&&t.e.has(t.a.get(e))):t.t.has(e)}add(e){let t=this[u];return o(t),this.has(e)||(n(t),T(t),t.e.add(e)),this}delete(e){if(!this.has(e))return!1;let t=this[u];return o(t),n(t),T(t),t.e.delete(e)||!!t.a.has(e)&&t.e.delete(t.a.get(e))}clear(){let e=this[u];o(e),P(e).size&&(n(e),T(e),e.e.clear())}values(){let e=this[u];return o(e),n(e),e.e.values()}entries(){let e=this[u];return o(e),n(e),e.e.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){let r=this.values(),n=r.next();for(;!n.done;)e.call(t,n.value,n.value,this),n=r.next()}}function n(e){e.e||(e.e=new Set,e.t.forEach((t=>{if($(t)){let r=G(t,e);e.a.set(t,r),e.e.add(r)}else e.e.add(t)})))}function o(e){e.m&&c(3,JSON.stringify(P(e)))}D("MapSet",{I:function(t,r){return new e(t,r)},D:function(e,t){return new r(e,t)}})}var te=new U,re=te.produce,ne=te.produceWithPatches.bind(te),oe=te.setAutoFreeze.bind(te),se=te.setUseStrictShallowCopy.bind(te),ae=te.applyPatches.bind(te),ie=te.createDraft.bind(te),le=te.finishDraft.bind(te);function ue(e){return e}function ce(e){return e}},67267:(e,t,r)=>{e.exports=r(90488)},34362:(e,t,r)=>{e.exports=r(31062)},31062:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{defaultOptions:()=>h,numericQuantity:()=>g,numericRegex:()=>l,numericRegexWithTrailingInvalid:()=>u,parseRomanNumerals:()=>m,romanNumeralRegex:()=>d,romanNumeralUnicodeRegex:()=>$,romanNumeralUnicodeToAsciiMap:()=>p,romanNumeralValues:()=>f,vulgarFractionToAsciiMap:()=>i,vulgarFractionsRegex:()=>c}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))!s.call(e,l)&&l!==a&&r(e,l,{get:()=>t[l],enumerable:!(i=n(t,l))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i={"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4","\u2150":"1/7","\u2151":"1/9","\u2152":"1/10","\u2153":"1/3","\u2154":"2/3","\u2155":"1/5","\u2156":"2/5","\u2157":"3/5","\u2158":"4/5","\u2159":"1/6","\u215a":"5/6","\u215b":"1/8","\u215c":"3/8","\u215d":"5/8","\u215e":"7/8","\u215f":"1/"},l=/^(?=-?\s*\.\d|-?\s*\d)(-)?\s*((?:\d(?:[\d,_]*\d)?)*)(([eE][+-]?\d(?:[\d,_]*\d)?)?|\.\d(?:[\d,_]*\d)?([eE][+-]?\d(?:[\d,_]*\d)?)?|(\s+\d(?:[\d,_]*\d)?\s*)?\s*\/\s*\d(?:[\d,_]*\d)?)?$/,u=new RegExp(l.source.replace(/\$$/,"(?:\\s*[^\\.\\d\\/].*)?")),c=new RegExp(`(${Object.keys(i).join("|")})`),f={MMM:3e3,MM:2e3,M:1e3,CM:900,DCCC:800,DCC:700,DC:600,D:500,CD:400,CCC:300,CC:200,C:100,XC:90,LXXX:80,LXX:70,LX:60,L:50,XL:40,XXX:30,XX:20,XII:12,XI:11,X:10,IX:9,VIII:8,VII:7,VI:6,V:5,IV:4,III:3,II:2,I:1},p={"\u2160":"I","\u2161":"II","\u2162":"III","\u2163":"IV","\u2164":"V","\u2165":"VI","\u2166":"VII","\u2167":"VIII","\u2168":"IX","\u2169":"X","\u216a":"XI","\u216b":"XII","\u216c":"L","\u216d":"C","\u216e":"D","\u216f":"M","\u2170":"I","\u2171":"II","\u2172":"III","\u2173":"IV","\u2174":"V","\u2175":"VI","\u2176":"VII","\u2177":"VIII","\u2178":"IX","\u2179":"X","\u217a":"XI","\u217b":"XII","\u217c":"L","\u217d":"C","\u217e":"D","\u217f":"M"},$=new RegExp(`(${Object.keys(p).join("|")})`,"gi"),d=/^(?=[MDCLXVI])(M{0,3})(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i,h={round:3,allowTrailingInvalid:!1,romanNumerals:!1},m=e=>{let t=`${e}`.replace($,((e,t)=>p[t])).toUpperCase(),r=d.exec(t);if(!r)return NaN;let[,n,o,s,a]=r;return(f[n]??0)+(f[o]??0)+(f[s]??0)+(f[a]??0)},b=/^\s*\//,g=(e,t=h)=>{if("number"==typeof e||"bigint"==typeof e)return e;let r=NaN,n=`${e}`.replace(c,((e,t)=>` ${i[t]}`)).replace("\u2044","/").trim();if(0===n.length)return NaN;let o={...h,...t},s=(o.allowTrailingInvalid?u:l).exec(n);if(!s)return o.romanNumerals?m(n):NaN;let[,a,f,p]=s,$=f.replace(/[,_]/g,""),d=null==p?void 0:p.replace(/[,_]/g,"");if(r=!$&&d&&d.startsWith(".")?0:parseInt($),!d)return a?-1*r:r;let g=!1===o.round?NaN:parseFloat(`1e${Math.floor(Math.max(0,o.round))}`);if(d.startsWith(".")||d.startsWith("e")||d.startsWith("E")){let e=parseFloat(`${r}${d}`);r=isNaN(g)?e:Math.round(e*g)/g}else if(b.test(d)){let e=parseInt($),t=parseInt(d.replace("/",""));r=isNaN(g)?e/t:Math.round(e*g/t)/g}else{let e=d.split("/"),[t,n]=e.map((e=>parseInt(e)));r+=isNaN(g)?t/n:Math.round(t*g/n)/g}return a?-1*r:r}},59312:(e,t,r)=>{function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){n(e,t,r[t])}))}return e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}var a,i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,f={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(f,{defaultCELValueProcessor:()=>we,defaultMongoDBValueProcessor:()=>Ne,defaultRuleProcessorCEL:()=>V,defaultRuleProcessorElasticSearch:()=>T,defaultRuleProcessorJSONata:()=>Y,defaultRuleProcessorJsonLogic:()=>te,defaultRuleProcessorMongoDB:()=>_,defaultRuleProcessorParameterized:()=>re,defaultRuleProcessorSQL:()=>ne,defaultRuleProcessorSpEL:()=>R,defaultSpELValueProcessor:()=>Oe,defaultValueProcessor:()=>ve,defaultValueProcessorByRule:()=>z,defaultValueProcessorCELByRule:()=>Pe,defaultValueProcessorMongoDBByRule:()=>je,defaultValueProcessorSpELByRule:()=>Ie,formatQuery:()=>be,jsonLogicAdditionalOperators:()=>I}),e.exports=(a=f,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of u(t))c.call(e,o)||o===r||i(e,o,{get:()=>t[o],enumerable:!(n=l(t,o))||n.enumerable});return e})(i({},"__esModule",{value:!0}),a));var p="~",$="~",d=e=>"string"==typeof e?e.trim():e,h=e=>Array.isArray(e)?e.map(d):"string"==typeof e?((e,t=",")=>"string"==typeof e?e.split(`\\${t}`).map((e=>e.split(t))).reduce(((e,r,n)=>0===n?r:[...e.slice(0,e.length-1),`${e[e.length-1]}${t}${r[0]}`,...r.slice(1)]),[]):[])(e,",").filter((e=>!/^\s*$/.test(e))).map((e=>e.trim())):"number"==typeof e?[e]:[],m=r(34362),b=(e,t={})=>{if(!t.parseNumbers||"bigint"==typeof e||"number"==typeof e)return e;if("native"===t.parseNumbers)return parseFloat(e);const r=(0,m.numericQuantity)(e,{allowTrailingInvalid:"enhanced"===t.parseNumbers,romanNumerals:!0,round:!1});return isNaN(r)?e:r},g=r(34362),y=new RegExp(g.numericRegex.source.replace(/^\^/,"^\\s*").replace(/\$$/,"\\s*$")),v=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,N=e=>v(e)&&"rules"in e&&Array.isArray(e.rules),w=e=>N(e)&&"string"==typeof e.combinator,O=e=>{switch(e.toLowerCase()){case"null":return"is null";case"notnull":return"is not null";case"notin":return"not in";case"notbetween":return"not between";case"contains":case"beginswith":case"endswith":return"like";case"doesnotcontain":case"doesnotbeginwith":case"doesnotendwith":return"not like";default:return e}},P={"=":"$eq","!=":"$ne","<":"$lt","<=":"$lte",">":"$gt",">=":"$gte",in:"$in",notIn:"$nin"},j={and:"&&",or:"||"},I={startsWith:(e,t)=>"string"==typeof e&&e.startsWith(t),endsWith:(e,t)=>"string"==typeof e&&e.endsWith(t)},S=e=>s(o({},e),{rules:e.rules.map((e=>{if("string"==typeof e)return e;if(N(e))return S(e);let{value:t}=e;return"string"==typeof t&&(t=b(t,{parseNumbers:!0})),s(o({},e),{value:t})}))}),W=e=>"string"==typeof e&&e.length>0||"number"==typeof e&&!isNaN(e)||"string"!=typeof e&&"number"!=typeof e,x=(e,t)=>t&&("number"==typeof e||"bigint"==typeof e||"string"==typeof e&&y.test(e)),E=e=>e.length>=3,C=(e=["",""])=>Array.isArray(e)?e:"string"==typeof e?[e,e]:null!=e?e:["",""],D=e=>null==e||""===e,A=e=>/^(does)?not/i.test(e),M=(e,t)=>"string"==typeof e&&t?e.replaceAll('"','\\"'):e,V=({field:e,operator:t,value:r,valueSource:n},{escapeQuotes:o,parseNumbers:s}={})=>{const a="field"===n,i=t.replace(/^=$/,"=="),l="number"==typeof r||"boolean"==typeof r||"bigint"==typeof r||x(r,s);switch(i){case"<":case"<=":case"==":case"!=":case">":case">=":return`${e} ${i} ${a||l?d(r):`"${M(r,o)}"`}`;case"contains":case"doesNotContain":return`${A(i)?"!":""}${e}.contains(${a?d(r):`"${M(r,o)}"`})`;case"beginsWith":case"doesNotBeginWith":return`${A(i)?"!":""}${e}.startsWith(${a?d(r):`"${M(r,o)}"`})`;case"endsWith":case"doesNotEndWith":return`${A(i)?"!":""}${e}.endsWith(${a?d(r):`"${M(r,o)}"`})`;case"null":return`${e} == null`;case"notNull":return`${e} != null`;case"in":case"notIn":{const t=A(i);return`${t?"!(":""}${e} in [${h(r).map((e=>a||x(e,s)?`${d(e)}`:`"${M(e,o)}"`)).join(", ")}]${t?")":""}`}case"between":case"notBetween":{const n=h(r);if(n.length>=2&&!D(n[0])&&!D(n[1])){const[r,s]=n,i=x(r,!0)?b(r,{parseNumbers:!0}):NaN,l=x(s,!0)?b(s,{parseNumbers:!0}):NaN;let u=isNaN(i)?a?`${r}`:`"${M(r,o)}"`:i,c=isNaN(l)?a?`${s}`:`"${M(s,o)}"`:l;if(u===i&&c===l&&l<i){c=i,u=l}return"between"===t?`(${e} >= ${u} && ${e} <= ${c})`:`(${e} < ${u} || ${e} > ${c})`}return""}}return""},_=({field:e,operator:t,value:r,valueSource:n},{parseNumbers:o}={})=>{const s="field"===n,a="number"==typeof r||"boolean"==typeof r||"bigint"==typeof r||x(r,o);if("="===t&&!s)return`{"${e}":${a?d(r):JSON.stringify(r)}}`;switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":{const n=P[t];return s?`{"$expr":{"${n}":["$${e}","$${r}"]}}`:`{"${e}":{"${n}":${a?d(r):JSON.stringify(r)}}}`}case"contains":return s?`{"$where":"this.${e}.includes(this.${r})"}`:`{"${e}":{"$regex":${JSON.stringify(r)}}}`;case"beginsWith":return s?`{"$where":"this.${e}.startsWith(this.${r})"}`:`{"${e}":{"$regex":${JSON.stringify(`^${r}`)}}}`;case"endsWith":return s?`{"$where":"this.${e}.endsWith(this.${r})"}`:`{"${e}":{"$regex":${JSON.stringify(`${r}$`)}}}`;case"doesNotContain":return s?`{"$where":"!this.${e}.includes(this.${r})"}`:`{"${e}":{"$not":{"$regex":${JSON.stringify(r)}}}}`;case"doesNotBeginWith":return s?`{"$where":"!this.${e}.startsWith(this.${r})"}`:`{"${e}":{"$not":{"$regex":${JSON.stringify(`^${r}`)}}}}`;case"doesNotEndWith":return s?`{"$where":"!this.${e}.endsWith(this.${r})"}`:`{"${e}":{"$not":{"$regex":${JSON.stringify(`${r}$`)}}}}`;case"null":return`{"${e}":null}`;case"notNull":return`{"${e}":{"$ne":null}}`;case"in":case"notIn":{const n=h(r);return s?`{"$where":"${"notIn"===t?"!":""}[${n.map((e=>`this.${e}`)).join(",")}].includes(this.${e})"}`:`{"${e}":{"${P[t]}":[${n.map((e=>x(e,o)?`${d(e)}`:JSON.stringify(e))).join(",")}]}}`}case"between":case"notBetween":{const n=h(r);if(n.length>=2&&W(n[0])&&W(n[1])){const[r,o]=n,a=x(r,!0)?b(r,{parseNumbers:!0}):NaN,i=x(o,!0)?b(o,{parseNumbers:!0}):NaN,l=s||!isNaN(a)?`${r}`:`${JSON.stringify(r)}`,u=s||!isNaN(i)?`${o}`:`${JSON.stringify(o)}`;return"between"===t?s?`{"$and":[{"$expr":{"$gte":["$${e}","$${l}"]}},{"$expr":{"$lte":["$${e}","$${u}"]}}]}`:`{"${e}":{"$gte":${l},"$lte":${u}}}`:s?`{"$or":[{"$expr":{"$lt":["$${e}","$${l}"]}},{"$expr":{"$gt":["$${e}","$${u}"]}}]}`:`{"$or":[{"${e}":{"$lt":${l}}},{"${e}":{"$gt":${u}}}]}`}return""}}return""},B=e=>/^(does)?not/i.test(e),X=(e,t)=>t?`!(${e})`:`${e}`,F=(e,t)=>"string"==typeof e&&t?e.replaceAll("'","\\'"):e,R=({field:e,operator:t,value:r,valueSource:n},{escapeQuotes:o,parseNumbers:s}={})=>{const a="field"===n,i=t.replace(/^=$/,"=="),l="number"==typeof r||"boolean"==typeof r||"bigint"==typeof r||x(r,s);switch(i){case"<":case"<=":case"==":case"!=":case">":case">=":return`${e} ${i} ${a||l?d(r):`'${F(r,o)}'`}`;case"contains":case"doesNotContain":return X(`${e} matches ${a||l?d(r):`'${F(r,o)}'`}`,B(i));case"beginsWith":case"doesNotBeginWith":{const t=a?`'^'.concat(${d(r)})`:`'${"string"==typeof r&&!r.startsWith("^")||l?"^":""}${F(r,o)}'`;return X(`${e} matches ${t}`,B(i))}case"endsWith":case"doesNotEndWith":{const t=a?`${d(r)}.concat('$')`:`'${F(r,o)}${"string"==typeof r&&!r.endsWith("$")||l?"$":""}'`;return X(`${e} matches ${t}`,B(i))}case"null":return`${e} == null`;case"notNull":return`${e} != null`;case"in":case"notIn":{const t=B(i)?"!":"",n=h(r);return n.length>0?`${t}(${n.map((t=>`${e} == ${a||x(t,s)?`${d(t)}`:`'${F(t,o)}'`}`)).join(" or ")})`:""}case"between":case"notBetween":{const n=h(r);if(n.length>=2&&!D(n[0])&&!D(n[1])){const[r,s]=n,i=x(r,!0)?b(r,{parseNumbers:!0}):NaN,l=x(s,!0)?b(s,{parseNumbers:!0}):NaN;let u=isNaN(i)?a?`${r}`:`'${F(r,o)}'`:i,c=isNaN(l)?a?`${s}`:`'${F(s,o)}'`:l;if(u===i&&c===l&&l<i){c=i,u=l}return"between"===t?`(${e} >= ${u} and ${e} <= ${c})`:`(${e} < ${u} or ${e} > ${c})`}return""}}return""},z=({operator:e,value:t,valueSource:r},{escapeQuotes:n,parseNumbers:o,quoteFieldNamesWith:s,quoteValuesWith:a}={})=>{const i="field"===r,[l,u]=C(s),c=e.toLowerCase(),f=a||"'",p=e=>((e,t,r)=>r&&"string"==typeof e?e.replaceAll(`${t}`,`${t}${t}`):e)(e,f,n),$=e=>`${f}${p(e)}${f}`,m=e=>`${l}${e}${u}`;switch(c){case"null":case"notnull":return"";case"in":case"notin":{const e=h(t);return e.length>0?`(${e.map((e=>i?m(e):x(e,o)?`${d(e)}`:`${$(e)}`)).join(", ")})`:""}case"between":case"notbetween":{const e=h(t);if(e.length>=2&&W(e[0])&&W(e[1])){const[t,r]=e;return i?`${m(t)} and ${m(r)}`:x(t,o)&&x(r,o)?`${d(t)} and ${d(r)}`:`${$(t)} and ${$(r)}`}return""}case"contains":case"doesnotcontain":return i?`${f}%${f} || ${m(t)} || ${f}%${f}`:`${f}%${p(t)}%${f}`;case"beginswith":case"doesnotbeginwith":return i?`${m(t)} || ${f}%${f}`:`${f}${p(t)}%${f}`;case"endswith":case"doesnotendwith":return i?`${f}%${f} || ${m(t)}`:`${f}%${p(t)}${f}`}return"boolean"==typeof t?t?"TRUE":"FALSE":i?m(t):x(t,o)?`${d(t)}`:`${$(t)}`},L={"<":"lt","<=":"lte",">":"gt",">=":"gte"},q=(e,t)=>/^(does)?not/i.test(e)?{bool:{must_not:t}}:t,k=e=>null==e?void 0:e.replace(/('|\\)/g,"\\$1"),J={beginsWith:"startsWith",doesNotContain:"contains",doesNotBeginWith:"startsWith",doesNotEndWith:"endsWith"},Q=(e,t)=>"boolean"==typeof e?e:x(e,t)?b(e,{parseNumbers:t}):e,T=({field:e,operator:t,value:r,valueSource:n},{parseNumbers:o}={})=>{if("field"===n){if(h(r).some((e=>"string"!=typeof e)))return!1;const n=k(e);switch(t){case"=":case"!=":case">":case">=":case"<":case"<=":{const e="="===t?"==":t,o=k(r);return!!o&&{bool:{filter:{script:{script:`doc['${n}'] ${e} doc['${o}']`}}}}}case"in":case"notIn":{const e=h(r);if(e.length>0){const r=e.map((e=>({bool:{filter:{script:{script:`doc['${n}'] == doc['${e}']`}}}})));return{bool:"in"===t?{should:r}:{must_not:r}}}return!1}case"between":case"notBetween":{const e=h(r);if(e.length>=2&&e[0]&&e[1]){const r=`doc['${n}'] >= doc['${e[0]}'] && doc['${n}'] <= doc['${e[1]}']`;return{bool:{filter:{script:{script:"notBetween"===t?`!(${r})`:r}}}}}return!1}case"contains":case"doesNotContain":case"beginsWith":case"doesNotBeginWith":case"endsWith":case"doesNotEndWith":{const e=k(r);if(!e)return!1;return{bool:{filter:{script:{script:((e,t,r)=>{var n;const o=`doc['${e}'].${null!==(n=J[t])&&void 0!==n?n:t}(doc['${r}'])`;return t.startsWith("d")?`!${o}`:o})(n,t,e)}}}}}}}switch(t){case"<":case"<=":case">":case">=":return{range:{[e]:{[L[t]]:Q(r,o)}}};case"=":return{term:{[e]:Q(r,o)}};case"!=":return{bool:{must_not:{term:{[e]:Q(r,o)}}}};case"null":return{bool:{must_not:{exists:{field:e}}}};case"notNull":return{exists:{field:e}};case"in":case"notIn":{const n=h(r).map((e=>Q(e,o)));if(n.length>0){const r=n.map((t=>({term:{[e]:Q(t,o)}})));return{bool:"in"===t?{should:r}:{must_not:r}}}return!1}case"between":case"notBetween":{const n=h(r);if(n.length>=2&&W(n[0])&&W(n[1])){let[r,o]=n;if(x(r,!0)&&x(o,!0)){const e=b(r,{parseNumbers:!0}),t=b(o,{parseNumbers:!0});if(t<e){o=e,r=t}else r=e,o=t}return q(t,{range:{[e]:{gte:r,lte:o}}})}return!1}case"contains":case"doesNotContain":return q(t,{regexp:{[e]:{value:r}}});case"beginsWith":case"doesNotBeginWith":return q(t,{regexp:{[e]:{value:`${r}.*`}}});case"endsWith":case"doesNotEndWith":return q(t,{regexp:{[e]:{value:`.*${r}`}}})}return!1},K=e=>/^(does)?not/i.test(e),U=(e,t)=>`"${"string"==typeof e&&t?e.replaceAll('"','\\"'):e}"`,G=(e,t)=>t?`$not(${e})`:`${e}`,H=e=>`${e}`.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Y=({field:e,operator:t,value:r,valueSource:n},{escapeQuotes:o,parseNumbers:s=!0,quoteFieldNamesWith:a=["",""]}={})=>{const i="field"===n,l="number"==typeof r||"boolean"==typeof r||"bigint"==typeof r||x(r,s),[u,c]=C(a),f=e=>`${u}${e}${c}`;switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":return`${f(e)} ${t} ${i?f(d(r)):l?d(r):U(r,o)}`;case"contains":case"doesNotContain":return G(`$contains(${f(e)}, ${i?f(d(r)):U(r,o)})`,K(t));case"beginsWith":case"doesNotBeginWith":return G(i?`$substring(${f(e)}, 0, $length(${f(d(r))})) = ${f(d(r))}`:`$contains(${f(e)}, /^${H(r)}/)`,K(t));case"endsWith":case"doesNotEndWith":return G(i?`$substring(${f(e)}, $length(${f(e)}) - $length(${f(d(r))})) = ${f(d(r))}`:`$contains(${f(e)}, /${H(r)}$/)`,K(t));case"null":return`${f(e)} = null`;case"notNull":return`${f(e)} != null`;case"in":case"notIn":{const n=h(r);return G(`${f(e)} in [${n.map((e=>i?`${f(d(e))}`:x(e,s)?`${d(e)}`:U(e,o))).join(", ")}]`,K(t))}case"between":case"notBetween":{const n=h(r);if(n.length>=2&&!D(n[0])&&!D(n[1])){const[r,a]=n,l=x(r,!0)?b(r,{parseNumbers:!0}):NaN,u=x(a,!0)?b(a,{parseNumbers:!0}):NaN;let c=isNaN(l)?i?`${r}`:r:l,p=isNaN(u)?i?`${a}`:a:u;if(c===l&&p===u&&u<l){p=l,c=u}const $=x(r,s)&&x(a,s),d=`${f(e)} >= ${i?f(r):$?c:U(c,o)} and ${f(e)} <= ${i?f(a):$?p:U(p,o)}`;return"between"===t?`(${d})`:G(d,!0)}return""}}return""},Z=e=>e.replace(/^(=)$/,"$1=").replace(/^notNull$/i,"!=").replace(/^null$/i,"=="),ee=(e,t)=>/^(does)?not/i.test(e)?{"!":t}:t,te=({field:e,operator:t,value:r,valueSource:n},{parseNumbers:o}={})=>{const s="field"===n,a={var:e},i=e=>s?{var:`${e}`}:x(e,o)?b(e,{parseNumbers:o}):e;switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":return{[Z(t)]:[a,i(r)]};case"null":case"notNull":return{[("notNull"===t?"!":"=")+"="]:[a,null]};case"in":case"notIn":{const e=h(r).map(i);return ee(t,{in:[a,e]})}case"between":case"notBetween":{const e=h(r);if(e.length>=2&&W(e[0])&&W(e[1])){let[r,n]=e;if(!s&&x(r,!0)&&x(n,!0)){const e=b(r,{parseNumbers:!0}),t=b(n,{parseNumbers:!0});if(t<e){n=e,r=t}else r=e,n=t}else s&&(r={var:r},n={var:n});return ee(t,{"<=":[r,a,n]})}return!1}case"contains":case"doesNotContain":{const e={in:[i(r),a]};return ee(t,e)}case"beginsWith":case"doesNotBeginWith":{const e={startsWith:[a,i(r)]};return ee(t,e)}case"endsWith":case"doesNotEndWith":{const e={endsWith:[a,i(r)]};return ee(t,e)}}return!1},re=(e,t,r)=>{const{fieldData:n,format:o,getNextNamedParam:s,parseNumbers:a,paramPrefix:i,paramsKeepPrefix:l,numberedParams:u,quoteFieldNamesWith:c=["",""],valueProcessor:f=z}=null!=t?t:{},{processedParams:p=[]}=null!=r?r:{},$="parameterized"===o,d=[],m={},g=e=>$?{sql:e,params:d}:{sql:e,params:m},y=f(e,{parseNumbers:a,quoteFieldNamesWith:c,fieldData:n,format:o}),v=O(e.operator),N=v.toLowerCase();if(!("in"!==N&&"not in"!==N&&"between"!==N&&"not between"!==N||y))return g("");if("is null"===N||"is not null"===N)return g(`${c[0]}${e.field}${c[1]} ${v}`);if("field"===e.valueSource)return g(`${c[0]}${e.field}${c[1]} ${v} ${y}`.trim());if("in"===N||"not in"===N){const t=h(e.value);if($)return t.forEach((e=>d.push(x(e,a)?b(e,{parseNumbers:a}):e))),g(`${c[0]}${e.field}${c[1]} ${v} (${t.map(((e,r)=>u?`${i}${p.length+1+t.length-(t.length-r)}`:"?")).join(", ")})`);const r=[];return t.forEach((t=>{const n=s(e.field);r.push(`${i}${n}`),m[`${l?i:""}${n}`]=x(t,a)?b(t,{parseNumbers:a}):t})),g(`${c[0]}${e.field}${c[1]} ${v} (${r.join(", ")})`)}if("between"===N||"not between"===N){const t=h(e.value),[r,n]=t.slice(0,2).map((e=>x(e,a)?b(e,{parseNumbers:a}):e));if($)return d.push(r),d.push(n),g(`${c[0]}${e.field}${c[1]} ${v} ${u?`${i}${p.length+1}`:"?"} and ${u?`${i}${p.length+2}`:"?"}`);const o=s(e.field),f=s(e.field);return m[`${l?i:""}${o}`]=r,m[`${l?i:""}${f}`]=n,g(`${c[0]}${e.field}${c[1]} ${v} ${i}${o} and ${i}${f}`)}let w=e.value;"string"==typeof e.value&&(w=x(e.value,a)?b(e.value,{parseNumbers:a}):/^'.*'$/g.test(y)?y.replace(/(^'|'$)/g,""):y);let P="";return $?d.push(w):(P=s(e.field),m[`${l?i:""}${P}`]=w),g(`${c[0]}${e.field}${c[1]} ${v} ${$?u?`${i}${p.length+1}`:"?":`${i}${P}`}`.trim())},ne=(e,t)=>{const{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:o=["",""],quoteValuesWith:s="'",valueProcessor:a=z}=null!=t?t:{},i=a(e,{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:o,quoteValuesWith:s}),l=O(e.operator),u=l.toLowerCase();if(("in"===u||"not in"===u||"between"===u||"not between"===u)&&!i)return"";const[c,f]=C(o);return`${c}${e.field}${f} ${l} ${i}`.trim()},oe=e=>N(e)?se(e):e,se=e=>{const t=[],r=e=>t.push(oe(e));let n=0;for(let o=0;o<e.rules.length;o+=2)if(1===e.rules.length)r(e.rules[0]);else if("and"===e.rules[o+1]){n=o;let r=1;for(;"and"===e.rules[n+r];)o+=2,r+=2;t.push({rules:e.rules.slice(n,o+1).map(oe)}),o-=2}else"or"===e.rules[o+1]&&(0===o||o===e.rules.length-3?(0!==o&&"or"!==e.rules[o-1]||r(e.rules[o]),r(e.rules[o+1]),o===e.rules.length-3&&r(e.rules[o+2])):("and"===e.rules[o-1]||r(e.rules[o]),r(e.rules[o+1])));return 1===t.length&&"object"==typeof t[0]&&N(t[0])?o({},e,t[0]):s(o({},e),{rules:t})},ae=e=>{if(w(e))return e;const t=se(e),r=t.rules.map((e=>"string"!=typeof e&&N(e)?ae(e):e)),n=r.length<2?"and":r[1],a=r.filter((e=>"string"!=typeof e));return s(o({},t),{combinator:n,rules:a})},ie=e=>v(e)&&"boolean"==typeof e.valid,le=(e,t,r)=>{if("boolean"==typeof t)return t;if(ie(t))return t.valid;if("function"==typeof r&&!N(e)){const t=r(e);if("boolean"==typeof t)return t;if(ie(t))return t.valid}return!0},ue=r(67267),ce=e=>v(e)&&"name"in e&&"string"==typeof e.name,fe=e=>v(e)&&"value"in e&&"string"==typeof e.value;function pe(e,t){return(0,ue.produce)((e=>{const r={};let n=!!t;if(ce(e)&&!fe(e)?(r.value=e.name,n=!0):!ce(e)&&fe(e)&&(r.name=e.value,n=!0),n)return Object.assign({},t,e,r)}))(e)}var $e=e=>Array.isArray(e)&&e.length>0&&v(e[0])&&"options"in e[0],de=e=>Array.isArray(e)&&e.length>0&&v(e[0])&&"options"in e[0]&&v(e[0].options[0])&&("name"in e[0].options[0]||"value"in e[0].options[0]),he=(e,t)=>($e(e)?e.flatMap((e=>e.options)):e).find((e=>e.name===t)),me=e=>(e=>{const t=new Set,r=[];return e.forEach((e=>{var n,o;t.has(null!==(n=e.value)&&void 0!==n?n:e.name)||(t.add(null!==(o=e.value)&&void 0!==o?o:e.name),r.push(e))})),e.length===r.length?e:r})($e(e)?e.flatMap((e=>e.options)):e);function be(e,t={}){let r="json",n=z,o=null,s=["",""],a=()=>!0,i=[],l={},u="",c=":",f=!1,d=!1,h=!1,m=p,b=$,g="'";if("string"==typeof t)r=t.toLowerCase(),"mongodb"===r?o=_:"parameterized"===r||"parameterized_named"===r?o=re:"cel"===r?o=V:"spel"===r?o=R:"jsonlogic"===r?o=te:"elasticsearch"===r?o=T:"jsonata"===r&&(o=Y);else{var y;r=(null!==(y=t.format)&&void 0!==y?y:"json").toLowerCase();const{valueProcessor:e=null,ruleProcessor:l=null}=t;var O,P,I,W,x,D,A;"function"==typeof l&&(o=l),n="function"==typeof e?(t,r)=>E(e)?e(t.field,t.operator,t.value,t.valueSource):e(t,r):"mongodb"===r?null!=o?o:_:"cel"===r?null!=o?o:V:"spel"===r?null!=o?o:R:"jsonlogic"===r?null!=o?o:te:"elasticsearch"===r?null!=o?o:T:"jsonata"===r?null!=o?o:Y:z,s=C(t.quoteFieldNamesWith),a=null!==(O=t.validator)&&void 0!==O?O:()=>!0,M=null!==(P=t.fields)&&void 0!==P?P:[],i=Array.isArray(M)?(0,ue.produce)((e=>{if(de(e))for(const t of e)t.options.forEach(((e,r)=>t.options[r]=pe(e,B)));else e.forEach(((t,r)=>e[r]=pe(t,B)))}))(M):[],u=null!==(I=t.fallbackExpression)&&void 0!==I?I:"",c=null!==(W=t.paramPrefix)&&void 0!==W?W:":",f=!!t.paramsKeepPrefix,d=!!t.numberedParams,h=!!t.parseNumbers,m=null!==(x=t.placeholderFieldName)&&void 0!==x?x:p,b=null!==(D=t.placeholderOperatorName)&&void 0!==D?D:$,g=null!==(A=t.quoteValuesWith)&&void 0!==A?A:"'"}var M,B;if(u||(u="mongodb"===r?'"$and":[{"$expr":true}]':"cel"===r||"spel"===r?"1 == 1":"(1 = 1)"),"json"===r||"json_without_ids"===r){const t=h?S(e):e;return"json"===r?JSON.stringify(t,null,2):JSON.stringify(t,((e,t)=>"id"===e||"path"===e?void 0:t))}if("function"==typeof a){const t=a(e);if("boolean"==typeof t){if(!1===t)return"parameterized"===r?{sql:u,params:[]}:"parameterized_named"===r?{sql:u,params:{}}:"mongodb"===r?`{${u}}`:"jsonlogic"!==r&&("elasticsearch"===r?{}:u)}else l=t}const X={},F=me(i);F.forEach((e=>{var t;"function"==typeof e.validator&&(X[null!==(t=e.value)&&void 0!==t?t:e.name]=e.validator)}));const L=e=>{let t,r;if(e.id&&(t=l[e.id]),F.length){const t=F.filter((t=>t.name===e.field));if(t.length){const e=t[0];"function"==typeof e.validator&&(r=e.validator)}}return[t,r]};if("sql"===r){const t=(e,a)=>{var c;if(!le(e,l[null!==(c=e.id)&&void 0!==c?c:""]))return a?u:"";const f=e.rules.map((a=>{if("string"==typeof a)return a;if(N(a))return t(a,1===e.rules.length);const[l,u]=L(a);if(!le(a,l,u)||a.field===m||a.operator===b)return"";var c;const f="value"===(null!==(c=a.valueSource)&&void 0!==c?c:"value"),p=he(i,a.field);return"function"==typeof o?o(a,{parseNumbers:h,escapeQuotes:f,quoteFieldNamesWith:s,fieldData:p,format:r,quoteValuesWith:g}):ne(a,{parseNumbers:h,escapeQuotes:f,valueProcessor:n,quoteFieldNamesWith:s,fieldData:p,format:r,quoteValuesWith:g})}));return 0===f.length?u:`${e.not?"NOT ":""}(${f.filter(Boolean).join(w(e)?` ${e.combinator} `:" ")})`};return t(e,!0)}if("parameterized"===r||"parameterized_named"===r){const t="parameterized"===r,p=[],$={},g=new Map,y=e=>{g.has(e)||g.set(e,new Set);const t=`${e}_${g.get(e).size+1}`;return g.get(e).add(t),t},O=e=>{const[t,l]=L(e);if(!le(e,t,l)||e.field===m||e.operator===b)return"";const N=he(i,e.field),w=Object.fromEntries(Array.from(g.entries()).map((([e,t])=>[e,Array.from(t)]))),O=("function"==typeof o?o:re)(e,{getNextNamedParam:y,fieldParamNames:w,parseNumbers:h,quoteFieldNamesWith:s,fieldData:N,format:r,paramPrefix:c,paramsKeepPrefix:f,numberedParams:d,fallbackExpression:u,valueProcessor:n,fields:i,placeholderFieldName:m,placeholderOperatorName:b,validator:a},{processedParams:p});if(!v(O))return"";const{sql:P,params:j}=O;return"string"==typeof P&&P?("parameterized"===r&&Array.isArray(j)?p.push(...j):"parameterized_named"===r&&v(j)&&(Object.assign($,j),Object.keys(j).forEach((t=>{var r;return null===(r=g.get(e.field))||void 0===r?void 0:r.add(t)}))),P):""},P=(e,t)=>{var r;if(!le(e,l[null!==(r=e.id)&&void 0!==r?r:""]))return t?u:"";const n=e.rules.map((t=>"string"==typeof t?t:N(t)?P(t,1===e.rules.length):O(t)));return 0===n.length?u:`${e.not?"NOT ":""}(${n.filter(Boolean).join(w(e)?` ${e.combinator} `:" ")})`};return t?{sql:P(e,!0),params:p}:{sql:P(e,!0),params:$}}if("mongodb"===r){const t=(e,s)=>{var a;if(!le(e,l[null!==(a=e.id)&&void 0!==a?a:""]))return s?u:"";const c=`"$${e.combinator.toLowerCase()}"`;let f=!1;const p=e.rules.map((e=>{if(N(e)){const r=t(e);return r?(f=!0,/^\{.+\}$/.test(r)?r:`{${r}}`):""}const[s,a]=L(e);if(!le(e,s,a)||e.field===m||e.operator===b)return"";const l=he(i,e.field);return(null!=o?o:n)(e,{parseNumbers:h,fieldData:l,format:r})})).filter(Boolean);return p.length>0?1!==p.length||f?`${c}:[${p.join(",")}]`:p[0]:u},s=w(e)?e:ae(e),a=t(s,!0);return/^\{.+\}$/.test(a)?a:`{${a}}`}if("cel"===r){const t=(e,s)=>{var a;if(!le(e,l[null!==(a=e.id)&&void 0!==a?a:""]))return s?u:"";const c=e.rules.map((e=>{if("string"==typeof e)return j[e];if(N(e))return t(e);const[s,a]=L(e);if(!le(e,s,a)||e.field===m||e.operator===b)return"";const l=he(i,e.field);var u;return(null!=o?o:n)(e,{parseNumbers:h,escapeQuotes:"value"===(null!==(u=e.valueSource)&&void 0!==u?u:"value"),fieldData:l,format:r})})).filter(Boolean).join(w(e)?` ${j[e.combinator]} `:" "),[f,p]=e.not||!s?[(e.not?"!":"")+"(",")"]:["",""];return c?`${f}${c}${p}`:u};return t(e,!0)}if("spel"===r){const t=(e,s)=>{var a;if(!le(e,l[null!==(a=e.id)&&void 0!==a?a:""]))return s?u:"";const c=e.rules.map((e=>{if("string"==typeof e)return e;if(N(e))return t(e);const[s,a]=L(e);if(!le(e,s,a)||e.field===m||e.operator===b)return"";const l=he(i,e.field);var u;return(null!=o?o:n)(e,{parseNumbers:h,escapeQuotes:"value"===(null!==(u=e.valueSource)&&void 0!==u?u:"value"),fieldData:l,format:r})})).filter(Boolean).join(w(e)?` ${e.combinator} `:" "),[f,p]=e.not||!s?[(e.not?"!":"")+"(",")"]:["",""];return c?`${f}${c}${p}`:u};return t(e,!0)}if("jsonata"===r){const t=(e,a)=>{var c;if(!le(e,l[null!==(c=e.id)&&void 0!==c?c:""]))return a?u:"";const f=e.rules.map((e=>{if("string"==typeof e)return e;if(N(e))return t(e);const[a,l]=L(e);if(!le(e,a,l)||e.field===m||e.operator===b)return"";const u=he(i,e.field);var c;return(null!=o?o:n)(e,{parseNumbers:h,escapeQuotes:"value"===(null!==(c=e.valueSource)&&void 0!==c?c:"value"),fieldData:u,format:r,quoteFieldNamesWith:s})})).filter(Boolean).join(w(e)?` ${e.combinator} `:" "),[p,$]=e.not||!a?[(e.not?"$not":"")+"(",")"]:["",""];return f?`${p}${f}${$}`:u};return t(e,!0)}if("jsonlogic"===r){const t=w(e)?e:ae(e),s=(e,t)=>{var a;if(!le(e,l[null!==(a=e.id)&&void 0!==a?a:""]))return!1;const u=e.rules.map((e=>{if(N(e))return s(e);const[t,a]=L(e);if(!le(e,t,a)||e.field===m||e.operator===b)return!1;const l=he(i,e.field);return(null!=o?o:n)(e,{parseNumbers:h,fieldData:l,format:r})})).filter(Boolean);if(0===u.length)return!1;const c={[e.combinator]:u};return e.not?{"!":c}:c};return s(t,!0)}if("elasticsearch"===r){const t=w(e)?e:ae(e),s=e=>{var t;if(!le(e,l[null!==(t=e.id)&&void 0!==t?t:""]))return!1;const a=e.rules.map((e=>{if(N(e))return s(e);const[t,a]=L(e);if(!le(e,t,a)||e.field===m||e.operator===b)return!1;const l=he(i,e.field);return(null!=o?o:n)(e,{parseNumbers:h,fieldData:l,format:r})})).filter(Boolean);return 0!==a.length&&{bool:e.not?{must_not:"or"===e.combinator?{bool:{should:a}}:a}:{["or"===e.combinator?"should":"must"]:a}}},a=s(t);return!1===a?{}:a}return""}var ge={default:z,mongodb:_,cel:V,spel:R},ye=e=>(t,r,n,o)=>ge[e]({field:t,operator:r,value:n,valueSource:o},{parseNumbers:!1}),ve=ye("default"),Ne=ye("mongodb"),we=ye("cel"),Oe=ye("spel"),Pe=V,je=_,Ie=R}}]);