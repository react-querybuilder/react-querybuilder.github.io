"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6416],{66416:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{defaultCELValueProcessor:()=>U,defaultMongoDBValueProcessor:()=>K,defaultRuleProcessorCEL:()=>P,defaultRuleProcessorJsonLogic:()=>A,defaultRuleProcessorMongoDB:()=>L,defaultRuleProcessorSQL:()=>Q,defaultRuleProcessorSpEL:()=>E,defaultSpELValueProcessor:()=>G,defaultValueProcessor:()=>T,defaultValueProcessorByRule:()=>O,defaultValueProcessorCELByRule:()=>H,defaultValueProcessorMongoDBByRule:()=>X,defaultValueProcessorSpELByRule:()=>Y,formatQuery:()=>D,jsonLogicAdditionalOperators:()=>m}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))s.call(e,l)||l===a||r(e,l,{get:()=>t[l],enumerable:!(i=n(t,l))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i="~",l="~",u=e=>"string"==typeof e?e.trim():e,$=e=>{return Array.isArray(e)?e.map(u):"string"==typeof e?(t=e,r=",",void 0===r&&(r=","),"string"==typeof t?t.split(`\\${r}`).map((e=>e.split(r))).reduce(((e,t,n)=>0===n?t:[...e.slice(0,e.length-1),`${e[e.length-1]}${r}${t[0]}`,...t.slice(1)]),[]):[]).filter((e=>!/^\s*$/.test(e))).map((e=>e.trim())):"number"==typeof e?[e]:[];var t,r},c=e=>!!e&&"object"==typeof e&&"rules"in e&&Array.isArray(e.rules),f=e=>c(e)&&!!e.combinator,p=/^\s*[+-]?(\d+|\d*\.\d+|\d+\.\d*)([Ee][+-]?\d+)?\s*$/,d=e=>{switch(e.toLowerCase()){case"null":return"is null";case"notnull":return"is not null";case"notin":return"not in";case"notbetween":return"not between";case"contains":case"beginswith":case"endswith":return"like";case"doesnotcontain":case"doesnotbeginwith":case"doesnotendwith":return"not like";default:return e}},h={"=":"$eq","!=":"$ne","<":"$lt","<=":"$lte",">":"$gt",">=":"$gte",in:"$in",notIn:"$nin"},g={and:"&&",or:"||"},m={startsWith:(e,t)=>"string"==typeof e&&e.startsWith(t),endsWith:(e,t)=>"string"==typeof e&&e.endsWith(t)},b=e=>({...e,rules:e.rules.map((e=>{if("string"==typeof e)return e;if(c(e))return b(e);let{value:t}=e;return"string"==typeof t&&(t=((e,t)=>{let{parseNumbers:r}=t;return"bigint"==typeof e||"number"==typeof e?e:r&&("native"===r||p.test(e))?parseFloat(e):e})(t,{parseNumbers:!0})),{...e,value:t}}))}),y=e=>"string"==typeof e&&e.length>0||"number"==typeof e&&!isNaN(e)||"string"!=typeof e&&"number"!=typeof e,N=(e,t)=>t&&("number"==typeof e||"bigint"==typeof e||"string"==typeof e&&p.test(e)),v=e=>e.length>=3,w=function(e){return void 0===e&&(e=["",""]),Array.isArray(e)?e:"string"==typeof e?[e,e]:e??["",""]},W=e=>/^(does)?not/i.test(e),j=(e,t)=>"string"==typeof e&&t?e.replaceAll('"','\\"'):e,P=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{escapeQuotes:a,parseNumbers:i}=void 0===t?{}:t;const l="field"===s,c=n.replace(/^=$/,"=="),f="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||N(o,i);switch(c){case"<":case"<=":case"==":case"!=":case">":case">=":return`${r} ${c} ${l||f?u(o):`"${j(o,a)}"`}`;case"contains":case"doesNotContain":return`${W(c)?"!":""}${r}.contains(${l?u(o):`"${j(o,a)}"`})`;case"beginsWith":case"doesNotBeginWith":return`${W(c)?"!":""}${r}.startsWith(${l?u(o):`"${j(o,a)}"`})`;case"endsWith":case"doesNotEndWith":return`${W(c)?"!":""}${r}.endsWith(${l?u(o):`"${j(o,a)}"`})`;case"null":return`${r} == null`;case"notNull":return`${r} != null`;case"in":case"notIn":{const e=W(c),t=$(o);return t.length>0?`${e?"!(":""}${r} in [${t.map((e=>l||N(e,i)?`${u(e)}`:`"${j(e,a)}"`)).join(", ")}]${e?")":""}`:""}case"between":case"notBetween":{const e=$(o);if(e.length>=2&&e[0]&&e[1]){const[t,o]=e,s=N(t,!0)?parseFloat(t):NaN,i=N(o,!0)?parseFloat(o):NaN;let u=isNaN(s)?l?`${t}`:`"${j(t,a)}"`:s,$=isNaN(i)?l?`${o}`:`"${j(o,a)}"`:i;if(u===s&&$===i&&i<s){$=s,u=i}return"between"===n?`(${r} >= ${u} && ${r} <= ${$})`:`(${r} < ${u} || ${r} > ${$})`}return""}}return""},F=e=>"string"!=typeof e?e:e.replaceAll("\\","\\\\").replaceAll('"','\\"'),L=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{parseNumbers:a}=void 0===t?{}:t;const i="field"===s,l="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||N(o,a);if("="===n&&!i)return`{"${r}":${l?u(o):`"${F(o)}"`}}`;switch(n){case"<":case"<=":case"=":case"!=":case">":case">=":{const e=h[n];return i?`{"$expr":{"${e}":["$${r}","$${o}"]}}`:`{"${r}":{"${e}":${l?u(o):`"${F(o)}"`}}}`}case"contains":return i?`{"$where":"this.${r}.includes(this.${o})"}`:`{"${r}":{"$regex":"${F(o)}"}}`;case"beginsWith":return i?`{"$where":"this.${r}.startsWith(this.${o})"}`:`{"${r}":{"$regex":"^${F(o)}"}}`;case"endsWith":return i?`{"$where":"this.${r}.endsWith(this.${o})"}`:`{"${r}":{"$regex":"${F(o)}$"}}`;case"doesNotContain":return i?`{"$where":"!this.${r}.includes(this.${o})"}`:`{"${r}":{"$not":{"$regex":"${F(o)}"}}}`;case"doesNotBeginWith":return i?`{"$where":"!this.${r}.startsWith(this.${o})"}`:`{"${r}":{"$not":{"$regex":"^${F(o)}"}}}`;case"doesNotEndWith":return i?`{"$where":"!this.${r}.endsWith(this.${o})"}`:`{"${r}":{"$not":{"$regex":"${F(o)}$"}}}`;case"null":return`{"${r}":null}`;case"notNull":return`{"${r}":{"$ne":null}}`;case"in":case"notIn":{const e=$(o);return e.length>0?i?`{"$where":"${"notIn"===n?"!":""}[${e.map((e=>`this.${e}`)).join(",")}].includes(this.${r})"}`:`{"${r}":{"${h[n]}":[${e.map((e=>N(e,a)?`${u(e)}`:`"${F(e)}"`)).join(",")}]}}`:""}case"between":case"notBetween":{const e=$(o);if(e.length>=2&&y(e[0])&&y(e[1])){const[t,o]=e,s=N(t,!0)?parseFloat(t):NaN,a=N(o,!0)?parseFloat(o):NaN,l=i||!isNaN(s)?`${t}`:`"${F(t)}"`,u=i||!isNaN(a)?`${o}`:`"${F(o)}"`;return"between"===n?i?`{"$and":[{"$expr":{"$gte":["$${r}","$${l}"]}},{"$expr":{"$lte":["$${r}","$${u}"]}}]}`:`{"${r}":{"$gte":${l},"$lte":${u}}}`:i?`{"$or":[{"$expr":{"$lt":["$${r}","$${l}"]}},{"$expr":{"$gt":["$${r}","$${u}"]}}]}`:`{"$or":[{"${r}":{"$lt":${l}}},{"${r}":{"$gt":${u}}}]}`}return""}}return""},C=e=>/^(does)?not/i.test(e),B=(e,t)=>t?`!(${e})`:`${e}`,S=(e,t)=>"string"==typeof e&&t?e.replaceAll("'","\\'"):e,E=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{escapeQuotes:a,parseNumbers:i}=void 0===t?{}:t;const l="field"===s,c=n.replace(/^=$/,"=="),f="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||N(o,i);switch(c){case"<":case"<=":case"==":case"!=":case">":case">=":return`${r} ${c} ${l||f?u(o):`'${S(o,a)}'`}`;case"contains":case"doesNotContain":return B(`${r} matches ${l||f?u(o):`'${S(o,a)}'`}`,C(c));case"beginsWith":case"doesNotBeginWith":{const e=l?`'^'.concat(${u(o)})`:`'${"string"==typeof o&&!o.startsWith("^")||f?"^":""}${S(o,a)}'`;return B(`${r} matches ${e}`,C(c))}case"endsWith":case"doesNotEndWith":{const e=l?`${u(o)}.concat('$')`:`'${S(o,a)}${"string"==typeof o&&!o.endsWith("$")||f?"$":""}'`;return B(`${r} matches ${e}`,C(c))}case"null":return`${r} == null`;case"notNull":return`${r} != null`;case"in":case"notIn":{const e=C(c)?"!":"",t=$(o);return t.length>0?`${e}(${t.map((e=>`${r} == ${l||N(e,i)?`${u(e)}`:`'${S(e,a)}'`}`)).join(" or ")})`:""}case"between":case"notBetween":{const e=$(o);if(e.length>=2&&e[0]&&e[1]){const[t,o]=e,s=N(t,!0)?parseFloat(t):NaN,i=N(o,!0)?parseFloat(o):NaN;let u=isNaN(s)?l?`${t}`:`'${S(t,a)}'`:s,$=isNaN(i)?l?`${o}`:`'${S(o,a)}'`:i;if(u===s&&$===i&&i<s){$=s,u=i}return"between"===n?`(${r} >= ${u} and ${r} <= ${$})`:`(${r} < ${u} or ${r} > ${$})`}return""}}return""},x=(e,t)=>t&&"string"==typeof e?e.replaceAll("'","''"):e,O=function(e,t){let{operator:r,value:n,valueSource:o}=e,{escapeQuotes:s,parseNumbers:a,quoteFieldNamesWith:i}=void 0===t?{}:t;const l="field"===o,[c,f]=w(i),p=r.toLowerCase(),d=e=>`${c}${e}${f}`;switch(p){case"null":case"notnull":return"";case"in":case"notin":{const e=$(n);return e.length>0?`(${e.map((e=>l?d(e):N(e,a)?`${u(e)}`:`'${x(e,s)}'`)).join(", ")})`:""}case"between":case"notbetween":{const e=$(n);if(e.length>=2&&y(e[0])&&y(e[1])){const[t,r]=e;return l?`${d(t)} and ${d(r)}`:N(t,a)&&N(r,a)?`${u(t)} and ${u(r)}`:`'${x(t,s)}' and '${x(r,s)}'`}return""}case"contains":case"doesnotcontain":return l?`'%' || ${d(n)} || '%'`:`'%${x(n,s)}%'`;case"beginswith":case"doesnotbeginwith":return l?`${d(n)} || '%'`:`'${x(n,s)}%'`;case"endswith":case"doesnotendwith":return l?`'%' || ${d(n)}`:`'%${x(n,s)}'`}return"boolean"==typeof n?n?"TRUE":"FALSE":l?d(n):N(n,a)?`${u(n)}`:`'${x(n,s)}'`},q=(e,t)=>/^(does)?not/i.test(e)?{"!":t}:t,A=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{parseNumbers:a}=void 0===t?{}:t;const i="field"===s,l={var:r},u=e=>i?{var:`${e}`}:N(e,a)?parseFloat(e):e;switch(n){case"<":case"<=":case"=":case"!=":case">":case">=":return{[(c=n,c.replace(/^(=)$/,"$1=").replace(/^notNull$/i,"!=").replace(/^null$/i,"=="))]:[l,u(o)]};case"null":case"notNull":return{[("notNull"===n?"!":"=")+"="]:[l,null]};case"in":case"notIn":{const e=$(o).map(u);if(e.length>0){return q(n,{in:[l,e]})}return!1}case"between":case"notBetween":{const e=$(o);if(e.length>=2&&y(e[0])&&y(e[1])){let[t,r]=e;if(!i&&N(t,!0)&&N(r,!0)){const e=parseFloat(t),n=parseFloat(r);if(n<e){r=e,t=n}else t=e,r=n}else i&&(t={var:t},r={var:r});return q(n,{"<=":[t,l,r]})}return!1}case"contains":case"doesNotContain":{const e={in:[u(o),l]};return q(n,e)}case"beginsWith":case"doesNotBeginWith":{const e={startsWith:[l,u(o)]};return q(n,e)}case"endsWith":case"doesNotEndWith":{const e={endsWith:[l,u(o)]};return q(n,e)}}var c;return!1},Q=function(e,t){let{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:o=["",""],valueProcessor:s=O}=void 0===t?{}:t;const a=s(e,{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:o}),i=d(e.operator),l=i.toLowerCase();if(("in"===l||"not in"===l||"between"===l||"not between"===l)&&!a)return"";const[u,$]=w(o);return`${u}${e.field}${$} ${i} ${a}`.trim()},R=e=>c(e)?V(e):e,V=e=>{const t=[],r=e=>t.push(R(e));let n=0;for(let o=0;o<e.rules.length;o+=2)if(1===e.rules.length)r(e.rules[0]);else if("and"===e.rules[o+1]){n=o;let r=1;for(;"and"===e.rules[n+r];)o+=2,r+=2;t.push({rules:e.rules.slice(n,o+1).map(R)}),o-=2}else"or"===e.rules[o+1]&&(0===o||o===e.rules.length-3?(0!==o&&"or"!==e.rules[o-1]||r(e.rules[o]),r(e.rules[o+1]),o===e.rules.length-3&&r(e.rules[o+2])):("and"===e.rules[o-1]||r(e.rules[o]),r(e.rules[o+1])));return 1===t.length&&"object"==typeof t[0]&&c(t[0])?{...e,...t[0]}:{...e,rules:t}},k=e=>{const t=V(e),r=t.rules.map((e=>"string"!=typeof e&&c(e)?k(e):e)),n=r.length<2?"and":r[1],o=r.filter((e=>"string"!=typeof e));return{...t,combinator:n,rules:o}},_=e=>{return null!==(t=e)&&"object"==typeof t&&Object.getPrototypeOf(t)===Object.prototype&&"boolean"==typeof e.valid;var t},I=(e,t,r)=>{if("boolean"==typeof t)return t;if(_(t))return t.valid;if("function"==typeof r&&!c(e)){const t=r(e);if("boolean"==typeof t)return t;if(_(t))return t.valid}return!0},z=e=>{const t=new Set,r=[];return e.forEach((e=>{t.has(e.name)||(t.add(e.name),r.push(e))})),r};function D(e,t){void 0===t&&(t={});let r="json",n=O,o=null,s=["",""],a=()=>!0,u=[],p={},h="",m=":",y=!1,W=!1,j=i,F=l;if("string"==typeof t)r=t.toLowerCase(),"mongodb"===r?o=L:"cel"===r?o=P:"spel"===r?o=E:"jsonlogic"===r&&(o=A);else{r=(t.format??"json").toLowerCase();const{valueProcessor:e=null,ruleProcessor:$=null}=t;"function"==typeof $&&(o=$),n="function"==typeof e?(t,r)=>v(e)?e(t.field,t.operator,t.value,t.valueSource):e(t,r):"mongodb"===r?o??L:"cel"===r?o??P:"spel"===r?o??E:"jsonlogic"===r?o??A:O,s=w(t.quoteFieldNamesWith),a=t.validator??(()=>!0),u=t.fields??[],h=t.fallbackExpression??"",m=t.paramPrefix??":",y=!!t.paramsKeepPrefix,W=!!t.parseNumbers,j=t.placeholderFieldName??i,F=t.placeholderOperatorName??l}if(h||(h="mongodb"===r?'"$and":[{"$expr":true}]':"cel"===r||"spel"===r?"1 == 1":"(1 = 1)"),"json"===r||"json_without_ids"===r){const t=W?b(e):e;return"json"===r?JSON.stringify(t,null,2):JSON.stringify(t,["rules","field","value","operator","combinator","not","valueSource"])}if("function"==typeof a){const t=a(e);if("boolean"==typeof t){if(!1===t)return"parameterized"===r?{sql:h,params:[]}:"parameterized_named"===r?{sql:h,params:{}}:"mongodb"===r?`{${h}}`:"jsonlogic"!==r&&h}else p=t}const C={};z(u).forEach((e=>{"function"==typeof e.validator&&(C[e.name]=e.validator)}));const B=e=>{let t,r;if(e.id&&(t=p[e.id]),u.length){const t=u.filter((t=>t.name===e.field));if(t.length){const e=t[0];"function"==typeof e.validator&&(r=e.validator)}}return[t,r]};if("sql"===r){const t=(e,r)=>{if(!I(e,p[e.id??""]))return r?h:"";const a=e.rules.map((e=>{if("string"==typeof e)return e;if(c(e))return t(e);const[r,a]=B(e);if(!I(e,r,a)||e.field===j||e.operator===F)return"";const i="value"===(e.valueSource??"value");return"function"==typeof o?o(e,{parseNumbers:W,escapeQuotes:i,quoteFieldNamesWith:s}):Q(e,{parseNumbers:W,escapeQuotes:i,valueProcessor:n,quoteFieldNamesWith:s})}));return 0===a.length?h:`${e.not?"NOT ":""}(${a.filter(Boolean).join(f(e)?` ${e.combinator} `:" ")})`};return t(e,!0)}if("parameterized"===r||"parameterized_named"===r){const t="parameterized"===r,o=[],a={},i={},l=e=>(i[e]=(i[e]??0)+1,`${e}_${i[e]}`),u=e=>{const[r,i]=B(e);if(!I(e,r,i)||e.field===j||e.operator===F)return"";const u=n(e,{parseNumbers:W,quoteFieldNamesWith:s}),c=d(e.operator);if("value"===(e.valueSource??"value")){if("is null"===c.toLowerCase()||"is not null"===c.toLowerCase())return`${s[0]}${e.field}${s[1]} ${c}`;if("in"===c.toLowerCase()||"not in"===c.toLowerCase()){if(u){const r=$(e.value);if(t)return r.forEach((e=>o.push(N(e,W)?parseFloat(e):e))),`${s[0]}${e.field}${s[1]} ${c} (${r.map((()=>"?")).join(", ")})`;const n=[];return r.forEach((t=>{const r=l(e.field);n.push(`${m}${r}`),a[`${y?m:""}${r}`]=N(t,W)?parseFloat(t):t})),`${s[0]}${e.field}${s[1]} ${c} (${n.join(", ")})`}return""}if("between"===c.toLowerCase()||"not between"===c.toLowerCase()){if(u){const r=$(e.value),[n,i]=r.slice(0,2).map((e=>N(e,W)?parseFloat(e):e));if(t)return o.push(n),o.push(i),`${s[0]}${e.field}${s[1]} ${c} ? and ?`;const u=l(e.field),f=l(e.field);return a[`${y?m:""}${u}`]=n,a[`${y?m:""}${f}`]=i,`${s[0]}${e.field}${s[1]} ${c} ${m}${u} and ${m}${f}`}return""}let r=e.value;"string"==typeof e.value&&(r=N(e.value,W)?parseFloat(e.value):/^'.*'$/g.test(u)?u.replace(/(^'|'$)/g,""):u);let n="";return t?o.push(r):(n=l(e.field),a[`${y?m:""}${n}`]=r),`${s[0]}${e.field}${s[1]} ${c} ${t?"?":`${m}${n}`}`.trim()}{const e=c.toLowerCase();if(("in"===e||"not in"===e||"between"===e||"not between"===e)&&!u)return""}return`${s[0]}${e.field}${s[1]} ${c} ${u}`.trim()},g=(e,t)=>{if(!I(e,p[e.id??""]))return t?h:"";const r=e.rules.map((e=>"string"==typeof e?e:c(e)?g(e):u(e)));return 0===r.length?h:`${e.not?"NOT ":""}(${r.filter(Boolean).join(f(e)?` ${e.combinator} `:" ")})`};return t?{sql:g(e,!0),params:o}:{sql:g(e,!0),params:a}}if("mongodb"===r){const t=(e,r)=>{if(!I(e,p[e.id??""]))return r?h:"";const s=`"$${e.combinator.toLowerCase()}"`;let a=!1;const i=e.rules.map((e=>{if(c(e)){const r=t(e);return r?(a=!0,/^\{.+\}$/.test(r)?r:`{${r}}`):""}const[r,s]=B(e);return I(e,r,s)&&e.field!==j&&e.operator!==F?(o??n)(e,{parseNumbers:W}):""})).filter(Boolean);return i.length>0?1!==i.length||a?`${s}:[${i.join(",")}]`:i[0]:h},r=f(e)?e:k(e),s=t(r,!0);return/^\{.+\}$/.test(s)?s:`{${s}}`}if("cel"===r){const t=(e,r)=>{if(!I(e,p[e.id??""]))return r?h:"";const s=e.rules.map((e=>{if("string"==typeof e)return g[e];if(c(e))return t(e);const[r,s]=B(e);return I(e,r,s)&&e.field!==j&&e.operator!==F?(o??n)(e,{parseNumbers:W,escapeQuotes:"value"===(e.valueSource??"value")}):""})).filter(Boolean).join(f(e)?` ${g[e.combinator]} `:" "),[a,i]=e.not||!r?[(e.not?"!":"")+"(",")"]:["",""];return s?`${a}${s}${i}`:h};return t(e,!0)}if("spel"===r){const t=(e,r)=>{if(!I(e,p[e.id??""]))return r?h:"";const s=e.rules.map((e=>{if("string"==typeof e)return e;if(c(e))return t(e);const[r,s]=B(e);return I(e,r,s)&&e.field!==j&&e.operator!==F?(o??n)(e,{parseNumbers:W,escapeQuotes:"value"===(e.valueSource??"value")}):""})).filter(Boolean).join(f(e)?` ${e.combinator} `:" "),[a,i]=e.not||!r?[(e.not?"!":"")+"(",")"]:["",""];return s?`${a}${s}${i}`:h};return t(e,!0)}if("jsonlogic"===r){const t=f(e)?e:k(e),r=e=>{if(!I(e,p[e.id??""]))return!1;const t=e.rules.map((e=>{if(c(e))return r(e);const[t,s]=B(e);return!(!I(e,t,s)||e.field===j||e.operator===F)&&(o??n)(e,{parseNumbers:W})})).filter(Boolean);if(0===t.length)return!1;const s=1===t.length?t[0]:{[e.combinator]:t};return e.not?{"!":s}:s};return r(t)}return""}var M={default:O,mongodb:L,cel:P,spel:E},J=e=>(t,r,n,o)=>M[e]({field:t,operator:r,value:n,valueSource:o},{parseNumbers:!1}),T=J("default"),K=J("mongodb"),U=J("cel"),G=J("spel"),H=P,X=L,Y=E}}]);