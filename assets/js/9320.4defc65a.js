/*! For license information please see 9320.4defc65a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9320],{9320:(e,r,n)=>{n.d(r,{yC:()=>f});var o=n(67294),t=n(61236);const l=e=>{const[r,t]=(0,o.useState)(null!=e?e:null);return(0,o.useEffect)((()=>{let e=!1;return r||(async()=>{const[r,o]=await Promise.all([Promise.all([n.e(4891),n.e(5413)]).then(n.bind(n,15413)).catch((()=>null)),n.e(2250).then(n.bind(n,42250)).catch((()=>null))]);e||r&&o&&t((()=>({...r,...o})))})(),()=>{e=!0}}),[]),r},a=({type:e,path:r,disabled:n,moveRule:o,useDrag:l})=>l((()=>({type:e,item:{path:r},canDrag:!n,collect:e=>{var r;return{isDragging:!n&&e.isDragging(),dragMonitorId:null!=(r=e.getHandlerId())?r:""}},end(e,r){const n=r.getDropResult();if(!n)return;const l=(0,t.Il)(n.path),a=n.path[n.path.length-1],d="ruleGroup"===n.type?[...n.path,0]:"inlineCombinator"===n.type?[...l,a]:[...l,a+1];o(e.path,d,"copy"===n.dropEffect)}})),[n,r]),{rule:d,ruleGroup:u,combinatorSelector:s}=t.PN,i=(0,o.createContext)({baseControls:{rule:d,ruleGroup:u,combinatorSelector:s}});i.displayName="QueryBuilderDndContext";var p,c={exports:{}},g={};c.exports=function(){if(p)return g;p=1;var e=o,r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,l=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,n,o){var d,u={},s=null,i=null;for(d in void 0!==o&&(s=""+o),void 0!==n.key&&(s=""+n.key),void 0!==n.ref&&(i=n.ref),n)t.call(n,d)&&!a.hasOwnProperty(d)&&(u[d]=n[d]);if(e&&e.defaultProps)for(d in n=e.defaultProps)void 0===u[d]&&(u[d]=n[d]);return{$$typeof:r,type:e,key:s,ref:i,props:u,_owner:l.current}}return g.Fragment=n,g.jsx=d,g.jsxs=d,g}();const D=c.exports.jsx,h=({component:e,path:r,independentCombinators:n,...l})=>{const{useDrop:a}=(0,o.useContext)(i),{dropRef:d,dropMonitorId:u,isOver:s}=(({path:e,independentCombinators:r,useDrop:n})=>{const l=(0,o.useRef)(null),[{isOver:a,dropMonitorId:d},u]=n((()=>({accept:["rule","ruleGroup"],canDrop:n=>{const o=(0,t.Il)(e),l=(0,t.Il)(n.path),a=e[e.length-1],d=n.path[n.path.length-1];return!((0,t.jg)(n.path,e)||(0,t.H4)(n.path,e)||(0,t.H4)(o,l)&&a-1===d||r&&(0,t.H4)(o,l)&&a===d-1)},collect:e=>{var r,n;return{isOver:e.canDrop()&&e.isOver(),dropMonitorId:null!=(r=e.getHandlerId())?r:"",dropEffect:(null!=(n=e.getDropResult())?n:{}).dropEffect}},drop:()=>({type:"inlineCombinator",path:e})})),[e,r]);return u(l),{dropRef:l,dropMonitorId:d,isOver:a}})({path:r,independentCombinators:n,useDrop:a}),p=s?t.q0.dndOver:"",c=(0,t.c)(p,t.q0.betweenRules);return D("div",{ref:d,className:c,"data-dropmonitorid":u,"data-testid":t.O3.inlineCombinator,children:D(e,{...l,path:r,testID:t.O3.combinators})},"dnd")};h.displayName="InlineCombinatorDnD";const b=e=>{const r=(0,o.useContext)(i),{useDrag:n,useDrop:l}=r,{path:d,disabled:u,parentDisabled:s,actions:{moveRule:p},schema:{independentCombinators:c}}=e,g=(({path:e,disabled:r,independentCombinators:n,moveRule:l,useDrag:d,useDrop:u})=>{const s=(0,o.useRef)(null),i=(0,o.useRef)(null),[{isDragging:p,dragMonitorId:c},g,D]=a({type:"rule",path:e,disabled:r,independentCombinators:n,moveRule:l,useDrag:d}),[{isOver:h,dropMonitorId:b,dropEffect:m},f]=u((()=>({accept:["rule","ruleGroup"],canDrop:o=>{if(r)return!1;const l=(0,t.Il)(e),a=(0,t.Il)(o.path),d=e[e.length-1],u=o.path[o.path.length-1];return!((0,t.jg)(o.path,e)||(0,t.H4)(l,a)&&(d===u||d===u-1||n&&d===u-2))},collect:e=>{var r,n;return{isOver:e.canDrop()&&e.isOver(),dropMonitorId:null!=(r=e.getHandlerId())?r:"",dropEffect:(null!=(n=e.getDropResult())?n:{}).dropEffect}},drop:()=>({type:"rule",path:e})})),[r,n,l,e]);return g(i),D(f(s)),{isDragging:p,dragMonitorId:c,isOver:h,dropMonitorId:b,dndRef:s,dragRef:i,dropEffect:m}})({path:d,disabled:!!s||!!u,independentCombinators:c,moveRule:p,useDrag:n,useDrop:l}),{rule:h}=r.baseControls;return D(i.Provider,{value:r,children:D(h,{...e,...g})})};b.displayName="RuleDnD";const m=e=>{const r=(0,o.useContext)(i),{useDrag:n,useDrop:l}=r,{path:d,disabled:u,parentDisabled:s,actions:{moveRule:p},schema:{independentCombinators:c}}=e,g=(({disabled:e,path:r,independentCombinators:n,moveRule:l,useDrag:d,useDrop:u})=>{const s=(0,o.useRef)(null),i=(0,o.useRef)(null),p=(0,o.useRef)(null),[{isDragging:c,dragMonitorId:g},D,h]=a({type:"ruleGroup",path:r,disabled:e,independentCombinators:n,moveRule:l,useDrag:d}),[{isOver:b,dropMonitorId:m,dropEffect:f},v]=u((()=>({accept:["rule","ruleGroup"],canDrop:n=>{if(e)return!1;const o=(0,t.Il)(n.path),l=n.path[n.path.length-1];return!((0,t.jg)(n.path,r)||(0,t.H4)(r,o)&&0===l||(0,t.H4)(r,n.path))},collect:e=>{var r,n;return{isOver:e.canDrop()&&e.isOver(),dropMonitorId:null!=(r=e.getHandlerId())?r:"",dropEffect:(null!=(n=e.getDropResult())?n:{}).dropEffect}},drop:(e,n)=>{var o;return null!=(o=n.getDropResult())?o:{type:"ruleGroup",path:r}}})),[e,l,r]);return r.length>0&&(D(i),h(s)),v(p),{isDragging:c,dragMonitorId:g,isOver:b,dropMonitorId:m,previewRef:s,dragRef:i,dropRef:p,dropEffect:f}})({disabled:!!s||!!u,path:d,independentCombinators:c,moveRule:p,useDrag:n,useDrop:l}),{ruleGroup:h}=r.baseControls;return D(h,{...e,...g})};m.displayName="RuleGroupDnD";const f=e=>{const{controlClassnames:r,controlElements:n,debugMode:o,enableDragAndDrop:a,enableMountQueryChange:d,translations:u}=e,s=(0,t.Qr)({controlClassnames:r,controlElements:n,debugMode:o,enableDragAndDrop:null==a||a,enableMountQueryChange:d,translations:null!=u?u:{}}),{enableDragAndDrop:i}=s,p=l(e.dnd),c=i&&p?"dnd":"no-dnd";if(!i||!p)return D(t.TF.Provider,{value:{...s,enableDragAndDrop:!1,debugMode:o},children:e.children},c);const{DndProvider:g,HTML5Backend:h}=p;return D(g,{backend:h,debugMode:o,children:D(t.TF.Provider,{value:{...s,enableDragAndDrop:i,debugMode:o},children:D(v,{dnd:p,children:e.children})},c)},c)};f.displayName="QueryBuilderDnD";const v=e=>{var r,n,a,d,u,s,p,c,g,f,v,C;const R=(0,o.useContext)(t.TF),y=(0,o.useContext)(i),I=l(e.dnd),E=(0,t.HP)(!1,e.debugMode,R.debugMode),M=(0,t.HP)(!0,e.enableDragAndDrop,R.enableDragAndDrop),O=M&&I?"dnd":"no-dnd";if(!M||!I)return D(t.TF.Provider,{value:{...R,enableDragAndDrop:!1,debugMode:E},children:e.children},O);const{DndContext:P,useDrag:_,useDrop:G}=I,x={rule:null!=(d=null!=(a=null==(r=e.controlElements)?void 0:r.rule)?a:null==(n=R.controlElements)?void 0:n.rule)?d:y.baseControls.rule,ruleGroup:null!=(c=null!=(p=null==(u=e.controlElements)?void 0:u.ruleGroup)?p:null==(s=R.controlElements)?void 0:s.ruleGroup)?c:y.baseControls.ruleGroup,combinatorSelector:null!=(C=null!=(v=null==(g=e.controlElements)?void 0:g.combinatorSelector)?v:null==(f=R.controlElements)?void 0:f.combinatorSelector)?C:y.baseControls.combinatorSelector},H={...R,controlElements:{...R.controlElements,ruleGroup:m,rule:b,inlineCombinator:h}};return D(P.Consumer,{children:()=>D(t.TF.Provider,{value:H,children:D(i.Provider,{value:{useDrag:_,useDrop:G,baseControls:x},children:e.children})},O)},O)};v.displayName="QueryBuilderDndWithoutProvider"}}]);