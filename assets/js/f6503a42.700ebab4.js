"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4310],{13520:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>d,toc:()=>c});var t=r(24246),i=r(71670);const a={title:"Migrating to v5",hide_table_of_contents:!0},o=void 0,d={id:"migrate",title:"Migrating to v5",description:"The transition from v4 to v5 should be fairly seemless. Core functionality has not been affected much since v4, other than a few bug fixes (see changelog). Significant code changes will only be necessary if you set the enableDragAndDrop prop to true and/or you use one of the compatibility packages.",source:"@site/versioned_docs/version-5/migrate.mdx",sourceDirName:".",slug:"/migrate",permalink:"/docs/5/migrate",draft:!1,unlisted:!1,editUrl:"https://github.com/react-querybuilder/react-querybuilder/edit/main/website/versioned_docs/version-5/migrate.mdx",tags:[],version:"5",frontMatter:{title:"Migrating to v5",hide_table_of_contents:!0},sidebar:"mySidebar",previous:{title:"UMD build",permalink:"/docs/5/umd"}},s={},c=[{value:"Drag-and-drop",id:"drag-and-drop",level:3},{value:"Compatibility packages",id:"compatibility-packages",level:3}];function l(e){const n=Object.assign({p:"p",a:"a",code:"code",h3:"h3",pre:"pre",em:"em",admonition:"admonition"},(0,i.a)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The transition from v4 to v5 should be fairly seemless. Core functionality has not been affected much since v4, other than a few bug fixes (see ",(0,t.jsx)(n.a,{href:"https://github.com/react-querybuilder/react-querybuilder/blob/main/CHANGELOG.md",children:"changelog"}),"). Significant code changes will only be necessary if you set the ",(0,t.jsxs)(n.a,{href:"#drag-and-drop",children:[(0,t.jsx)(n.code,{children:"enableDragAndDrop"})," prop to ",(0,t.jsx)(n.code,{children:"true"})]})," and/or you use one of the ",(0,t.jsx)(n.a,{href:"#compatibility-packages",children:"compatibility packages"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"drag-and-drop",children:"Drag-and-drop"}),"\n",(0,t.jsx)(n.p,{children:"To enable drag-and-drop in v5, you'll need to make two changes."}),"\n",(0,t.jsxs)(n.p,{children:["First, install ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/react-dnd",children:(0,t.jsx)(n.code,{children:"react-dnd"})})," and ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/react-dnd-html5-backend",children:(0,t.jsx)(n.code,{children:"react-dnd-html5-backend"})})," explicitly, along with the companion package ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/@react-querybuilder/dnd",children:(0,t.jsx)(n.code,{children:"@react-querybuilder/dnd"})}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"npm i react-dnd react-dnd-html5-backend @react-querybuilder/dnd\n# OR yarn add / pnpm add / bun add\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Second, instead of setting the ",(0,t.jsx)(n.code,{children:"enableDragAndDrop"})," prop explicitly, wrap your ",(0,t.jsx)(n.code,{children:"<QueryBuilder />"})," element in ",(0,t.jsx)(n.code,{children:"<QueryBuilderDnD />"})," from ",(0,t.jsx)(n.code,{children:"@react-querybuilder/dnd"}),". This will automatically set ",(0,t.jsx)(n.code,{children:"enableDragAndDrop={true}"})," on ",(0,t.jsx)(n.code,{children:"<QueryBuilder />"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",children:" export function App() {\n   return (\n-    <QueryBuilder enableDragAndDrop />\n+    <QueryBuilderDnD>\n+      <QueryBuilder />\n+    </QueryBuilderDnD>\n   );\n }\n"})}),"\n",(0,t.jsxs)(n.p,{children:["We also ",(0,t.jsx)(n.em,{children:"strongly"})," recommended passing all the exports from ",(0,t.jsx)(n.code,{children:"react-dnd"})," and ",(0,t.jsx)(n.code,{children:"react-dnd-html5-backend"})," in to ",(0,t.jsx)(n.code,{children:"<QueryBuilderDnD />"})," through its ",(0,t.jsx)(n.code,{children:"dnd"})," prop. Otherwise the query builder will initially be rendered with drag-and-drop disabled."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { QueryBuilderDnD } from '@react-querybuilder/dnd';\n// highlight-start\nimport * as ReactDnD from 'react-dnd';\nimport * as ReactDndHtml5Backend from 'react-dnd-html5-backend';\n// highlight-end\nimport { QueryBuilder } from 'react-querybuilder';\n\nexport function App() {\n  return (\n    {/* highlight-start */}\n    <QueryBuilderDnD dnd={{ ...ReactDnD, ...ReactDndHtml5Backend }}>\n      {/* highlight-end */}\n      <QueryBuilder />\n    </QueryBuilderDnD>\n  );\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["More information is available in the ",(0,t.jsx)(n.a,{href:"./api/querybuilder#enabledraganddrop",children:"full API documentation"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"compatibility-packages",children:"Compatibility packages"}),"\n",(0,t.jsxs)(n.p,{children:["The recommended implementation of ",(0,t.jsx)(n.a,{href:"./compat",children:"compatibility packages"})," has been simplified in v5. Instead of explicitly passing the replacement components in to the ",(0,t.jsx)(n.code,{children:"controlElements"})," prop, you can wrap the ",(0,t.jsx)(n.code,{children:"<QueryBuilder />"})," element in the appropriate ",(0,t.jsx)(n.code,{children:"<QueryBuilder* />"})," context provider that will automatically apply the correct ",(0,t.jsx)(n.code,{children:"controlElements"}),", ",(0,t.jsx)(n.code,{children:"controlClassnames"}),", and any other relevant props (now or in the future!). The example below uses the ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/@react-querybuilder/bootstrap",children:"Bootstrap-compatible package"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-diff",children:"-import {\n-  bootstrapControlClassnames,\n-  bootstrapControlElements\n-} from '@react-querybuilder/bootstrap';\n+import { QueryBuilderBootstrap } from '@react-querybuilder/bootstrap';\n import 'bootstrap-icons/font/bootstrap-icons.scss';\n import 'bootstrap/scss/bootstrap.scss';\n import { QueryBuilder } from 'react-querybuilder';\n\n export function App() {\n   return (\n-    <QueryBuilder\n-      controlClassnames={bootstrapControlClassnames}\n-      controlElements={bootstrapControlElements}\n-    />\n+    <QueryBuilderBootstrap>\n+      <QueryBuilder />\n+    </QueryBuilderBootstrap>\n   );\n };\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"./compat",children:"compatibility package documentation"})," for more information about specific packages, particularly ",(0,t.jsx)(n.code,{children:"@react-querybuilder/material"}),"."]})}),"\n",(0,t.jsxs)(n.p,{children:["Instructions on migrating from v3 to v4 are ",(0,t.jsx)(n.a,{href:"/docs/4/migrate",children:"here"}),"."]})]})}const p=function(e={}){const{wrapper:n}=Object.assign({},(0,i.a)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(l,e)})):l(e)}},71670:(e,n,r)=>{r.d(n,{a:()=>o});var t=r(27378);const i={},a=t.createContext(i);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}}}]);