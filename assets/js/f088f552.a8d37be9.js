"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4544],{19981:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var s=n(24246),o=n(71670);const i={title:"Common mistakes",description:"How to resolve some frequently-reported issues",hide_table_of_contents:!0},r=void 0,c={id:"tips/common-mistakes",title:"Common mistakes",description:"How to resolve some frequently-reported issues",source:"@site/versioned_docs/version-4/tips/common-mistakes.mdx",sourceDirName:"tips",slug:"/tips/common-mistakes",permalink:"/docs/4/tips/common-mistakes",draft:!1,unlisted:!1,editUrl:"https://github.com/react-querybuilder/react-querybuilder/edit/main/website/versioned_docs/version-4/tips/common-mistakes.mdx",tags:[],version:"4",frontMatter:{title:"Common mistakes",description:"How to resolve some frequently-reported issues",hide_table_of_contents:!0},sidebar:"mySidebar",previous:{title:"Adding and removing query properties",permalink:"/docs/4/tips/adding-removing-query-properties"},next:{title:"Compatibility packages",permalink:"/docs/4/compat"}},a={},u=[{value:"Custom component as closure",id:"custom-component-as-closure",level:2}];function l(e){const t=Object.assign({h2:"h2",p:"p",pre:"pre",code:"code"},(0,o.a)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"custom-component-as-closure",children:"Custom component as closure"}),"\n",(0,s.jsx)(t.p,{children:"A common mistake when defining custom components for React Query Builder is to define them within the body of another function component, like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="App.tsx"',children:"const App = () => {\n  // Other stuff ...\n\n  // highlight-start\n  const CustomValueEditor = props => {\n    // Custom logic here ...\n    return <input />;\n  };\n  // highlight-end\n\n  return (\n    <QueryBuilder\n      fields={fields}\n      query={query}\n      handleOnChange={q => setQuery(q)}\n      controlElements={{\n        valueEditor: CustomValueEditor,\n      }}\n    />\n  );\n};\n"})}),"\n",(0,s.jsxs)(t.p,{children:["This can lead to undesirable behavior, such as the value editor losing focus after each keystroke. This happens because the ",(0,s.jsx)(t.code,{children:"CustomValueEditor"})," component is being redefined each time the ",(0,s.jsx)(t.code,{children:"App"})," component renders. To fix the problem, move the custom component declaration outside of the other function component (it can still be in the same file, just not within the function body):"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",metastring:'title="App.tsx"',children:"// highlight-start\nconst CustomValueEditor = props => {\n  // Custom logic here ...\n  return <input />;\n};\n// highlight-end\n\nconst App = () => {\n  // Other stuff ...\n\n  return (\n    <QueryBuilder\n      fields={fields}\n      query={query}\n      handleOnChange={q => setQuery(q)}\n      controlElements={{\n        valueEditor: CustomValueEditor,\n      }}\n    />\n  );\n};\n"})})]})}const d=function(e={}){const{wrapper:t}=Object.assign({},(0,o.a)(),e.components);return t?(0,s.jsx)(t,Object.assign({},e,{children:(0,s.jsx)(l,e)})):l(e)}},71670:(e,t,n)=>{n.d(t,{a:()=>r});var s=n(27378);const o={},i=s.createContext(o);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}}}]);