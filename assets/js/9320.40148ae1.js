"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9320],{9320:(e,r,o)=>{o.d(r,{yC:()=>v});var n=o(67294),t=o(61236);var l,a={},d={get exports(){return a},set exports(e){a=e}},s={};d.exports=function(){if(l)return s;l=1;var e=n,r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function u(e,o,n){var l,s={},u=null,i=null;for(l in void 0!==n&&(u=""+n),void 0!==o.key&&(u=""+o.key),void 0!==o.ref&&(i=o.ref),o)t.call(o,l)&&!d.hasOwnProperty(l)&&(s[l]=o[l]);if(e&&e.defaultProps)for(l in o=e.defaultProps)void 0===s[l]&&(s[l]=o[l]);return{$$typeof:r,type:e,key:u,ref:i,props:s,_owner:a.current}}return s.Fragment=o,s.jsx=u,s.jsxs=u,s}();const u=a.jsx,i=e=>{const[r,t]=(0,n.useState)(e??null);return(0,n.useEffect)((()=>{let e=!1;return r||(async()=>{const[r,n]=await Promise.all([Promise.all([o.e(4891),o.e(5413)]).then(o.bind(o,15413)).catch((()=>null)),o.e(2250).then(o.bind(o,42250)).catch((()=>null))]);e||r&&n&&t((()=>({...r,...n})))})(),()=>{e=!0}}),[]),r},p=({type:e,path:r,disabled:o,moveRule:n,useDrag:l})=>l((()=>({type:e,item:{path:r},canDrag:!o,collect:e=>({isDragging:!o&&e.isDragging(),dragMonitorId:e.getHandlerId()??""}),end(e,r){const o=r.getDropResult();if(!o)return;const l=(0,t.Il)(o.path),a=o.path[o.path.length-1],d="ruleGroup"===o.type?[...o.path,0]:"inlineCombinator"===o.type?[...l,a]:[...l,a+1];n(e.path,d,"copy"===o.dropEffect)}})),[o,r]),{rule:c,ruleGroup:g,combinatorSelector:D}=t.PN,h=(0,n.createContext)({baseControls:{rule:c,ruleGroup:g,combinatorSelector:D}});h.displayName="QueryBuilderDndContext";const b=({component:e,path:r,independentCombinators:o,...l})=>{const{useDrop:a}=(0,n.useContext)(h),{dropRef:d,dropMonitorId:s,isOver:i}=(({path:e,independentCombinators:r,useDrop:o})=>{const l=(0,n.useRef)(null),[{isOver:a,dropMonitorId:d},s]=o((()=>({accept:["rule","ruleGroup"],canDrop:o=>{const n=(0,t.Il)(e),l=(0,t.Il)(o.path),a=e[e.length-1],d=o.path[o.path.length-1];return!((0,t.jg)(o.path,e)||(0,t.H4)(o.path,e)||(0,t.H4)(n,l)&&a-1===d||r&&(0,t.H4)(n,l)&&a===d-1)},collect:e=>({isOver:e.canDrop()&&e.isOver(),dropMonitorId:e.getHandlerId()??"",dropEffect:(e.getDropResult()??{}).dropEffect}),drop:()=>({type:"inlineCombinator",path:e})})),[e,r]);return s(l),{dropRef:l,dropMonitorId:d,isOver:a}})({path:r,independentCombinators:o,useDrop:a}),p=i?t.q0.dndOver:"",c=(0,t.c)(p,t.q0.betweenRules);return u("div",{ref:d,className:c,"data-dropmonitorid":s,"data-testid":t.O3.inlineCombinator,children:u(e,{...l,path:r,testID:t.O3.combinators})},"dnd")};b.displayName="InlineCombinatorDnD";const m=e=>{const r=(0,n.useContext)(h),{useDrag:o,useDrop:l}=r,{path:a,disabled:d,parentDisabled:s,actions:{moveRule:i},schema:{independentCombinators:c}}=e,g=(({path:e,disabled:r,independentCombinators:o,moveRule:l,useDrag:a,useDrop:d})=>{const s=(0,n.useRef)(null),u=(0,n.useRef)(null),[{isDragging:i,dragMonitorId:c},g,D]=p({type:"rule",path:e,disabled:r,independentCombinators:o,moveRule:l,useDrag:a}),[{isOver:h,dropMonitorId:b,dropEffect:m},f]=d((()=>({accept:["rule","ruleGroup"],canDrop:r=>{const n=(0,t.Il)(e),l=(0,t.Il)(r.path),a=e[e.length-1],d=r.path[r.path.length-1];return!((0,t.jg)(r.path,e)||(0,t.H4)(n,l)&&(a===d||a===d-1||o&&a===d-2))},collect:e=>({isOver:e.canDrop()&&e.isOver(),dropMonitorId:e.getHandlerId()??"",dropEffect:(e.getDropResult()??{}).dropEffect}),drop:()=>({type:"rule",path:e})})),[r,o,l,e]);return g(u),D(f(s)),{isDragging:i,dragMonitorId:c,isOver:h,dropMonitorId:b,dndRef:s,dragRef:u,dropEffect:m}})({path:a,disabled:!!s||!!d,independentCombinators:c,moveRule:i,useDrag:o,useDrop:l}),{rule:D}=r.baseControls;return u(h.Provider,{value:r,children:u(D,{...e,...g})})};m.displayName="RuleDnD";const f=e=>{const r=(0,n.useContext)(h),{useDrag:o,useDrop:l}=r,{path:a,disabled:d,parentDisabled:s,actions:{moveRule:i},schema:{independentCombinators:c}}=e,g=(({disabled:e,path:r,independentCombinators:o,moveRule:l,useDrag:a,useDrop:d})=>{const s=(0,n.useRef)(null),u=(0,n.useRef)(null),i=(0,n.useRef)(null),[{isDragging:c,dragMonitorId:g},D,h]=p({type:"ruleGroup",path:r,disabled:e,independentCombinators:o,moveRule:l,useDrag:a}),[{isOver:b,dropMonitorId:m,dropEffect:f},v]=d((()=>({accept:["rule","ruleGroup"],canDrop:o=>{if(e)return!1;const n=(0,t.Il)(o.path),l=o.path[o.path.length-1];return!((0,t.jg)(o.path,r)||(0,t.H4)(r,n)&&0===l||(0,t.H4)(r,o.path))},collect:e=>({isOver:e.canDrop()&&e.isOver(),dropMonitorId:e.getHandlerId()??"",dropEffect:(e.getDropResult()??{}).dropEffect}),drop:(e,o)=>o.getDropResult()??{type:"ruleGroup",path:r}})),[e,l,r]);return r.length>0&&(D(u),h(s)),v(i),{isDragging:c,dragMonitorId:g,isOver:b,dropMonitorId:m,previewRef:s,dragRef:u,dropRef:i,dropEffect:f}})({disabled:!!s||!!d,path:a,independentCombinators:c,moveRule:i,useDrag:o,useDrop:l}),{ruleGroup:D}=r.baseControls;return u(D,{...e,...g})};f.displayName="RuleGroupDnD";const v=e=>{const{controlClassnames:r,controlElements:o,debugMode:n,enableDragAndDrop:l,enableMountQueryChange:a,translations:d}=e,s=(0,t.Qr)({controlClassnames:r,controlElements:o,debugMode:n,enableDragAndDrop:l??!0,enableMountQueryChange:a,translations:d??{}}),{enableDragAndDrop:p}=s,c=i(e.dnd),g=p&&c?"dnd":"no-dnd";if(!p||!c)return u(t.TF.Provider,{value:{...s,enableDragAndDrop:!1,debugMode:n},children:e.children},g);const{DndProvider:D,HTML5Backend:h}=c;return u(D,{backend:h,debugMode:n,children:u(t.TF.Provider,{value:{...s,enableDragAndDrop:p,debugMode:n},children:u(C,{dnd:c,children:e.children})},g)},g)};v.displayName="QueryBuilderDnD";const C=e=>{var r,o,l,a,d,s;const p=(0,n.useContext)(t.TF),c=(0,n.useContext)(h),g=i(e.dnd),D=(0,t.HP)(!1,e.debugMode,p.debugMode),v=(0,t.HP)(!0,e.enableDragAndDrop,p.enableDragAndDrop),C=v&&g?"dnd":"no-dnd";if(!v||!g)return u(t.TF.Provider,{value:{...p,enableDragAndDrop:!1,debugMode:D},children:e.children},C);const{DndContext:R,useDrag:y,useDrop:I}=g,E={rule:(null==(r=e.controlElements)?void 0:r.rule)??(null==(o=p.controlElements)?void 0:o.rule)??c.baseControls.rule,ruleGroup:(null==(l=e.controlElements)?void 0:l.ruleGroup)??(null==(a=p.controlElements)?void 0:a.ruleGroup)??c.baseControls.ruleGroup,combinatorSelector:(null==(d=e.controlElements)?void 0:d.combinatorSelector)??(null==(s=p.controlElements)?void 0:s.combinatorSelector)??c.baseControls.combinatorSelector},M={...p,controlElements:{...p.controlElements,ruleGroup:f,rule:m,inlineCombinator:b}};return u(R.Consumer,{children:()=>u(t.TF.Provider,{value:M,children:u(h.Provider,{value:{useDrag:y,useDrop:I,baseControls:E},children:e.children})},C)},C)};C.displayName="QueryBuilderDndWithoutProvider"}}]);