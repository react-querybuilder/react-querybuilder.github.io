"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7742],{11432:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>l});var n=t(62540),i=t(65404);const a={title:"Custom bind variables",description:"Altering the SQL for certain RDBMS's",hide_table_of_contents:!0},s=void 0,o={id:"tips/custom-bind-variables",title:"Custom bind variables",description:"Altering the SQL for certain RDBMS's",source:"@site/docs/tips/custom-bind-variables.md",sourceDirName:"tips",slug:"/tips/custom-bind-variables",permalink:"/docs/next/tips/custom-bind-variables",draft:!1,unlisted:!1,editUrl:"https://github.com/react-querybuilder/react-querybuilder/edit/main/website/docs/tips/custom-bind-variables.md",tags:[],version:"current",frontMatter:{title:"Custom bind variables",description:"Altering the SQL for certain RDBMS's",hide_table_of_contents:!0},sidebar:"mySidebar",previous:{title:"Adding and removing query properties",permalink:"/docs/next/tips/adding-removing-query-properties"},next:{title:"Path concepts",permalink:"/docs/next/tips/path"}},c={},l=[];function d(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.admonition,{type:"tip",children:(0,n.jsxs)(r.p,{children:["The specific method described below is not necessary in version 7 or later. The ",(0,n.jsxs)(r.a,{href:"../utils/export#numbered-parameters",children:[(0,n.jsx)(r.code,{children:"numberedParams"})," option"]})," will achieve the same result."]})}),"\n",(0,n.jsxs)(r.p,{children:["Different SQL flavors have different requirements for bind variable placeholders. Some use a simple ",(0,n.jsx)(r.code,{children:"?"})," character (which is what ",(0,n.jsx)(r.code,{children:"formatQuery(query, 'parameterized')"})," produces by default) and others require a bind variable placeholder to start with ",(0,n.jsx)(r.code,{children:"$"})," followed by a unique string or number."]}),"\n",(0,n.jsxs)(r.p,{children:["The ",(0,n.jsx)(r.a,{href:"../utils/export#named-parameters",children:'"parameterized_named" export format'}),", along with the ",(0,n.jsxs)(r.a,{href:"../utils/export#parameter-prefix",children:[(0,n.jsx)(r.code,{children:"paramPrefix"})," option"]}),", will usually be sufficient to cover the latter case. However, if the default parameter names (e.g. ",(0,n.jsx)(r.code,{children:":fieldName_1"}),') are not acceptable, you can use the "parameterized" format and replace the "?" with your choice of name.']}),"\n",(0,n.jsxs)(r.p,{children:['The following code will produce a SQL string with each bind variable placeholder being numbered from "$1" to "$',(0,n.jsx)(r.em,{children:"n"}),'", where ',(0,n.jsx)(r.em,{children:"n"})," is the number of bind variables (also, appropriately, the number of elements in the ",(0,n.jsx)(r.code,{children:"params"})," array)."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-ts",children:"let i = 0;\nconst fq = formatQuery(query, 'parameterized');\nconst fqWithNumberedParams = {\n  ...fq,\n  sql: fq.sql.replaceAll('?', () => `$${++i}`),\n};\n"})}),"\n",(0,n.jsxs)(r.p,{children:["For example, if ",(0,n.jsx)(r.code,{children:'formatQuery(query, "parameterized")'})," produced the following object:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-json",children:'{\n  "sql": "(firstName = ? and lastName = ?)",\n  "params": ["Steve", "Vai"]\n}\n'})}),"\n",(0,n.jsxs)(r.p,{children:["...then the code above would assign the following object to the ",(0,n.jsx)(r.code,{children:"fqWithNumberedParams"})," variable:"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-json",children:'{\n  "sql": "(firstName = $1 and lastName = $2)",\n  "params": ["Steve", "Vai"]\n}\n'})})]})}function m(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},65404:(e,r,t)=>{t.d(r,{R:()=>s,x:()=>o});var n=t(63696);const i={},a=n.createContext(i);function s(e){const r=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(a.Provider,{value:r},e.children)}}}]);