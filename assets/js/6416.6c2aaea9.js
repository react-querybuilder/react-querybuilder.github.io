"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6416],{66416:(e,t,r)=>{var n,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(l,{defaultCELValueProcessor:()=>le,defaultMongoDBValueProcessor:()=>ie,defaultRuleProcessorCEL:()=>A,defaultRuleProcessorJsonLogic:()=>_,defaultRuleProcessorMongoDB:()=>E,defaultRuleProcessorSQL:()=>k,defaultRuleProcessorSpEL:()=>D,defaultSpELValueProcessor:()=>ue,defaultValueProcessor:()=>ae,defaultValueProcessorByRule:()=>z,defaultValueProcessorCELByRule:()=>ce,defaultValueProcessorMongoDBByRule:()=>fe,defaultValueProcessorSpELByRule:()=>pe,formatQuery:()=>ne,jsonLogicAdditionalOperators:()=>v}),e.exports=(n=l,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))i.call(e,l)||l===r||o(e,l,{get:()=>t[l],enumerable:!(n=s(t,l))||n.enumerable});return e})(o({},"__esModule",{value:!0}),n));var u="~",c="~",f=e=>"string"==typeof e?e.trim():e,p=e=>{return Array.isArray(e)?e.map(f):"string"==typeof e?(t=e,r=",",void 0===r&&(r=","),"string"==typeof t?t.split(`\\${r}`).map((e=>e.split(r))).reduce(((e,t,n)=>0===n?t:[...e.slice(0,e.length-1),`${e[e.length-1]}${r}${t[0]}`,...t.slice(1)]),[]):[]).filter((e=>!/^\s*$/.test(e))).map((e=>e.trim())):"number"==typeof e?[e]:[];var t,r},h=/^\s*[+-]?(\d+|\d*\.\d+|\d+\.\d*)([Ee][+-]?\d+)?\s*$/,$=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,d=e=>$(e)&&"rules"in e&&Array.isArray(e.rules),g=e=>d(e)&&"string"==typeof e.combinator,b=e=>{switch(e.toLowerCase()){case"null":return"is null";case"notnull":return"is not null";case"notin":return"not in";case"notbetween":return"not between";case"contains":case"beginswith":case"endswith":return"like";case"doesnotcontain":case"doesnotbeginwith":case"doesnotendwith":return"not like";default:return e}},y={"=":"$eq","!=":"$ne","<":"$lt","<=":"$lte",">":"$gt",">=":"$gte",in:"$in",notIn:"$nin"},m={and:"&&",or:"||"},v={startsWith:(e,t)=>"string"==typeof e&&e.startsWith(t),endsWith:(e,t)=>"string"==typeof e&&e.endsWith(t)},w=e=>({...e,rules:e.rules.map((e=>{if("string"==typeof e)return e;if(d(e))return w(e);let{value:t}=e;return"string"==typeof t&&(t=((e,t)=>{let{parseNumbers:r}=t;return"bigint"==typeof e||"number"==typeof e?e:r&&("native"===r||h.test(e))?parseFloat(e):e})(t,{parseNumbers:!0})),{...e,value:t}}))}),N=e=>"string"==typeof e&&e.length>0||"number"==typeof e&&!isNaN(e)||"string"!=typeof e&&"number"!=typeof e,P=(e,t)=>t&&("number"==typeof e||"bigint"==typeof e||"string"==typeof e&&h.test(e)),S=e=>e.length>=3,W=function(e){return void 0===e&&(e=["",""]),Array.isArray(e)?e:"string"==typeof e?[e,e]:e??["",""]},j=e=>/^(does)?not/i.test(e),O=(e,t)=>"string"==typeof e&&t?e.replaceAll('"','\\"'):e,A=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{escapeQuotes:a,parseNumbers:i}=void 0===t?{}:t;const l="field"===s,u=n.replace(/^=$/,"=="),c="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||P(o,i);switch(u){case"<":case"<=":case"==":case"!=":case">":case">=":return`${r} ${u} ${l||c?f(o):`"${O(o,a)}"`}`;case"contains":case"doesNotContain":return`${j(u)?"!":""}${r}.contains(${l?f(o):`"${O(o,a)}"`})`;case"beginsWith":case"doesNotBeginWith":return`${j(u)?"!":""}${r}.startsWith(${l?f(o):`"${O(o,a)}"`})`;case"endsWith":case"doesNotEndWith":return`${j(u)?"!":""}${r}.endsWith(${l?f(o):`"${O(o,a)}"`})`;case"null":return`${r} == null`;case"notNull":return`${r} != null`;case"in":case"notIn":{const e=j(u),t=p(o);return t.length>0?`${e?"!(":""}${r} in [${t.map((e=>l||P(e,i)?`${f(e)}`:`"${O(e,a)}"`)).join(", ")}]${e?")":""}`:""}case"between":case"notBetween":{const e=p(o);if(e.length>=2&&e[0]&&e[1]){const[t,o]=e,s=P(t,!0)?parseFloat(t):NaN,i=P(o,!0)?parseFloat(o):NaN;let u=isNaN(s)?l?`${t}`:`"${O(t,a)}"`:s,c=isNaN(i)?l?`${o}`:`"${O(o,a)}"`:i;if(u===s&&c===i&&i<s){c=s,u=i}return"between"===n?`(${r} >= ${u} && ${r} <= ${c})`:`(${r} < ${u} || ${r} > ${c})`}return""}}return""},x=e=>"string"!=typeof e?e:e.replaceAll("\\","\\\\").replaceAll('"','\\"'),E=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{parseNumbers:a}=void 0===t?{}:t;const i="field"===s,l="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||P(o,a);if("="===n&&!i)return`{"${r}":${l?f(o):`"${x(o)}"`}}`;switch(n){case"<":case"<=":case"=":case"!=":case">":case">=":{const e=y[n];return i?`{"$expr":{"${e}":["$${r}","$${o}"]}}`:`{"${r}":{"${e}":${l?f(o):`"${x(o)}"`}}}`}case"contains":return i?`{"$where":"this.${r}.includes(this.${o})"}`:`{"${r}":{"$regex":"${x(o)}"}}`;case"beginsWith":return i?`{"$where":"this.${r}.startsWith(this.${o})"}`:`{"${r}":{"$regex":"^${x(o)}"}}`;case"endsWith":return i?`{"$where":"this.${r}.endsWith(this.${o})"}`:`{"${r}":{"$regex":"${x(o)}$"}}`;case"doesNotContain":return i?`{"$where":"!this.${r}.includes(this.${o})"}`:`{"${r}":{"$not":{"$regex":"${x(o)}"}}}`;case"doesNotBeginWith":return i?`{"$where":"!this.${r}.startsWith(this.${o})"}`:`{"${r}":{"$not":{"$regex":"^${x(o)}"}}}`;case"doesNotEndWith":return i?`{"$where":"!this.${r}.endsWith(this.${o})"}`:`{"${r}":{"$not":{"$regex":"${x(o)}$"}}}`;case"null":return`{"${r}":null}`;case"notNull":return`{"${r}":{"$ne":null}}`;case"in":case"notIn":{const e=p(o);return e.length>0?i?`{"$where":"${"notIn"===n?"!":""}[${e.map((e=>`this.${e}`)).join(",")}].includes(this.${r})"}`:`{"${r}":{"${y[n]}":[${e.map((e=>P(e,a)?`${f(e)}`:`"${x(e)}"`)).join(",")}]}}`:""}case"between":case"notBetween":{const e=p(o);if(e.length>=2&&N(e[0])&&N(e[1])){const[t,o]=e,s=P(t,!0)?parseFloat(t):NaN,a=P(o,!0)?parseFloat(o):NaN,l=i||!isNaN(s)?`${t}`:`"${x(t)}"`,u=i||!isNaN(a)?`${o}`:`"${x(o)}"`;return"between"===n?i?`{"$and":[{"$expr":{"$gte":["$${r}","$${l}"]}},{"$expr":{"$lte":["$${r}","$${u}"]}}]}`:`{"${r}":{"$gte":${l},"$lte":${u}}}`:i?`{"$or":[{"$expr":{"$lt":["$${r}","$${l}"]}},{"$expr":{"$gt":["$${r}","$${u}"]}}]}`:`{"$or":[{"${r}":{"$lt":${l}}},{"${r}":{"$gt":${u}}}]}`}return""}}return""},F=e=>/^(does)?not/i.test(e),C=(e,t)=>t?`!(${e})`:`${e}`,B=(e,t)=>"string"==typeof e&&t?e.replaceAll("'","\\'"):e,D=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{escapeQuotes:a,parseNumbers:i}=void 0===t?{}:t;const l="field"===s,u=n.replace(/^=$/,"=="),c="number"==typeof o||"boolean"==typeof o||"bigint"==typeof o||P(o,i);switch(u){case"<":case"<=":case"==":case"!=":case">":case">=":return`${r} ${u} ${l||c?f(o):`'${B(o,a)}'`}`;case"contains":case"doesNotContain":return C(`${r} matches ${l||c?f(o):`'${B(o,a)}'`}`,F(u));case"beginsWith":case"doesNotBeginWith":{const e=l?`'^'.concat(${f(o)})`:`'${"string"==typeof o&&!o.startsWith("^")||c?"^":""}${B(o,a)}'`;return C(`${r} matches ${e}`,F(u))}case"endsWith":case"doesNotEndWith":{const e=l?`${f(o)}.concat('$')`:`'${B(o,a)}${"string"==typeof o&&!o.endsWith("$")||c?"$":""}'`;return C(`${r} matches ${e}`,F(u))}case"null":return`${r} == null`;case"notNull":return`${r} != null`;case"in":case"notIn":{const e=F(u)?"!":"",t=p(o);return t.length>0?`${e}(${t.map((e=>`${r} == ${l||P(e,i)?`${f(e)}`:`'${B(e,a)}'`}`)).join(" or ")})`:""}case"between":case"notBetween":{const e=p(o);if(e.length>=2&&e[0]&&e[1]){const[t,o]=e,s=P(t,!0)?parseFloat(t):NaN,i=P(o,!0)?parseFloat(o):NaN;let u=isNaN(s)?l?`${t}`:`'${B(t,a)}'`:s,c=isNaN(i)?l?`${o}`:`'${B(o,a)}'`:i;if(u===s&&c===i&&i<s){c=s,u=i}return"between"===n?`(${r} >= ${u} and ${r} <= ${c})`:`(${r} < ${u} or ${r} > ${c})`}return""}}return""},L=(e,t)=>t&&"string"==typeof e?e.replaceAll("'","''"):e,z=function(e,t){let{operator:r,value:n,valueSource:o}=e,{escapeQuotes:s,parseNumbers:a,quoteFieldNamesWith:i}=void 0===t?{}:t;const l="field"===o,[u,c]=W(i),h=r.toLowerCase(),$=e=>`${u}${e}${c}`;switch(h){case"null":case"notnull":return"";case"in":case"notin":{const e=p(n);return e.length>0?`(${e.map((e=>l?$(e):P(e,a)?`${f(e)}`:`'${L(e,s)}'`)).join(", ")})`:""}case"between":case"notbetween":{const e=p(n);if(e.length>=2&&N(e[0])&&N(e[1])){const[t,r]=e;return l?`${$(t)} and ${$(r)}`:P(t,a)&&P(r,a)?`${f(t)} and ${f(r)}`:`'${L(t,s)}' and '${L(r,s)}'`}return""}case"contains":case"doesnotcontain":return l?`'%' || ${$(n)} || '%'`:`'%${L(n,s)}%'`;case"beginswith":case"doesnotbeginwith":return l?`${$(n)} || '%'`:`'${L(n,s)}%'`;case"endswith":case"doesnotendwith":return l?`'%' || ${$(n)}`:`'%${L(n,s)}'`}return"boolean"==typeof n?n?"TRUE":"FALSE":l?$(n):P(n,a)?`${f(n)}`:`'${L(n,s)}'`},M=(e,t)=>/^(does)?not/i.test(e)?{"!":t}:t,_=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{parseNumbers:a}=void 0===t?{}:t;const i="field"===s,l={var:r},u=e=>i?{var:`${e}`}:P(e,a)?parseFloat(e):e;switch(n){case"<":case"<=":case"=":case"!=":case">":case">=":return{[(c=n,c.replace(/^(=)$/,"$1=").replace(/^notNull$/i,"!=").replace(/^null$/i,"=="))]:[l,u(o)]};case"null":case"notNull":return{[("notNull"===n?"!":"=")+"="]:[l,null]};case"in":case"notIn":{const e=p(o).map(u);if(e.length>0){return M(n,{in:[l,e]})}return!1}case"between":case"notBetween":{const e=p(o);if(e.length>=2&&N(e[0])&&N(e[1])){let[t,r]=e;if(!i&&P(t,!0)&&P(r,!0)){const e=parseFloat(t),n=parseFloat(r);if(n<e){r=e,t=n}else t=e,r=n}else i&&(t={var:t},r={var:r});return M(n,{"<=":[t,l,r]})}return!1}case"contains":case"doesNotContain":{const e={in:[u(o),l]};return M(n,e)}case"beginsWith":case"doesNotBeginWith":{const e={startsWith:[l,u(o)]};return M(n,e)}case"endsWith":case"doesNotEndWith":{const e={endsWith:[l,u(o)]};return M(n,e)}}var c;return!1},k=function(e,t){let{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:o=["",""],valueProcessor:s=z}=void 0===t?{}:t;const a=s(e,{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:o}),i=b(e.operator),l=i.toLowerCase();if(("in"===l||"not in"===l||"between"===l||"not between"===l)&&!a)return"";const[u,c]=W(o);return`${u}${e.field}${c} ${i} ${a}`.trim()},q=e=>d(e)?I(e):e,I=e=>{const t=[],r=e=>t.push(q(e));let n=0;for(let o=0;o<e.rules.length;o+=2)if(1===e.rules.length)r(e.rules[0]);else if("and"===e.rules[o+1]){n=o;let r=1;for(;"and"===e.rules[n+r];)o+=2,r+=2;t.push({rules:e.rules.slice(n,o+1).map(q)}),o-=2}else"or"===e.rules[o+1]&&(0===o||o===e.rules.length-3?(0!==o&&"or"!==e.rules[o-1]||r(e.rules[o]),r(e.rules[o+1]),o===e.rules.length-3&&r(e.rules[o+2])):("and"===e.rules[o-1]||r(e.rules[o]),r(e.rules[o+1])));return 1===t.length&&"object"==typeof t[0]&&d(t[0])?{...e,...t[0]}:{...e,rules:t}},R=e=>{const t=I(e),r=t.rules.map((e=>"string"!=typeof e&&d(e)?R(e):e)),n=r.length<2?"and":r[1],o=r.filter((e=>"string"!=typeof e));return{...t,combinator:n,rules:o}},Q=e=>$(e)&&"boolean"==typeof e.valid,V=(e,t,r)=>{if("boolean"==typeof t)return t;if(Q(t))return t.valid;if("function"==typeof r&&!d(e)){const t=r(e);if("boolean"==typeof t)return t;if(Q(t))return t.valid}return!0},T=r(86373),K=e=>$(e)&&"name"in e&&"string"==typeof e.name,U=e=>$(e)&&"value"in e&&"string"==typeof e.value;function J(e){return(0,T.produce)((e=>{K(e)&&!U(e)?e.value=e.name:!K(e)&&U(e)&&(e.name=e.value)}))(e)}var X=e=>Array.isArray(e)&&e.length>0&&$(e[0])&&"options"in e[0]&&($(e[0].options[0])&&"name"in e[0].options[0]||$(e[0].options[0])&&"value"in e[0].options[0]),G=(e,t)=>((e=>Array.isArray(e)&&e.length>0&&$(e[0])&&"options"in e[0])(e)?e.flatMap((e=>e.options)):e).find((e=>e.name===t)),H=e=>(e=>{const t=new Set,r=[];return e.forEach((e=>{t.has(e.value??e.name)||(t.add(e.value??e.name),r.push(e))})),e.length===r.length?e:r})(X(e)?e.flatMap((e=>e.options)):e),Y={"<":"lt","<=":"lte",">":"gt",">=":"gte"},Z=(e,t)=>/^(does)?not/i.test(e)?{bool:{must_not:t}}:t,ee=e=>e?.replace(/('|\\)/g,"\\$1"),te={beginsWith:"startsWith",doesNotContain:"contains",doesNotBeginWith:"startsWith",doesNotEndWith:"endsWith"},re=function(e,t){let{field:r,operator:n,value:o,valueSource:s}=e,{parseNumbers:a}=void 0===t?{}:t;if("field"===s){if(p(o).some((e=>"string"!=typeof e)))return!1;const e=ee(r);switch(n){case"=":case"!=":case">":case">=":case"<":case"<=":{const t="="===n?"==":n,r=ee(o);return!!r&&{bool:{filter:{script:{script:`doc['${e}'] ${t} doc['${r}']`}}}}}case"in":case"notIn":{const t=p(o);if(t.length>0){const r=t.map((t=>({bool:{filter:{script:{script:`doc['${e}'] == doc['${t}']`}}}})));return{bool:"in"===n?{should:r}:{must_not:r}}}return!1}case"between":case"notBetween":{const t=p(o);if(t.length>=2&&t[0]&&t[1]){const r=`doc['${e}'] >= doc['${t[0]}'] && doc['${e}'] <= doc['${t[1]}']`;return{bool:{filter:{script:{script:"notBetween"===n?`!(${r})`:r}}}}}return!1}case"contains":case"doesNotContain":case"beginsWith":case"doesNotBeginWith":case"endsWith":case"doesNotEndWith":{const t=ee(o);if(!t)return!1;return{bool:{filter:{script:{script:((e,t,r)=>{const n=`doc['${e}'].${te[t]??t}(doc['${r}'])`;return t.startsWith("d")?`!${n}`:n})(e,n,t)}}}}}}}const i=e=>"boolean"==typeof o?o:P(e,a)?parseFloat(e):e;switch(n){case"<":case"<=":case">":case">=":return{range:{[r]:{[Y[n]]:i(o)}}};case"=":return{term:{[r]:i(o)}};case"!=":return{bool:{must_not:{term:{[r]:i(o)}}}};case"null":return{bool:{must_not:{exists:{field:r}}}};case"notNull":return{exists:{field:r}};case"in":case"notIn":{const e=p(o).map(i);if(e.length>0){const t=e.map((e=>({term:{[r]:i(e)}})));return{bool:"in"===n?{should:t}:{must_not:t}}}return!1}case"between":case"notBetween":{const e=p(o);if(e.length>=2&&N(e[0])&&N(e[1])){let[t,o]=e;if(P(t,!0)&&P(o,!0)){const e=parseFloat(t),r=parseFloat(o);if(r<e){o=e,t=r}else t=e,o=r}return Z(n,{range:{[r]:{gte:t,lte:o}}})}return!1}case"contains":case"doesNotContain":return Z(n,{regexp:{[r]:{value:o}}});case"beginsWith":case"doesNotBeginWith":return Z(n,{regexp:{[r]:{value:`^${o}`}}});case"endsWith":case"doesNotEndWith":return Z(n,{regexp:{[r]:{value:`${o}$`}}})}return!1};function ne(e,t){void 0===t&&(t={});let r="json",n=z,o=null,s=["",""],a=()=>!0,i=[],l={},f="",h=":",$=!1,y=!1,v=u,N=c;if("string"==typeof t)r=t.toLowerCase(),"mongodb"===r?o=E:"cel"===r?o=A:"spel"===r?o=D:"jsonlogic"===r?o=_:"elasticsearch"===r&&(o=re);else{r=(t.format??"json").toLowerCase();const{valueProcessor:e=null,ruleProcessor:l=null}=t;"function"==typeof l&&(o=l),n="function"==typeof e?(t,r)=>S(e)?e(t.field,t.operator,t.value,t.valueSource):e(t,r):"mongodb"===r?o??E:"cel"===r?o??A:"spel"===r?o??D:"jsonlogic"===r?o??_:"elasticsearch"==r?o??re:z,s=W(t.quoteFieldNamesWith),a=t.validator??(()=>!0),j=t.fields??[],i=Array.isArray(j)?(0,T.produce)((e=>{if(X(e))for(const t of e)t.options.forEach(((e,r)=>t.options[r]=J(e)));else e.forEach(((t,r)=>e[r]=J(t)))}))(j):[],f=t.fallbackExpression??"",h=t.paramPrefix??":",$=!!t.paramsKeepPrefix,y=!!t.parseNumbers,v=t.placeholderFieldName??u,N=t.placeholderOperatorName??c}var j;if(f||(f="mongodb"===r?'"$and":[{"$expr":true}]':"cel"===r||"spel"===r?"1 == 1":"(1 = 1)"),"json"===r||"json_without_ids"===r){const t=y?w(e):e;return"json"===r?JSON.stringify(t,null,2):JSON.stringify(t,["rules","field","value","operator","combinator","not","valueSource"])}if("function"==typeof a){const t=a(e);if("boolean"==typeof t){if(!1===t)return"parameterized"===r?{sql:f,params:[]}:"parameterized_named"===r?{sql:f,params:{}}:"mongodb"===r?`{${f}}`:"jsonlogic"!==r&&("elasticsearch"===r?{}:f)}else l=t}const O={},x=H(i);x.forEach((e=>{"function"==typeof e.validator&&(O[e.value??e.name]=e.validator)}));const F=e=>{let t,r;if(e.id&&(t=l[e.id]),x.length){const t=x.filter((t=>t.name===e.field));if(t.length){const e=t[0];"function"==typeof e.validator&&(r=e.validator)}}return[t,r]};if("sql"===r){const t=(e,r)=>{if(!V(e,l[e.id??""]))return r?f:"";const a=e.rules.map((e=>{if("string"==typeof e)return e;if(d(e))return t(e);const[r,a]=F(e);if(!V(e,r,a)||e.field===v||e.operator===N)return"";const l="value"===(e.valueSource??"value"),u=G(i,e.field);return"function"==typeof o?o(e,{parseNumbers:y,escapeQuotes:l,quoteFieldNamesWith:s,fieldData:u}):k(e,{parseNumbers:y,escapeQuotes:l,valueProcessor:n,quoteFieldNamesWith:s,fieldData:u})}));return 0===a.length?f:`${e.not?"NOT ":""}(${a.filter(Boolean).join(g(e)?` ${e.combinator} `:" ")})`};return t(e,!0)}if("parameterized"===r||"parameterized_named"===r){const t="parameterized"===r,o=[],a={},u={},c=e=>(u[e]=(u[e]??0)+1,`${e}_${u[e]}`),m=e=>{const[r,l]=F(e);if(!V(e,r,l)||e.field===v||e.operator===N)return"";const u=G(i,e.field),f=n(e,{parseNumbers:y,quoteFieldNamesWith:s,fieldData:u}),d=b(e.operator);if("value"===(e.valueSource??"value")){if("is null"===d.toLowerCase()||"is not null"===d.toLowerCase())return`${s[0]}${e.field}${s[1]} ${d}`;if("in"===d.toLowerCase()||"not in"===d.toLowerCase()){if(f){const r=p(e.value);if(t)return r.forEach((e=>o.push(P(e,y)?parseFloat(e):e))),`${s[0]}${e.field}${s[1]} ${d} (${r.map((()=>"?")).join(", ")})`;const n=[];return r.forEach((t=>{const r=c(e.field);n.push(`${h}${r}`),a[`${$?h:""}${r}`]=P(t,y)?parseFloat(t):t})),`${s[0]}${e.field}${s[1]} ${d} (${n.join(", ")})`}return""}if("between"===d.toLowerCase()||"not between"===d.toLowerCase()){if(f){const r=p(e.value),[n,i]=r.slice(0,2).map((e=>P(e,y)?parseFloat(e):e));if(t)return o.push(n),o.push(i),`${s[0]}${e.field}${s[1]} ${d} ? and ?`;const l=c(e.field),u=c(e.field);return a[`${$?h:""}${l}`]=n,a[`${$?h:""}${u}`]=i,`${s[0]}${e.field}${s[1]} ${d} ${h}${l} and ${h}${u}`}return""}let r=e.value;"string"==typeof e.value&&(r=P(e.value,y)?parseFloat(e.value):/^'.*'$/g.test(f)?f.replace(/(^'|'$)/g,""):f);let n="";return t?o.push(r):(n=c(e.field),a[`${$?h:""}${n}`]=r),`${s[0]}${e.field}${s[1]} ${d} ${t?"?":`${h}${n}`}`.trim()}{const e=d.toLowerCase();if(("in"===e||"not in"===e||"between"===e||"not between"===e)&&!f)return""}return`${s[0]}${e.field}${s[1]} ${d} ${f}`.trim()},w=(e,t)=>{if(!V(e,l[e.id??""]))return t?f:"";const r=e.rules.map((e=>"string"==typeof e?e:d(e)?w(e):m(e)));return 0===r.length?f:`${e.not?"NOT ":""}(${r.filter(Boolean).join(g(e)?` ${e.combinator} `:" ")})`};return t?{sql:w(e,!0),params:o}:{sql:w(e,!0),params:a}}if("mongodb"===r){const t=(e,r)=>{if(!V(e,l[e.id??""]))return r?f:"";const s=`"$${e.combinator.toLowerCase()}"`;let a=!1;const u=e.rules.map((e=>{if(d(e)){const r=t(e);return r?(a=!0,/^\{.+\}$/.test(r)?r:`{${r}}`):""}const[r,s]=F(e);if(!V(e,r,s)||e.field===v||e.operator===N)return"";const l=G(i,e.field);return(o??n)(e,{parseNumbers:y,fieldData:l})})).filter(Boolean);return u.length>0?1!==u.length||a?`${s}:[${u.join(",")}]`:u[0]:f},r=g(e)?e:R(e),s=t(r,!0);return/^\{.+\}$/.test(s)?s:`{${s}}`}if("cel"===r){const t=(e,r)=>{if(!V(e,l[e.id??""]))return r?f:"";const s=e.rules.map((e=>{if("string"==typeof e)return m[e];if(d(e))return t(e);const[r,s]=F(e);if(!V(e,r,s)||e.field===v||e.operator===N)return"";const a=G(i,e.field);return(o??n)(e,{parseNumbers:y,escapeQuotes:"value"===(e.valueSource??"value"),fieldData:a})})).filter(Boolean).join(g(e)?` ${m[e.combinator]} `:" "),[a,u]=e.not||!r?[(e.not?"!":"")+"(",")"]:["",""];return s?`${a}${s}${u}`:f};return t(e,!0)}if("spel"===r){const t=(e,r)=>{if(!V(e,l[e.id??""]))return r?f:"";const s=e.rules.map((e=>{if("string"==typeof e)return e;if(d(e))return t(e);const[r,s]=F(e);if(!V(e,r,s)||e.field===v||e.operator===N)return"";const a=G(i,e.field);return(o??n)(e,{parseNumbers:y,escapeQuotes:"value"===(e.valueSource??"value"),fieldData:a})})).filter(Boolean).join(g(e)?` ${e.combinator} `:" "),[a,u]=e.not||!r?[(e.not?"!":"")+"(",")"]:["",""];return s?`${a}${s}${u}`:f};return t(e,!0)}if("jsonlogic"===r){const t=g(e)?e:R(e),r=e=>{if(!V(e,l[e.id??""]))return!1;const t=e.rules.map((e=>{if(d(e))return r(e);const[t,s]=F(e);if(!V(e,t,s)||e.field===v||e.operator===N)return!1;const a=G(i,e.field);return(o??n)(e,{parseNumbers:y,fieldData:a})})).filter(Boolean);if(0===t.length)return!1;const s=1===t.length?t[0]:{[e.combinator]:t};return e.not?{"!":s}:s};return r(t)}if("elasticsearch"===r){const t=g(e)?e:R(e),r=e=>{if(!V(e,l[e.id??""]))return!1;const t=e.rules.map((e=>{if(d(e))return r(e);const[t,s]=F(e);if(!V(e,t,s)||e.field===v||e.operator===N)return!1;const a=G(i,e.field);return(o??n)(e,{parseNumbers:y,fieldData:a})})).filter(Boolean);return 0!==t.length&&{bool:e.not?{must_not:"or"===e.combinator?{bool:{should:t}}:t}:{["or"===e.combinator?"should":"must"]:t}}},s=r(t);return!1===s?{}:s}return""}var oe={default:z,mongodb:E,cel:A,spel:D},se=e=>(t,r,n,o)=>oe[e]({field:t,operator:r,value:n,valueSource:o},{parseNumbers:!1}),ae=se("default"),ie=se("mongodb"),le=se("cel"),ue=se("spel"),ce=A,fe=E,pe=D},69255:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(a,{Immer:()=>X,applyPatches:()=>ae,castDraft:()=>ue,castImmutable:()=>ce,createDraft:()=>ie,current:()=>H,enableMapSet:()=>ee,enablePatches:()=>Z,finishDraft:()=>le,freeze:()=>j,immerable:()=>l,isDraft:()=>p,isDraftable:()=>h,nothing:()=>i,original:()=>g,produce:()=>re,produceWithPatches:()=>ne,setAutoFreeze:()=>oe,setUseStrictShallowCopy:()=>se}),e.exports=(t=a,((e,t,a,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of o(t))!s.call(e,l)&&l!==a&&r(e,l,{get:()=>t[l],enumerable:!(i=n(t,l))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=Symbol.for("immer-nothing"),l=Symbol.for("immer-draftable"),u=Symbol.for("immer-state");function c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var f=Object.getPrototypeOf;function p(e){return!!e&&!!e[u]}function h(e){return!!e&&(d(e)||Array.isArray(e)||!!e[l]||!!e.constructor?.[l]||N(e)||P(e))}var $=Object.prototype.constructor.toString();function d(e){if(!e||"object"!=typeof e)return!1;let t=f(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===$}function g(e){return p(e)||c(15),e[u].t}function b(e,t){0===y(e)?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function y(e){let t=e[u];return t?t.o:Array.isArray(e)?1:N(e)?2:P(e)?3:0}function m(e,t){return 2===y(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function v(e,t){return 2===y(e)?e.get(t):e[t]}function w(e,t,r){let n=y(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function N(e){return e instanceof Map}function P(e){return e instanceof Set}function S(e){return e.e||e.t}function W(e,t){if(N(e))return new Map(e);if(P(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&d(e))return f(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[u];let n=Reflect.ownKeys(r);for(let o=0;o<n.length;o++){let t=n[o],s=r[t];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[t]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[t]})}return Object.create(f(e),r)}function j(e,t=!1){return A(e)||p(e)||!h(e)||(y(e)>1&&(e.set=e.add=e.clear=e.delete=O),Object.freeze(e),t&&b(e,((e,t)=>j(t,!0)))),e}function O(){c(2)}function A(e){return Object.isFrozen(e)}var x,E={};function F(e){let t=E[e];return t||c(0),t}function C(e,t){E[e]||(E[e]=t)}function B(){return x}function D(e,t){t&&(F("Patches"),e.f=[],e.h=[],e.b=t)}function L(e){z(e),e.a.forEach(_),e.a=null}function z(e){e===x&&(x=e.i)}function M(e){return x=function(e,t){return{a:[],i:e,p:t,P:!0,d:0}}(x,e)}function _(e){let t=e[u];0===t.o||1===t.o?t.x():t.m=!0}function k(e,t){t.d=t.a.length;let r=t.a[0];return void 0!==e&&e!==r?(r[u].s&&(L(t),c(4)),h(e)&&(e=q(t,e),t.i||R(t,e)),t.f&&F("Patches").T(r[u].t,e,t.f,t.h)):e=q(t,r,[]),L(t),t.f&&t.b(t.f,t.h),e!==i?e:void 0}function q(e,t,r){if(A(t))return t;let n=t[u];if(!n)return b(t,((o,s)=>I(e,n,t,o,s,r))),t;if(n.n!==e)return t;if(!n.s)return R(e,n.t,!0),n.t;if(!n.c){n.c=!0,n.n.d--;let t=n.e,o=t,s=!1;3===n.o&&(o=new Set(t),t.clear(),s=!0),b(o,((o,a)=>I(e,n,t,o,a,r,s))),R(e,t,!1),r&&e.f&&F("Patches").g(n,r,e.f,e.h)}return n.e}function I(e,t,r,n,o,s,a){if(p(o)){let a=q(e,o,s&&t&&3!==t.o&&!m(t.r,n)?s.concat(n):void 0);if(w(r,n,a),!p(a))return;e.P=!1}else a&&r.add(o);if(h(o)&&!A(o)){if(!e.p.y&&e.d<1)return;q(e,o),(!t||!t.n.i)&&R(e,o)}}function R(e,t,r=!1){!e.i&&e.p.y&&e.P&&j(t,r)}var Q={get(e,t){if(t===u)return e;let r=S(e);if(!m(r,t))return function(e,t,r){let n=K(t,r);return n?"value"in n?n.value:n.get?.call(e.u):void 0}(e,r,t);let n=r[t];return e.c||!h(n)?n:n===T(e.t,t)?(J(e),e.e[t]=G(n,e)):n},has:(e,t)=>t in S(e),ownKeys:e=>Reflect.ownKeys(S(e)),set(e,t,r){let n=K(S(e),t);if(n?.set)return n.set.call(e.u,r),!0;if(!e.s){let n=T(S(e),t),o=n?.[u];if(o&&o.t===r)return e.e[t]=r,e.r[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||m(e.t,t)))return!0;J(e),U(e)}return e.e[t]===r&&(void 0!==r||t in e.e)||Number.isNaN(r)&&Number.isNaN(e.e[t])||(e.e[t]=r,e.r[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==T(e.t,t)||t in e.t?(e.r[t]=!1,J(e),U(e)):delete e.r[t],e.e&&delete e.e[t],!0),getOwnPropertyDescriptor(e,t){let r=S(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.o||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty(){c(11)},getPrototypeOf:e=>f(e.t),setPrototypeOf(){c(12)}},V={};function T(e,t){let r=e[u];return(r?S(r):e)[t]}function K(e,t){if(!(t in e))return;let r=f(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=f(r)}}function U(e){e.s||(e.s=!0,e.i&&U(e.i))}function J(e){e.e||(e.e=W(e.t,e.n.p.S))}b(Q,((e,t)=>{V[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),V.deleteProperty=function(e,t){return V.set.call(this,e,t,void 0)},V.set=function(e,t,r){return Q.set.call(this,e[0],t,r,e[0])};var X=class{constructor(e){this.y=!0,this.S=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let n=this;return function(e=r,...o){return n.produce(e,(e=>t.call(this,e,...o)))}}let n;if("function"!=typeof t&&c(6),void 0!==r&&"function"!=typeof r&&c(7),h(e)){let o=M(this),s=G(e,void 0),a=!0;try{n=t(s),a=!1}finally{a?L(o):z(o)}return D(o,r),k(n,o)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===i&&(n=void 0),this.y&&j(n,!0),r){let t=[],o=[];F("Patches").T(e,n,t,o),r(t,o)}return n}c(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){h(e)||c(8),p(e)&&(e=H(e));let t=M(this),r=G(e,void 0);return r[u].l=!0,z(t),r}finishDraft(e,t){let r=e&&e[u];(!r||!r.l)&&c(9);let{n:n}=r;return D(n,t),k(void 0,n)}setAutoFreeze(e){this.y=e}setUseStrictShallowCopy(e){this.S=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=F("Patches").A;return p(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function G(e,t){let r=N(e)?F("MapSet").I(e,t):P(e)?F("MapSet").D(e,t):function(e,t){let r=Array.isArray(e),n={o:r?1:0,n:t?t.n:B(),s:!1,c:!1,r:{},i:t,t:e,u:null,e:null,x:null,l:!1},o=n,s=Q;r&&(o=[n],s=V);let{revoke:a,proxy:i}=Proxy.revocable(o,s);return n.u=i,n.x=a,i}(e,t);return(t?t.n:B()).a.push(r),r}function H(e){return p(e)||c(10),Y(e)}function Y(e){if(!h(e)||A(e))return e;let t,r=e[u];if(r){if(!r.s)return r.t;r.c=!0,t=W(e,r.n.p.S)}else t=W(e,!0);return b(t,((e,r)=>{w(t,e,Y(r))})),r&&(r.c=!1),t}function Z(){let e="replace",t="add",r="remove";function n(e){if(!h(e))return e;if(Array.isArray(e))return e.map(n);if(N(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,n(t)])));if(P(e))return new Set(Array.from(e).map(n));let t=Object.create(f(e));for(let r in e)t[r]=n(e[r]);return m(e,l)&&(t[l]=e[l]),t}function o(e){return p(e)?n(e):e}C("Patches",{A:function(o,s){return s.forEach((s=>{let{path:a,op:i}=s,l=o;for(let e=0;e<a.length-1;e++){let t=y(l),r=a[e];"string"!=typeof r&&"number"!=typeof r&&(r=""+r),(0===t||1===t)&&("__proto__"===r||"constructor"===r)&&c(19),"function"==typeof l&&"prototype"===r&&c(19),l=v(l,r),"object"!=typeof l&&c(18,a.join("/"))}let u=y(l),f=n(s.value),p=a[a.length-1];switch(i){case e:switch(u){case 2:return l.set(p,f);case 3:c(16);default:return l[p]=f}case t:switch(u){case 1:return"-"===p?l.push(f):l.splice(p,0,f);case 2:return l.set(p,f);case 3:return l.add(f);default:return l[p]=f}case r:switch(u){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(s.value);default:return delete l[p]}default:c(17)}})),o},g:function(n,s,a,i){switch(n.o){case 0:case 2:return function(n,s,a,i){let{t:l,e:u}=n;b(n.r,((n,c)=>{let f=v(l,n),p=v(u,n),h=c?m(l,n)?e:t:r;if(f===p&&h===e)return;let $=s.concat(n);a.push(h===r?{op:h,path:$}:{op:h,path:$,value:p}),i.push(h===t?{op:r,path:$}:h===r?{op:t,path:$,value:o(f)}:{op:e,path:$,value:o(f)})}))}(n,s,a,i);case 1:return function(n,s,a,i){let{t:l,r:u}=n,c=n.e;c.length<l.length&&([l,c]=[c,l],[a,i]=[i,a]);for(let t=0;t<l.length;t++)if(u[t]&&c[t]!==l[t]){let r=s.concat([t]);a.push({op:e,path:r,value:o(c[t])}),i.push({op:e,path:r,value:o(l[t])})}for(let e=l.length;e<c.length;e++){let r=s.concat([e]);a.push({op:t,path:r,value:o(c[e])})}for(let e=c.length-1;l.length<=e;--e){let t=s.concat([e]);i.push({op:r,path:t})}}(n,s,a,i);case 3:return function(e,n,o,s){let{t:a,e:i}=e,l=0;a.forEach((e=>{if(!i.has(e)){let a=n.concat([l]);o.push({op:r,path:a,value:e}),s.unshift({op:t,path:a,value:e})}l++})),l=0,i.forEach((e=>{if(!a.has(e)){let a=n.concat([l]);o.push({op:t,path:a,value:e}),s.unshift({op:r,path:a,value:e})}l++}))}(n,s,a,i)}},T:function(t,r,n,o){n.push({op:e,path:[],value:r===i?void 0:r}),o.push({op:e,path:[],value:t})}})}function ee(){class e extends Map{constructor(e,t){super(),this[u]={o:2,i:t,n:t?t.n:B(),s:!1,c:!1,e:void 0,r:void 0,t:e,u:this,l:!1,m:!1}}get size(){return S(this[u]).size}has(e){return S(this[u]).has(e)}set(e,r){let n=this[u];return o(n),(!S(n).has(e)||S(n).get(e)!==r)&&(t(n),U(n),n.r.set(e,!0),n.e.set(e,r),n.r.set(e,!0)),this}delete(e){if(!this.has(e))return!1;let r=this[u];return o(r),t(r),U(r),r.t.has(e)?r.r.set(e,!1):r.r.delete(e),r.e.delete(e),!0}clear(){let e=this[u];o(e),S(e).size&&(t(e),U(e),e.r=new Map,b(e.t,(t=>{e.r.set(t,!1)})),e.e.clear())}forEach(e,t){S(this[u]).forEach(((r,n,o)=>{e.call(t,this.get(n),n,this)}))}get(e){let r=this[u];o(r);let n=S(r).get(e);if(r.c||!h(n)||n!==r.t.get(e))return n;let s=G(n,r);return t(r),r.e.set(e,s),s}keys(){return S(this[u]).keys()}values(){let e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}}entries(){let e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let r=this.get(t.value);return{done:!1,value:[t.value,r]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.e||(e.r=new Map,e.e=new Map(e.t))}class r extends Set{constructor(e,t){super(),this[u]={o:3,i:t,n:t?t.n:B(),s:!1,c:!1,e:void 0,t:e,u:this,a:new Map,m:!1,l:!1}}get size(){return S(this[u]).size}has(e){let t=this[u];return o(t),t.e?!!(t.e.has(e)||t.a.has(e)&&t.e.has(t.a.get(e))):t.t.has(e)}add(e){let t=this[u];return o(t),this.has(e)||(n(t),U(t),t.e.add(e)),this}delete(e){if(!this.has(e))return!1;let t=this[u];return o(t),n(t),U(t),t.e.delete(e)||!!t.a.has(e)&&t.e.delete(t.a.get(e))}clear(){let e=this[u];o(e),S(e).size&&(n(e),U(e),e.e.clear())}values(){let e=this[u];return o(e),n(e),e.e.values()}entries(){let e=this[u];return o(e),n(e),e.e.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){let r=this.values(),n=r.next();for(;!n.done;)e.call(t,n.value,n.value,this),n=r.next()}}function n(e){e.e||(e.e=new Set,e.t.forEach((t=>{if(h(t)){let r=G(t,e);e.a.set(t,r),e.e.add(r)}else e.e.add(t)})))}function o(e){e.m&&c(3,JSON.stringify(S(e)))}C("MapSet",{I:function(t,r){return new e(t,r)},D:function(e,t){return new r(e,t)}})}var te=new X,re=te.produce,ne=te.produceWithPatches.bind(te),oe=te.setAutoFreeze.bind(te),se=te.setUseStrictShallowCopy.bind(te),ae=te.applyPatches.bind(te),ie=te.createDraft.bind(te),le=te.finishDraft.bind(te);function ue(e){return e}function ce(e){return e}},86373:(e,t,r)=>{e.exports=r(69255)}}]);