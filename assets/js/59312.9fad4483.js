"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[59312],{90488:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(s,{Immer:()=>J,applyPatches:()=>se,castDraft:()=>ue,castImmutable:()=>ce,createDraft:()=>ie,current:()=>H,enableMapSet:()=>ee,enablePatches:()=>Z,finishDraft:()=>le,freeze:()=>P,immerable:()=>l,isDraft:()=>p,isDraftable:()=>d,nothing:()=>i,original:()=>m,produce:()=>re,produceWithPatches:()=>ne,setAutoFreeze:()=>ae,setUseStrictShallowCopy:()=>oe}),e.exports=(t=s,((e,t,s,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))!o.call(e,l)&&l!==s&&r(e,l,{get:()=>t[l],enumerable:!(i=n(t,l))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i=Symbol.for("immer-nothing"),l=Symbol.for("immer-draftable"),u=Symbol.for("immer-state");function c(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var f=Object.getPrototypeOf;function p(e){return!!e&&!!e[u]}function d(e){return!!e&&($(e)||Array.isArray(e)||!!e[l]||!!e.constructor?.[l]||w(e)||O(e))}var h=Object.prototype.constructor.toString();function $(e){if(!e||"object"!=typeof e)return!1;let t=f(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===h}function m(e){return p(e)||c(15),e[u].t}function b(e,t){0===g(e)?Reflect.ownKeys(e).forEach((r=>{t(r,e[r],e)})):e.forEach(((r,n)=>t(n,r,e)))}function g(e){let t=e[u];return t?t.o:Array.isArray(e)?1:w(e)?2:O(e)?3:0}function v(e,t){return 2===g(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){return 2===g(e)?e.get(t):e[t]}function N(e,t,r){let n=g(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function w(e){return e instanceof Map}function O(e){return e instanceof Set}function S(e){return e.e||e.t}function I(e,t){if(w(e))return new Map(e);if(O(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=$(e);if(!0===t||"class_only"===t&&!r){let t=Object.getOwnPropertyDescriptors(e);delete t[u];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){let a=r[n],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(f(e),t)}{let t=f(e);if(null!==t&&r)return{...e};let n=Object.create(t);return Object.assign(n,e)}}function P(e,t=!1){return j(e)||p(e)||!d(e)||(g(e)>1&&(e.set=e.add=e.clear=e.delete=W),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>P(t,!0)))),e}function W(){c(2)}function j(e){return Object.isFrozen(e)}var x,C={};function A(e){let t=C[e];return t||c(0),t}function q(e,t){C[e]||(C[e]=t)}function D(){return x}function E(e,t){t&&(A("Patches"),e.f=[],e.h=[],e.b=t)}function F(e){V(e),e.a.forEach(_),e.a=null}function V(e){e===x&&(x=e.i)}function M(e){return x=function(e,t){return{a:[],i:e,p:t,P:!0,d:0}}(x,e)}function _(e){let t=e[u];0===t.o||1===t.o?t.x():t.m=!0}function B(e,t){t.d=t.a.length;let r=t.a[0];return void 0!==e&&e!==r?(r[u].s&&(F(t),c(4)),d(e)&&(e=L(t,e),t.i||R(t,e)),t.f&&A("Patches").T(r[u].t,e,t.f,t.h)):e=L(t,r,[]),F(t),t.f&&t.b(t.f,t.h),e!==i?e:void 0}function L(e,t,r){if(j(t))return t;let n=t[u];if(!n)return b(t,((a,o)=>X(e,n,t,a,o,r))),t;if(n.n!==e)return t;if(!n.s)return R(e,n.t,!0),n.t;if(!n.c){n.c=!0,n.n.d--;let t=n.e,a=t,o=!1;3===n.o&&(a=new Set(t),t.clear(),o=!0),b(a,((a,s)=>X(e,n,t,a,s,r,o))),R(e,t,!1),r&&e.f&&A("Patches").g(n,r,e.f,e.h)}return n.e}function X(e,t,r,n,a,o,s){if(p(a)){let s=L(e,a,o&&t&&3!==t.o&&!v(t.r,n)?o.concat(n):void 0);if(N(r,n,s),!p(s))return;e.P=!1}else s&&r.add(a);if(d(a)&&!j(a)){if(!e.p.y&&e.d<1)return;L(e,a),(!t||!t.n.i)&&"symbol"!=typeof n&&Object.prototype.propertyIsEnumerable.call(r,n)&&R(e,a)}}function R(e,t,r=!1){!e.i&&e.p.y&&e.P&&P(t,r)}var k={get(e,t){if(t===u)return e;let r=S(e);if(!v(r,t))return function(e,t,r){let n=T(t,r);return n?"value"in n?n.value:n.get?.call(e.u):void 0}(e,r,t);let n=r[t];return e.c||!d(n)?n:n===Q(e.t,t)?(K(e),e.e[t]=G(n,e)):n},has:(e,t)=>t in S(e),ownKeys:e=>Reflect.ownKeys(S(e)),set(e,t,r){let n=T(S(e),t);if(n?.set)return n.set.call(e.u,r),!0;if(!e.s){let n=Q(S(e),t),a=n?.[u];if(a&&a.t===r)return e.e[t]=r,e.r[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||v(e.t,t)))return!0;K(e),U(e)}return e.e[t]===r&&(void 0!==r||t in e.e)||Number.isNaN(r)&&Number.isNaN(e.e[t])||(e.e[t]=r,e.r[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Q(e.t,t)||t in e.t?(e.r[t]=!1,K(e),U(e)):delete e.r[t],e.e&&delete e.e[t],!0),getOwnPropertyDescriptor(e,t){let r=S(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.o||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty(){c(11)},getPrototypeOf:e=>f(e.t),setPrototypeOf(){c(12)}},z={};function Q(e,t){let r=e[u];return(r?S(r):e)[t]}function T(e,t){if(!(t in e))return;let r=f(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=f(r)}}function U(e){e.s||(e.s=!0,e.i&&U(e.i))}function K(e){e.e||(e.e=I(e.t,e.n.p.S))}b(k,((e,t)=>{z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),z.deleteProperty=function(e,t){return z.set.call(this,e,t,void 0)},z.set=function(e,t,r){return k.set.call(this,e[0],t,r,e[0])};var J=class{constructor(e){this.y=!0,this.S=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&c(6),void 0!==r&&"function"!=typeof r&&c(7),d(e)){let a=M(this),o=G(e,void 0),s=!0;try{n=t(o),s=!1}finally{s?F(a):V(a)}return E(a,r),B(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===i&&(n=void 0),this.y&&P(n,!0),r){let t=[],a=[];A("Patches").T(e,n,t,a),r(t,a)}return n}c(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){d(e)||c(8),p(e)&&(e=H(e));let t=M(this),r=G(e,void 0);return r[u].l=!0,V(t),r}finishDraft(e,t){let r=e&&e[u];(!r||!r.l)&&c(9);let{n:n}=r;return E(n,t),B(void 0,n)}setAutoFreeze(e){this.y=e}setUseStrictShallowCopy(e){this.S=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=A("Patches").A;return p(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function G(e,t){let r=w(e)?A("MapSet").I(e,t):O(e)?A("MapSet").D(e,t):function(e,t){let r=Array.isArray(e),n={o:r?1:0,n:t?t.n:D(),s:!1,c:!1,r:{},i:t,t:e,u:null,e:null,x:null,l:!1},a=n,o=k;r&&(a=[n],o=z);let{revoke:s,proxy:i}=Proxy.revocable(a,o);return n.u=i,n.x=s,i}(e,t);return(t?t.n:D()).a.push(r),r}function H(e){return p(e)||c(10),Y(e)}function Y(e){if(!d(e)||j(e))return e;let t,r=e[u];if(r){if(!r.s)return r.t;r.c=!0,t=I(e,r.n.p.S)}else t=I(e,!0);return b(t,((e,r)=>{N(t,e,Y(r))})),r&&(r.c=!1),t}function Z(){let e="replace",t="add",r="remove";function n(e){if(!d(e))return e;if(Array.isArray(e))return e.map(n);if(w(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,n(t)])));if(O(e))return new Set(Array.from(e).map(n));let t=Object.create(f(e));for(let r in e)t[r]=n(e[r]);return v(e,l)&&(t[l]=e[l]),t}function a(e){return p(e)?n(e):e}q("Patches",{A:function(a,o){return o.forEach((o=>{let{path:s,op:i}=o,l=a;for(let e=0;e<s.length-1;e++){let t=g(l),r=s[e];"string"!=typeof r&&"number"!=typeof r&&(r=""+r),(0===t||1===t)&&("__proto__"===r||"constructor"===r)&&c(19),"function"==typeof l&&"prototype"===r&&c(19),l=y(l,r),"object"!=typeof l&&c(18,s.join("/"))}let u=g(l),f=n(o.value),p=s[s.length-1];switch(i){case e:switch(u){case 2:return l.set(p,f);case 3:c(16);default:return l[p]=f}case t:switch(u){case 1:return"-"===p?l.push(f):l.splice(p,0,f);case 2:return l.set(p,f);case 3:return l.add(f);default:return l[p]=f}case r:switch(u){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(o.value);default:return delete l[p]}default:c(17)}})),a},g:function(n,o,s,i){switch(n.o){case 0:case 2:return function(n,o,s,i){let{t:l,e:u}=n;b(n.r,((n,c)=>{let f=y(l,n),p=y(u,n),d=c?v(l,n)?e:t:r;if(f===p&&d===e)return;let h=o.concat(n);s.push(d===r?{op:d,path:h}:{op:d,path:h,value:p}),i.push(d===t?{op:r,path:h}:d===r?{op:t,path:h,value:a(f)}:{op:e,path:h,value:a(f)})}))}(n,o,s,i);case 1:return function(n,o,s,i){let{t:l,r:u}=n,c=n.e;c.length<l.length&&([l,c]=[c,l],[s,i]=[i,s]);for(let t=0;t<l.length;t++)if(u[t]&&c[t]!==l[t]){let r=o.concat([t]);s.push({op:e,path:r,value:a(c[t])}),i.push({op:e,path:r,value:a(l[t])})}for(let e=l.length;e<c.length;e++){let r=o.concat([e]);s.push({op:t,path:r,value:a(c[e])})}for(let e=c.length-1;l.length<=e;--e){let t=o.concat([e]);i.push({op:r,path:t})}}(n,o,s,i);case 3:return function(e,n,a,o){let{t:s,e:i}=e,l=0;s.forEach((e=>{if(!i.has(e)){let s=n.concat([l]);a.push({op:r,path:s,value:e}),o.unshift({op:t,path:s,value:e})}l++})),l=0,i.forEach((e=>{if(!s.has(e)){let s=n.concat([l]);a.push({op:t,path:s,value:e}),o.unshift({op:r,path:s,value:e})}l++}))}(n,o,s,i)}},T:function(t,r,n,a){n.push({op:e,path:[],value:r===i?void 0:r}),a.push({op:e,path:[],value:t})}})}function ee(){class e extends Map{constructor(e,t){super(),this[u]={o:2,i:t,n:t?t.n:D(),s:!1,c:!1,e:void 0,r:void 0,t:e,u:this,l:!1,m:!1}}get size(){return S(this[u]).size}has(e){return S(this[u]).has(e)}set(e,r){let n=this[u];return a(n),(!S(n).has(e)||S(n).get(e)!==r)&&(t(n),U(n),n.r.set(e,!0),n.e.set(e,r),n.r.set(e,!0)),this}delete(e){if(!this.has(e))return!1;let r=this[u];return a(r),t(r),U(r),r.t.has(e)?r.r.set(e,!1):r.r.delete(e),r.e.delete(e),!0}clear(){let e=this[u];a(e),S(e).size&&(t(e),U(e),e.r=new Map,b(e.t,(t=>{e.r.set(t,!1)})),e.e.clear())}forEach(e,t){S(this[u]).forEach(((r,n,a)=>{e.call(t,this.get(n),n,this)}))}get(e){let r=this[u];a(r);let n=S(r).get(e);if(r.c||!d(n)||n!==r.t.get(e))return n;let o=G(n,r);return t(r),r.e.set(e,o),o}keys(){return S(this[u]).keys()}values(){let e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}}entries(){let e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let r=this.get(t.value);return{done:!1,value:[t.value,r]}}}}[Symbol.iterator](){return this.entries()}}function t(e){e.e||(e.r=new Map,e.e=new Map(e.t))}class r extends Set{constructor(e,t){super(),this[u]={o:3,i:t,n:t?t.n:D(),s:!1,c:!1,e:void 0,t:e,u:this,a:new Map,m:!1,l:!1}}get size(){return S(this[u]).size}has(e){let t=this[u];return a(t),t.e?!!(t.e.has(e)||t.a.has(e)&&t.e.has(t.a.get(e))):t.t.has(e)}add(e){let t=this[u];return a(t),this.has(e)||(n(t),U(t),t.e.add(e)),this}delete(e){if(!this.has(e))return!1;let t=this[u];return a(t),n(t),U(t),t.e.delete(e)||!!t.a.has(e)&&t.e.delete(t.a.get(e))}clear(){let e=this[u];a(e),S(e).size&&(n(e),U(e),e.e.clear())}values(){let e=this[u];return a(e),n(e),e.e.values()}entries(){let e=this[u];return a(e),n(e),e.e.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){let r=this.values(),n=r.next();for(;!n.done;)e.call(t,n.value,n.value,this),n=r.next()}}function n(e){e.e||(e.e=new Set,e.t.forEach((t=>{if(d(t)){let r=G(t,e);e.a.set(t,r),e.e.add(r)}else e.e.add(t)})))}function a(e){e.m&&c(3,JSON.stringify(S(e)))}q("MapSet",{I:function(t,r){return new e(t,r)},D:function(e,t){return new r(e,t)}})}var te=new J,re=te.produce,ne=te.produceWithPatches.bind(te),ae=te.setAutoFreeze.bind(te),oe=te.setUseStrictShallowCopy.bind(te),se=te.applyPatches.bind(te),ie=te.createDraft.bind(te),le=te.finishDraft.bind(te);function ue(e){return e}function ce(e){return e}},67267:(e,t,r)=>{e.exports=r(90488)},34362:(e,t,r)=>{e.exports=r(31062)},31062:e=>{var t,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,s={};((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(s,{defaultOptions:()=>$,numericQuantity:()=>g,numericRegex:()=>l,numericRegexWithTrailingInvalid:()=>u,parseRomanNumerals:()=>m,romanNumeralRegex:()=>h,romanNumeralUnicodeRegex:()=>d,romanNumeralUnicodeToAsciiMap:()=>p,romanNumeralValues:()=>f,vulgarFractionToAsciiMap:()=>i,vulgarFractionsRegex:()=>c}),e.exports=(t=s,((e,t,s,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))!o.call(e,l)&&l!==s&&r(e,l,{get:()=>t[l],enumerable:!(i=n(t,l))||i.enumerable});return e})(r({},"__esModule",{value:!0}),t));var i={"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4","\u2150":"1/7","\u2151":"1/9","\u2152":"1/10","\u2153":"1/3","\u2154":"2/3","\u2155":"1/5","\u2156":"2/5","\u2157":"3/5","\u2158":"4/5","\u2159":"1/6","\u215a":"5/6","\u215b":"1/8","\u215c":"3/8","\u215d":"5/8","\u215e":"7/8","\u215f":"1/"},l=/^(?=-?\s*\.\d|-?\s*\d)(-)?\s*((?:\d(?:[\d,_]*\d)?)*)(([eE][+-]?\d(?:[\d,_]*\d)?)?|\.\d(?:[\d,_]*\d)?([eE][+-]?\d(?:[\d,_]*\d)?)?|(\s+\d(?:[\d,_]*\d)?\s*)?\s*\/\s*\d(?:[\d,_]*\d)?)?$/,u=new RegExp(l.source.replace(/\$$/,"(?:\\s*[^\\.\\d\\/].*)?")),c=new RegExp(`(${Object.keys(i).join("|")})`),f={MMM:3e3,MM:2e3,M:1e3,CM:900,DCCC:800,DCC:700,DC:600,D:500,CD:400,CCC:300,CC:200,C:100,XC:90,LXXX:80,LXX:70,LX:60,L:50,XL:40,XXX:30,XX:20,XII:12,XI:11,X:10,IX:9,VIII:8,VII:7,VI:6,V:5,IV:4,III:3,II:2,I:1},p={"\u2160":"I","\u2161":"II","\u2162":"III","\u2163":"IV","\u2164":"V","\u2165":"VI","\u2166":"VII","\u2167":"VIII","\u2168":"IX","\u2169":"X","\u216a":"XI","\u216b":"XII","\u216c":"L","\u216d":"C","\u216e":"D","\u216f":"M","\u2170":"I","\u2171":"II","\u2172":"III","\u2173":"IV","\u2174":"V","\u2175":"VI","\u2176":"VII","\u2177":"VIII","\u2178":"IX","\u2179":"X","\u217a":"XI","\u217b":"XII","\u217c":"L","\u217d":"C","\u217e":"D","\u217f":"M"},d=new RegExp(`(${Object.keys(p).join("|")})`,"gi"),h=/^(?=[MDCLXVI])(M{0,3})(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i,$={round:3,allowTrailingInvalid:!1,romanNumerals:!1},m=e=>{let t=`${e}`.replace(d,((e,t)=>p[t])).toUpperCase(),r=h.exec(t);if(!r)return NaN;let[,n,a,o,s]=r;return(f[n]??0)+(f[a]??0)+(f[o]??0)+(f[s]??0)},b=/^\s*\//,g=(e,t=$)=>{if("number"==typeof e||"bigint"==typeof e)return e;let r=NaN,n=`${e}`.replace(c,((e,t)=>` ${i[t]}`)).replace("\u2044","/").trim();if(0===n.length)return NaN;let a={...$,...t},o=(a.allowTrailingInvalid?u:l).exec(n);if(!o)return a.romanNumerals?m(n):NaN;let[,s,f,p]=o,d=f.replace(/[,_]/g,""),h=null==p?void 0:p.replace(/[,_]/g,"");if(r=!d&&h&&h.startsWith(".")?0:parseInt(d),!h)return s?-1*r:r;let g=!1===a.round?NaN:parseFloat(`1e${Math.floor(Math.max(0,a.round))}`);if(h.startsWith(".")||h.startsWith("e")||h.startsWith("E")){let e=parseFloat(`${r}${h}`);r=isNaN(g)?e:Math.round(e*g)/g}else if(b.test(h)){let e=parseInt(d),t=parseInt(h.replace("/",""));r=isNaN(g)?e/t:Math.round(e*g/t)/g}else{let e=h.split("/"),[t,n]=e.map((e=>parseInt(e)));r+=isNaN(g)?t/n:Math.round(t*g/n)/g}return s?-1*r:r}},59312:(e,t,r)=>{function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){n(e,t,r[t])}))}return e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}var s,i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,f={};((e,t)=>{for(var r in t)i(e,r,{get:t[r],enumerable:!0})})(f,{celCombinatorMap:()=>P,defaultCELValueProcessor:()=>Ce,defaultMongoDBValueProcessor:()=>xe,defaultRuleProcessorCEL:()=>M,defaultRuleProcessorElasticSearch:()=>G,defaultRuleProcessorJSONata:()=>te,defaultRuleProcessorJsonLogic:()=>ae,defaultRuleProcessorMongoDB:()=>B,defaultRuleProcessorParameterized:()=>oe,defaultRuleProcessorSQL:()=>se,defaultRuleProcessorSpEL:()=>k,defaultSpELValueProcessor:()=>Ae,defaultValueProcessor:()=>je,defaultValueProcessorByRule:()=>z,defaultValueProcessorCELByRule:()=>qe,defaultValueProcessorMongoDBByRule:()=>De,defaultValueProcessorSpELByRule:()=>Ee,formatQuery:()=>Ie,getQuoteFieldNamesWithArray:()=>q,getQuotedFieldName:()=>D,isValidValue:()=>x,isValueProcessorLegacy:()=>A,jsonLogicAdditionalOperators:()=>W,mapSQLOperator:()=>S,mongoOperators:()=>I,nullOrUndefinedOrEmpty:()=>E,numerifyValues:()=>j,shouldRenderAsNumber:()=>C}),e.exports=(s=f,((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of u(t))c.call(e,a)||a===r||i(e,a,{get:()=>t[a],enumerable:!(n=l(t,a))||n.enumerable});return e})(i({},"__esModule",{value:!0}),s));var p="~",d="~",h=(e,t=",")=>"string"==typeof e?e.split(`\\${t}`).map((e=>e.split(t))).reduce(((e,r,n)=>0===n?r:[...e.slice(0,-1),`${e.at(-1)}${t}${r[0]}`,...r.slice(1)]),[]):[],$=e=>"string"==typeof e?e.trim():e,m=(e,{retainEmptyStrings:t}={})=>Array.isArray(e)?e.map((e=>$(e))):"string"==typeof e?h(e,",").filter(t?()=>!0:e=>!/^\s*$/.test(e)).map((e=>e.trim())):"number"==typeof e?[e]:[],b=r(34362),g=(e,{parseNumbers:t}={})=>{if(!t||"bigint"==typeof e||"number"==typeof e)return e;if("native"===t)return parseFloat(e);const r=(0,b.numericQuantity)(e,{allowTrailingInvalid:"enhanced"===t,romanNumerals:!1,round:!1});return isNaN(r)?e:r},v=r(34362),y=new RegExp(v.numericRegex.source.replace(/^\^/,String.raw`^\s*`).replace(/\$$/,String.raw`\s*$`)),N=e=>null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype,w=e=>N(e)&&Array.isArray(e.rules),O=e=>w(e)&&"string"==typeof e.combinator,S=e=>{switch(e.toLowerCase()){case"null":return"is null";case"notnull":return"is not null";case"notin":return"not in";case"notbetween":return"not between";case"contains":case"beginswith":case"endswith":return"like";case"doesnotcontain":case"doesnotbeginwith":case"doesnotendwith":return"not like";default:return e}},I={"=":"$eq","!=":"$ne","<":"$lt","<=":"$lte",">":"$gt",">=":"$gte",in:"$in",notIn:"$nin"},P={and:"&&",or:"||"},W={startsWith:(e,t)=>"string"==typeof e&&e.startsWith(t),endsWith:(e,t)=>"string"==typeof e&&e.endsWith(t)},j=e=>o(a({},e),{rules:e.rules.map((e=>{if("string"==typeof e)return e;if(w(e))return j(e);if(Array.isArray(e.value))return o(a({},e),{value:e.value.map((e=>g(e,{parseNumbers:!0})))});const t=m(e.value,{retainEmptyStrings:!0}).map((e=>g(e,{parseNumbers:!0})));if(t.every((e=>"number"==typeof e))){if(t.length>1)return o(a({},e),{value:t});if(1===t.length)return o(a({},e),{value:t[0]})}return e}))}),x=e=>"string"==typeof e&&e.length>0||"number"==typeof e&&!isNaN(e)||"string"!=typeof e&&"number"!=typeof e,C=(e,t)=>!!t&&("number"==typeof e||"bigint"==typeof e||"string"==typeof e&&y.test(e)),A=e=>e.length>=3,q=(e=["",""])=>Array.isArray(e)?e:"string"==typeof e?[e,e]:null!=e?e:["",""],D=(e,{quoteFieldNamesWith:t,fieldIdentifierSeparator:r})=>{const[n,a]=q(t);return"string"==typeof r&&r.length>0?((e,t=",")=>e.map((e=>`${null!=e?e:""}`.replaceAll(t[0],`\\${t[0]}`))).join(t))(h(e,r).map((e=>`${n}${e}${a}`)),r):`${n}${e}${a}`},E=e=>null==e||""===e,F=e=>/^(does)?not/i.test(e),V=(e,t)=>"string"==typeof e&&t?e.replaceAll('"','\\"'):e,M=({field:e,operator:t,value:r,valueSource:n},{escapeQuotes:a,parseNumbers:o}={})=>{const s="field"===n,i=t.replace(/^=$/,"=="),l="number"==typeof r||"boolean"==typeof r||"bigint"==typeof r||C(r,o);switch(i){case"<":case"<=":case"==":case"!=":case">":case">=":return`${e} ${i} ${s||l?$(r):`"${V(r,a)}"`}`;case"contains":case"doesNotContain":return`${F(i)?"!":""}${e}.contains(${s?$(r):`"${V(r,a)}"`})`;case"beginsWith":case"doesNotBeginWith":return`${F(i)?"!":""}${e}.startsWith(${s?$(r):`"${V(r,a)}"`})`;case"endsWith":case"doesNotEndWith":return`${F(i)?"!":""}${e}.endsWith(${s?$(r):`"${V(r,a)}"`})`;case"null":return`${e} == null`;case"notNull":return`${e} != null`;case"in":case"notIn":{const t=F(i);return`${t?"!(":""}${e} in [${m(r).map((e=>s||C(e,o)?`${$(e)}`:`"${V(e,a)}"`)).join(", ")}]${t?")":""}`}case"between":case"notBetween":{const n=m(r);if(n.length>=2&&!E(n[0])&&!E(n[1])){const[r,o]=n,i=C(r,!0)?g(r,{parseNumbers:!0}):NaN,l=C(o,!0)?g(o,{parseNumbers:!0}):NaN;let u=isNaN(i)?s?`${r}`:`"${V(r,a)}"`:i,c=isNaN(l)?s?`${o}`:`"${V(o,a)}"`:l;if(u===i&&c===l&&l<i){c=i,u=l}return"between"===t?`(${e} >= ${u} && ${e} <= ${c})`:`(${e} < ${u} || ${e} > ${c})`}return""}}return""},_=JSON.stringify,B=({field:e,operator:t,value:r,valueSource:n},{parseNumbers:a}={})=>{const o="field"===n;if("="===t&&!o)return _({[e]:C(r,a)?g(r,{parseNumbers:"strict"}):r});switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":{const n=I[t];return _(o?{$expr:{[n]:[`$${e}`,`$${r}`]}}:{[e]:{[n]:C(r,a)?g(r,{parseNumbers:"strict"}):r}})}case"contains":return _(o?{$where:`this.${e}.includes(this.${r})`}:{[e]:{$regex:r}});case"beginsWith":return _(o?{$where:`this.${e}.startsWith(this.${r})`}:{[e]:{$regex:`^${r}`}});case"endsWith":return _(o?{$where:`this.${e}.endsWith(this.${r})`}:{[e]:{$regex:`${r}$`}});case"doesNotContain":return _(o?{$where:`!this.${e}.includes(this.${r})`}:{[e]:{$not:{$regex:r}}});case"doesNotBeginWith":return _(o?{$where:`!this.${e}.startsWith(this.${r})`}:{[e]:{$not:{$regex:`^${r}`}}});case"doesNotEndWith":return _(o?{$where:`!this.${e}.endsWith(this.${r})`}:{[e]:{$not:{$regex:`${r}$`}}});case"null":return _({[e]:null});case"notNull":return _({[e]:{$ne:null}});case"in":case"notIn":{const n=m(r);return _(o?{$where:`${"notIn"===t?"!":""}[${n.map((e=>`this.${e}`)).join(",")}].includes(this.${e})`}:{[e]:{[I[t]]:n.map((e=>C(e,a)?g(e,{parseNumbers:"strict"}):e))}})}case"between":case"notBetween":{const n=m(r);if(n.length>=2&&x(n[0])&&x(n[1])){const[r,a]=n,s=C(r,!0)?g(r,{parseNumbers:"strict"}):NaN,i=C(a,!0)?g(a,{parseNumbers:"strict"}):NaN,l=o||isNaN(s)?r:s,u=o||isNaN(i)?a:i;return _("between"===t?o?{$and:[{$expr:{$gte:[`$${e}`,`$${l}`]}},{$expr:{$lte:[`$${e}`,`$${u}`]}}]}:{[e]:{$gte:l,$lte:u}}:o?{$or:[{$expr:{$lt:[`$${e}`,`$${l}`]}},{$expr:{$gt:[`$${e}`,`$${u}`]}}]}:{$or:[{[e]:{$lt:l}},{[e]:{$gt:u}}]})}return""}}return""},L=e=>/^(does)?not/i.test(e),X=(e,t)=>t?`!(${e})`:`${e}`,R=(e,t)=>"string"==typeof e&&t?e.replaceAll("'","\\'"):e,k=({field:e,operator:t,value:r,valueSource:n},{escapeQuotes:a,parseNumbers:o}={})=>{const s="field"===n,i=t.replace(/^=$/,"=="),l="number"==typeof r||"boolean"==typeof r||"bigint"==typeof r||C(r,o);switch(i){case"<":case"<=":case"==":case"!=":case">":case">=":return`${e} ${i} ${s||l?$(r):`'${R(r,a)}'`}`;case"contains":case"doesNotContain":return X(`${e} matches ${s||l?$(r):`'${R(r,a)}'`}`,L(i));case"beginsWith":case"doesNotBeginWith":{const t=s?`'^'.concat(${$(r)})`:`'${"string"==typeof r&&!r.startsWith("^")||l?"^":""}${R(r,a)}'`;return X(`${e} matches ${t}`,L(i))}case"endsWith":case"doesNotEndWith":{const t=s?`${$(r)}.concat('$')`:`'${R(r,a)}${"string"==typeof r&&!r.endsWith("$")||l?"$":""}'`;return X(`${e} matches ${t}`,L(i))}case"null":return`${e} == null`;case"notNull":return`${e} != null`;case"in":case"notIn":{const t=L(i)?"!":"",n=m(r);return n.length>0?`${t}(${n.map((t=>`${e} == ${s||C(t,o)?`${$(t)}`:`'${R(t,a)}'`}`)).join(" or ")})`:""}case"between":case"notBetween":{const n=m(r);if(n.length>=2&&!E(n[0])&&!E(n[1])){const[r,o]=n,i=C(r,!0)?g(r,{parseNumbers:!0}):NaN,l=C(o,!0)?g(o,{parseNumbers:!0}):NaN;let u=isNaN(i)?s?`${r}`:`'${R(r,a)}'`:i,c=isNaN(l)?s?`${o}`:`'${R(o,a)}'`:l;if(u===i&&c===l&&l<i){c=i,u=l}return"between"===t?`(${e} >= ${u} and ${e} <= ${c})`:`(${e} < ${u} or ${e} > ${c})`}return""}}return""},z=({operator:e,value:t,valueSource:r},{escapeQuotes:n,parseNumbers:a,quoteFieldNamesWith:o,quoteValuesWith:s,concatOperator:i="||",fieldIdentifierSeparator:l}={})=>{const u="field"===r,c=e.toLowerCase(),f=s||"'",p=e=>`${f}${e}${f}`,d=e=>((e,t,r)=>r&&"string"==typeof e?e.replaceAll(`${t}`,`${t}${t}`):e)(e,f,n),h=e=>p(d(e)),b=e=>D(e,{quoteFieldNamesWith:o,fieldIdentifierSeparator:l}),v=(...e)=>"CONCAT"===i.toUpperCase()?`CONCAT(${e.join(", ")})`:e.join(` ${i} `);switch(c){case"null":case"notnull":return"";case"in":case"notin":{const e=m(t);return e.length>0?`(${e.map((e=>u?b(e):C(e,a)?`${$(e)}`:`${h(e)}`)).join(", ")})`:""}case"between":case"notbetween":{const e=m(t,{retainEmptyStrings:!0});if(e.length>=2&&x(e[0])&&x(e[1])){const[t,r]=e,n=C(t,a)?g(t,{parseNumbers:"strict"}):NaN,o=C(r,a)?g(r,{parseNumbers:"strict"}):NaN,s=isNaN(n)?u?`${t}`:t:n,i=isNaN(o)?u?`${r}`:r:o,l=[s,i];return s===n&&i===o&&o<n&&(l[0]=o,l[1]=n),(u?l.map((e=>b(e))):l.every((e=>C(e,a)))?l.map((e=>g(e,{parseNumbers:"strict"}))):l.map((e=>h(e)))).join(" and ")}return""}case"contains":case"doesnotcontain":return u?v(p("%"),b(t),p("%")):p(`%${d(t)}%`);case"beginswith":case"doesnotbeginwith":return u?v(b(t),p("%")):p(`${d(t)}%`);case"endswith":case"doesnotendwith":return u?v(p("%"),b(t)):p(`%${d(t)}`)}return"boolean"==typeof t?t?"TRUE":"FALSE":u?b(t):C(t,a)?`${$(t)}`:`${h(t)}`},Q={"<":"lt","<=":"lte",">":"gt",">=":"gte"},T=(e,t)=>/^(does)?not/i.test(e)?{bool:{must_not:t}}:t,U=e=>null==e?void 0:e.replace(/('|\\)/g,"\\$1"),K={beginsWith:"startsWith",doesNotContain:"contains",doesNotBeginWith:"startsWith",doesNotEndWith:"endsWith"},J=(e,t)=>"boolean"==typeof e?e:C(e,t)?g(e,{parseNumbers:t}):e,G=({field:e,operator:t,value:r,valueSource:n},{parseNumbers:a}={})=>{if("field"===n){if(m(r).some((e=>"string"!=typeof e)))return!1;const n=U(e);switch(t){case"=":case"!=":case">":case">=":case"<":case"<=":{const e="="===t?"==":t,a=U(r);return!!a&&{bool:{filter:{script:{script:`doc['${n}'] ${e} doc['${a}']`}}}}}case"in":case"notIn":{const e=m(r);if(e.length>0){const r=e.map((e=>({bool:{filter:{script:{script:`doc['${n}'] == doc['${e}']`}}}})));return{bool:"in"===t?{should:r}:{must_not:r}}}return!1}case"between":case"notBetween":{const e=m(r);if(e.length>=2&&e[0]&&e[1]){const r=`doc['${n}'] >= doc['${e[0]}'] && doc['${n}'] <= doc['${e[1]}']`;return{bool:{filter:{script:{script:"notBetween"===t?`!(${r})`:r}}}}}return!1}case"contains":case"doesNotContain":case"beginsWith":case"doesNotBeginWith":case"endsWith":case"doesNotEndWith":{const e=U(r);if(!e)return!1;return{bool:{filter:{script:{script:((e,t,r)=>{var n;const a=`doc['${e}'].${null!==(n=K[t])&&void 0!==n?n:t}(doc['${r}'])`;return t.startsWith("d")?`!${a}`:a})(n,t,e)}}}}}}}switch(t){case"<":case"<=":case">":case">=":return{range:{[e]:{[Q[t]]:J(r,a)}}};case"=":return{term:{[e]:J(r,a)}};case"!=":return{bool:{must_not:{term:{[e]:J(r,a)}}}};case"null":return{bool:{must_not:{exists:{field:e}}}};case"notNull":return{exists:{field:e}};case"in":case"notIn":{const n=m(r).map((e=>J(e,a)));if(n.length>0){const r=n.map((t=>({term:{[e]:J(t,a)}})));return{bool:"in"===t?{should:r}:{must_not:r}}}return!1}case"between":case"notBetween":{const n=m(r);if(n.length>=2&&x(n[0])&&x(n[1])){let[r,a]=n;if(C(r,!0)&&C(a,!0)){const e=g(r,{parseNumbers:!0}),t=g(a,{parseNumbers:!0});if(t<e){a=e,r=t}else r=e,a=t}return T(t,{range:{[e]:{gte:r,lte:a}}})}return!1}case"contains":case"doesNotContain":return T(t,{regexp:{[e]:{value:`.*${r}.*`}}});case"beginsWith":case"doesNotBeginWith":return T(t,{regexp:{[e]:{value:`${r}.*`}}});case"endsWith":case"doesNotEndWith":return T(t,{regexp:{[e]:{value:`.*${r}`}}})}return!1},H=e=>/^(does)?not/i.test(e),Y=(e,t)=>`"${"string"==typeof e&&t?e.replaceAll('"','\\"'):e}"`,Z=(e,t)=>t?`$not(${e})`:`${e}`,ee=e=>`${e}`.replaceAll(/[$()*+.?[\\\]^{|}]/g,String.raw`\$&`).replaceAll("-",String.raw`\x2d`),te=({field:e,operator:t,value:r,valueSource:n},{escapeQuotes:a,parseNumbers:o=!0,quoteFieldNamesWith:s=["",""],fieldIdentifierSeparator:i=""}={})=>{const l="field"===n,u="number"==typeof r||"boolean"==typeof r||"bigint"==typeof r||C(r,o),c=e=>D(e,{quoteFieldNamesWith:s,fieldIdentifierSeparator:i});switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":return`${c(e)} ${t} ${l?c($(r)):u?$(r):Y(r,a)}`;case"contains":case"doesNotContain":return Z(`$contains(${c(e)}, ${l?c($(r)):Y(r,a)})`,H(t));case"beginsWith":case"doesNotBeginWith":return Z(l?`$substring(${c(e)}, 0, $length(${c($(r))})) = ${c($(r))}`:`$contains(${c(e)}, /^${ee(r)}/)`,H(t));case"endsWith":case"doesNotEndWith":return Z(l?`$substring(${c(e)}, $length(${c(e)}) - $length(${c($(r))})) = ${c($(r))}`:`$contains(${c(e)}, /${ee(r)}$/)`,H(t));case"null":return`${c(e)} = null`;case"notNull":return`${c(e)} != null`;case"in":case"notIn":{const n=m(r);return Z(`${c(e)} in [${n.map((e=>l?`${c($(e))}`:C(e,o)?`${$(e)}`:Y(e,a))).join(", ")}]`,H(t))}case"between":case"notBetween":{const n=m(r);if(n.length>=2&&!E(n[0])&&!E(n[1])){const[r,s]=n,i=C(r,!0)?g(r,{parseNumbers:!0}):NaN,u=C(s,!0)?g(s,{parseNumbers:!0}):NaN;let f=isNaN(i)?l?`${r}`:r:i,p=isNaN(u)?l?`${s}`:s:u;if(f===i&&p===u&&u<i){p=i,f=u}const d=C(r,o)&&C(s,o),h=`${c(e)} >= ${l?c(r):d?f:Y(f,a)} and ${c(e)} <= ${l?c(s):d?p:Y(p,a)}`;return"between"===t?`(${h})`:Z(h,!0)}return""}}return""},re=e=>e.replace(/^(=)$/,"$1=").replace(/^notnull$/i,"!=").replace(/^null$/i,"=="),ne=(e,t)=>/^(does)?not/i.test(e)?{"!":t}:t,ae=({field:e,operator:t,value:r,valueSource:n},{parseNumbers:a}={})=>{const o="field"===n,s={var:e},i=e=>o?{var:`${e}`}:C(e,a)?g(e,{parseNumbers:a}):e;switch(t){case"<":case"<=":case"=":case"!=":case">":case">=":return{[re(t)]:[s,i(r)]};case"null":case"notNull":return{[("notNull"===t?"!":"=")+"="]:[s,null]};case"in":case"notIn":{const e=m(r).map((e=>i(e)));return ne(t,{in:[s,e]})}case"between":case"notBetween":{const e=m(r);if(e.length>=2&&x(e[0])&&x(e[1])){let[r,n]=e;if(!o&&C(r,!0)&&C(n,!0)){const e=g(r,{parseNumbers:!0}),t=g(n,{parseNumbers:!0});if(t<e){n=e,r=t}else r=e,n=t}else o&&(r={var:r},n={var:n});return ne(t,{"<=":[r,s,n]})}return!1}case"contains":case"doesNotContain":{const e={in:[i(r),s]};return ne(t,e)}case"beginsWith":case"doesNotBeginWith":{const e={startsWith:[s,i(r)]};return ne(t,e)}case"endsWith":case"doesNotEndWith":{const e={endsWith:[s,i(r)]};return ne(t,e)}}return!1},oe=(e,t,r)=>{const{fieldData:n,format:a,getNextNamedParam:o,parseNumbers:s,paramPrefix:i,paramsKeepPrefix:l,numberedParams:u,quoteFieldNamesWith:c=["",""],concatOperator:f,valueProcessor:p=z}=null!=t?t:{},{processedParams:d=[]}=null!=r?r:{},h="parameterized"===a,$=[],b={},v=e=>h?{sql:e,params:$}:{sql:e,params:b},y=p(e,{parseNumbers:s,quoteFieldNamesWith:c,concatOperator:f,fieldData:n,format:a}),N=S(e.operator),w=N.toLowerCase(),[O,I]=c;if(!("in"!==w&&"not in"!==w&&"between"!==w&&"not between"!==w||y))return v("");if("is null"===w||"is not null"===w)return v(`${O}${e.field}${I} ${N}`);if("field"===e.valueSource)return v(`${O}${e.field}${I} ${N} ${y}`.trim());if("in"===w||"not in"===w){const t=m(e.value);if(h){for(const e of t)$.push(C(e,s)?g(e,{parseNumbers:s}):e);return v(`${O}${e.field}${I} ${N} (${t.map(((e,r)=>u?`${i}${d.length+1+t.length-(t.length-r)}`:"?")).join(", ")})`)}const r=[];for(const n of t){const t=o(e.field);r.push(`${i}${t}`),b[`${l?i:""}${t}`]=C(n,s)?g(n,{parseNumbers:s}):n}return v(`${O}${e.field}${I} ${N} (${r.join(", ")})`)}if("between"===w||"not between"===w){const t=m(e.value,{retainEmptyStrings:!0}),[r,n]=t.slice(0,2).map((e=>C(e,s)?g(e,{parseNumbers:s}):e));if(h)return $.push(r,n),v(`${O}${e.field}${I} ${N} ${u?`${i}${d.length+1}`:"?"} and ${u?`${i}${d.length+2}`:"?"}`);const a=o(e.field),c=o(e.field);return b[`${l?i:""}${a}`]=r,b[`${l?i:""}${c}`]=n,v(`${O}${e.field}${I} ${N} ${i}${a} and ${i}${c}`)}let P=e.value;"string"==typeof e.value&&(P=C(e.value,s)?g(e.value,{parseNumbers:s}):/^'.*'$/g.test(y)?y.replaceAll(/(^'|'$)/g,""):y);let W="";return h?$.push(P):(W=o(e.field),b[`${l?i:""}${W}`]=P),v(`${O}${e.field}${I} ${N} ${h?u?`${i}${d.length+1}`:"?":`${i}${W}`}`.trim())},se=(e,t)=>{const{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:a=["",""],fieldIdentifierSeparator:o="",quoteValuesWith:s="'",valueProcessor:i=z,concatOperator:l="||"}=null!=t?t:{},u=i(e,{parseNumbers:r,escapeQuotes:n,quoteFieldNamesWith:a,fieldIdentifierSeparator:o,quoteValuesWith:s,concatOperator:l}),c=S(e.operator),f=c.toLowerCase();return"in"!==f&&"not in"!==f&&"between"!==f&&"not between"!==f||u?`${D(e.field,{quoteFieldNamesWith:a,fieldIdentifierSeparator:o})} ${c} ${u}`.trim():""},ie=r(67267),le=e=>w(e)?ue(e):e,ue=e=>{const t=[],r=e=>t.push(le(e));let n=0;for(let a=0;a<e.rules.length;a+=2)if(1===e.rules.length)r(e.rules[0]);else if("and"===e.rules[a+1]){n=a;let r=1;for(;"and"===e.rules[n+r];)a+=2,r+=2;t.push({rules:e.rules.slice(n,a+1).map((e=>le(e)))}),a-=2}else"or"===e.rules[a+1]&&(0===a||a===e.rules.length-3?(0!==a&&"or"!==e.rules[a-1]||r(e.rules[a]),r(e.rules[a+1]),a===e.rules.length-3&&r(e.rules[a+2])):("and"===e.rules[a-1]||r(e.rules[a]),r(e.rules[a+1])));return 1===t.length&&"object"==typeof t[0]&&w(t[0])?a({},e,t[0]):o(a({},e),{rules:t})},ce=e=>{if(O(e))return e;const t=ue(e),r=t.rules.map((e=>"string"!=typeof e&&w(e)?ce(e):e)),n=r.length<2?"and":r[1],s=r.filter((e=>"string"!=typeof e));return o(a({},t),{combinator:n,rules:s})},fe=e=>N(e)&&"boolean"==typeof e.valid,pe=(e,t,r)=>{if("boolean"==typeof t)return t;if(fe(t))return t.valid;if("function"==typeof r&&!w(e)){const t=r(e);if("boolean"==typeof t)return t;if(fe(t))return t.valid}return!0},de=r(67267),he=e=>N(e)&&"name"in e&&"string"==typeof e.name,$e=e=>N(e)&&"value"in e&&"string"==typeof e.value;function me(e,t){return(0,de.produce)((e=>{const r={};let n=!!t;if(he(e)&&!$e(e)?(r.value=e.name,n=!0):!he(e)&&$e(e)&&(r.name=e.value,n=!0),n)return Object.assign({},t,e,r)}))(e)}function be(e,t){if(!Array.isArray(e))return[];return(0,de.produce)((e=>{if(ve(e))for(const r of e)for(const[e,n]of r.options.entries())r.options[e]=me(n,t);else for(const[r,n]of e.entries())e[r]=me(n,t)}))(e)}var ge=e=>Array.isArray(e)&&e.length>0&&N(e[0])&&"options"in e[0]&&Array.isArray(e[0].options),ve=e=>{if(Array.isArray(e))for(const t of e)if(N(t)&&"options"in t)for(const e of t.options)return!(!N(e)||!("name"in e)&&!("value"in e));return!1},ye=(e,t)=>(ge(e)?e.flatMap((e=>e.options)):e).find((e=>e.value===t||e.name===t)),Ne=e=>(e=>{const t=new Set,r=[];for(const o of e){var n,a;t.has(null!==(n=o.value)&&void 0!==n?n:o.name)||(t.add(null!==(a=o.value)&&void 0!==a?a:o.name),r.push(o))}return e.length===r.length?e:r})(ge(e)?e.flatMap((e=>e.options)):e),we=(e,t={})=>{var r;const{escapeQuotes:n,fields:a,parseNumbers:o,quoteFieldNamesWith:s,quoteValuesWith:i,fieldIdentifierSeparator:l}=t,u="field"===e.valueSource,c=e.operator.toLowerCase(),f=i||"'",p=e=>(e=>`${f}${e}${f}`)((e=>((e,t,r)=>r&&"string"==typeof e?e.replaceAll(`${t}`,`${t}${t}`):e)(e,f,n))(e)),d=e=>D(e,{quoteFieldNamesWith:s,fieldIdentifierSeparator:l});switch(c){case"null":case"notnull":return"";case"between":case"notbetween":return z(e,t);case"in":case"notin":{const t=m(e.value);if(0===t.length)return"";const r=t.map((t=>{var r,n;return u?d(null!==(n=null===(r=ye(null!=a?a:[],e.value))||void 0===r?void 0:r.label)&&void 0!==n?n:t):C(t,o)?`${$(t)}`:`${p(t)}`}));return r.length<=2?r.join(" or "):`${r.slice(0,-1).join(", ")}, or ${r.at(-1)}`}}return"boolean"==typeof e.value?e.value?"true":"false":u?d(null!==(h=null===(r=ye(null!=a?a:[],e.value))||void 0===r?void 0:r.label)&&void 0!==h?h:e.value):C(e.value,o)?`${$(e.value)}`:`${p(e.value)}`;var h},Oe=(e,t)=>{const{fields:r,fieldData:n,parseNumbers:a,escapeQuotes:o,quoteFieldNamesWith:s=["",""],fieldIdentifierSeparator:i="",quoteValuesWith:l="'",valueProcessor:u=we,concatOperator:c="||",getOperators:f=()=>[]}=null!=t?t:{},p=u(e,{fields:r,parseNumbers:a,escapeQuotes:o,quoteFieldNamesWith:s,fieldIdentifierSeparator:i,quoteValuesWith:l,concatOperator:c}),d=e.operator.toLowerCase();if(("in"===d||"notin"===d||"between"===d||"notbetween"===d)&&!p)return"";var h;var $,m;return`${D(null!==(h=null==n?void 0:n.label)&&void 0!==h?h:e.field,{quoteFieldNamesWith:s,fieldIdentifierSeparator:i})} ${((e,t="value")=>{switch(e.value.toLowerCase()){case"=":return"field"===t?"is the same as the value in":"is";case"!=":return"field"===t?"is not the same as the value in":"is not";case"<":return"field"===t?"is less than the value in":"is less than";case">":return"field"===t?"is greater than the value in":"is greater than";case"<=":return"field"===t?"is less than or equal to the value in":"is less than or equal to";case">=":return"field"===t?"is greater than or equal to the value in":"is greater than or equal to";case"contains":return"field"===t?"contains the value in":"contains";case"beginswith":return"field"===t?"starts with the value in":"starts with";case"endswith":return"field"===t?"ends with the value in":"ends with";case"doesnotcontain":return"field"===t?"does not contain the value in":"does not contain";case"doesnotbeginwith":return"field"===t?"does not start with the value in":"does not start with";case"doesnotendwith":return"field"===t?"does not end with the value in":"does not end with";case"null":return"is null";case"notnull":return"is not null";case"in":return"field"===t?"is the same as a value in":"is one of the values";case"notin":return"field"===t?"is not the same as any value in":"is not one of the values";case"between":return"field"===t?"is between the values in":"is between";case"notbetween":return"field"===t?"is not between the values in":"is not between";default:return e.label}})(null!==(m=ye(be(null!==($=f(e.field,{fieldData:null!=n?n:{name:e.field,value:e.field,label:e.field}}))&&void 0!==$?$:[]),e.operator))&&void 0!==m?m:{name:e.operator,value:e.operator,label:e.operator},e.valueSource)} ${p}`.trim()},Se={ansi:{},sqlite:{paramsKeepPrefix:!0},oracle:{},mssql:{concatOperator:"+",quoteFieldNamesWith:["[","]"],fieldIdentifierSeparator:"."},mysql:{concatOperator:"CONCAT"},postgresql:{quoteFieldNamesWith:'"',numberedParams:!0,paramPrefix:"$"}};function Ie(e,t={}){let r="json",n=z,o=null,s=["",""],i="",l=()=>!0,u=[],c=()=>[],f={},h="",$=":",m=!1,b=!1,g=!1,v=p,y=d,S="'",I="||";if("string"==typeof t)switch(r=t.toLowerCase(),r){case"natural_language":o=Oe;break;case"mongodb":o=B;break;case"parameterized":case"parameterized_named":o=oe;break;case"cel":o=M;break;case"spel":o=k;break;case"jsonlogic":o=ae;break;case"elasticsearch":o=G;break;case"jsonata":o=te}else{var W,x;const e=a({},null!==(x=Se[null!==(W=t.preset)&&void 0!==W?W:"ansi"])&&void 0!==x?x:null,t);var C;r=(null!==(C=e.format)&&void 0!==C?C:"json").toLowerCase();const{valueProcessor:f=null,ruleProcessor:N=null}=e;var D,E,F,V,_,L,X,R,Q;"function"==typeof N&&(o=N),n="function"==typeof f?(e,t)=>A(f)?f(e.field,e.operator,e.value,e.valueSource):f(e,t):"natural_language"===r?we:"mongodb"===r?null!=o?o:B:"cel"===r?null!=o?o:M:"spel"===r?null!=o?o:k:"jsonlogic"===r?null!=o?o:ae:"elasticsearch"===r?null!=o?o:G:"jsonata"===r?null!=o?o:te:z,s=q(e.quoteFieldNamesWith),i=null!==(D=e.fieldIdentifierSeparator)&&void 0!==D?D:"",l=null!==(E=e.validator)&&void 0!==E?E:()=>!0,u=be(null!==(F=e.fields)&&void 0!==F?F:[]),c=(t,r)=>{var n,a;return be(null!==(a=null===(n=e.getOperators)||void 0===n?void 0:n.call(e,t,r))&&void 0!==a?a:[])},h=null!==(V=e.fallbackExpression)&&void 0!==V?V:"",$=null!==(_=e.paramPrefix)&&void 0!==_?_:":",m=!!e.paramsKeepPrefix,b=!!e.numberedParams,g=!!e.parseNumbers,v=null!==(L=e.placeholderFieldName)&&void 0!==L?L:p,y=null!==(X=e.placeholderOperatorName)&&void 0!==X?X:d,S=null!==(R=e.quoteValuesWith)&&void 0!==R?R:"'",I=null!==(Q=e.concatOperator)&&void 0!==Q?Q:"||"}if(h||(h="mongodb"===r?'"$and":[{"$expr":true}]':"cel"===r||"spel"===r?"1 == 1":"natural_language"===r?"1 is 1":"(1 = 1)"),"json"===r||"json_without_ids"===r){const t=g?(0,ie.produce)(e,j):e;return"json_without_ids"===r?JSON.stringify(t,((e,t)=>"id"===e||"path"===e?void 0:t)):JSON.stringify(t,null,2)}if("function"==typeof l){const t=l(e);if("boolean"==typeof t){if(!1===t)return"parameterized"===r?{sql:h,params:[]}:"parameterized_named"===r?{sql:h,params:{}}:"mongodb"===r?`{${h}}`:"jsonlogic"!==r&&("elasticsearch"===r?{}:h)}else f=t}const T={},U=Ne(u);for(const a of U){var K;if("function"==typeof a.validator)T[null!==(K=a.value)&&void 0!==K?K:a.name]=a.validator}const J=e=>{let t,r;if(e.id&&(t=f[e.id]),U.length>0){const t=U.filter((t=>t.name===e.field));if(t.length>0){const e=t[0];"function"==typeof e.validator&&(r=e.validator)}}return[t,r]};if("sql"===r){const t=(e,a)=>{var l;if(!pe(e,f[null!==(l=e.id)&&void 0!==l?l:""]))return a?h:"";const c=e.rules.map((a=>{if("string"==typeof a)return a;if(w(a))return t(a,1===e.rules.length);const[l,c]=J(a);if(!pe(a,l,c)||a.field===v||a.operator===y)return"";var f;const p="value"===(null!==(f=a.valueSource)&&void 0!==f?f:"value"),d=ye(u,a.field);return"function"==typeof o?o(a,{parseNumbers:g,escapeQuotes:p,quoteFieldNamesWith:s,fieldIdentifierSeparator:i,fieldData:d,format:r,quoteValuesWith:S,concatOperator:I}):se(a,{parseNumbers:g,escapeQuotes:p,valueProcessor:n,quoteFieldNamesWith:s,fieldIdentifierSeparator:i,fieldData:d,format:r,quoteValuesWith:S,concatOperator:I})}));return 0===c.length?h:`${e.not?"NOT ":""}(${c.filter(Boolean).join(O(e)?` ${e.combinator} `:" ")})`};return t(e,!0)}if("parameterized"===r||"parameterized_named"===r){const t="parameterized"===r,a=[],c={},p=new Map,d=e=>{p.has(e)||p.set(e,new Set);const t=`${e}_${p.get(e).size+1}`;return p.get(e).add(t),t},S=e=>{const[t,f]=J(e);if(!pe(e,t,f)||e.field===v||e.operator===y)return"";const w=ye(u,e.field),O=Object.fromEntries([...p.entries()].map((([e,t])=>[e,[...t]]))),S=("function"==typeof o?o:oe)(e,{getNextNamedParam:d,fieldParamNames:O,parseNumbers:g,quoteFieldNamesWith:s,concatOperator:I,fieldIdentifierSeparator:i,fieldData:w,format:r,paramPrefix:$,paramsKeepPrefix:m,numberedParams:b,fallbackExpression:h,valueProcessor:n,fields:u,placeholderFieldName:v,placeholderOperatorName:y,validator:l},{processedParams:a});if(!N(S))return"";const{sql:P,params:W}=S;if("string"!=typeof P||!P)return"";if("parameterized"===r&&Array.isArray(W))a.push(...W);else if("parameterized_named"===r&&N(W)){var j;Object.assign(c,W);for(const t of Object.keys(W))null===(j=p.get(e.field))||void 0===j||j.add(t)}return P},P=(e,t)=>{var r;if(!pe(e,f[null!==(r=e.id)&&void 0!==r?r:""]))return t?h:"";const n=e.rules.map((t=>"string"==typeof t?t:w(t)?P(t,1===e.rules.length):S(t)));return 0===n.length?h:`${e.not?"NOT ":""}(${n.filter(Boolean).join(O(e)?` ${e.combinator} `:" ")})`};return t?{sql:P(e,!0),params:a}:{sql:P(e,!0),params:c}}if("mongodb"===r){const t=(e,a)=>{var s;if(!pe(e,f[null!==(s=e.id)&&void 0!==s?s:""]))return a?h:"";const i=`"$${e.combinator.toLowerCase()}"`;let l=!1;const c=e.rules.map((e=>{if(w(e)){const r=t(e);return r?(l=!0,/^{.+}$/.test(r)?r:`{${r}}`):""}const[a,s]=J(e);if(!pe(e,a,s)||e.field===v||e.operator===y)return"";const i=ye(u,e.field);return(null!=o?o:n)(e,{parseNumbers:g,fieldData:i,format:r})})).filter(Boolean);return c.length>0?1!==c.length||l?`${i}:[${c.join(",")}]`:c[0]:h},a=O(e)?e:ce(e),s=t(a,!0);return/^{.+}$/.test(s)?s:`{${s}}`}if("cel"===r){const t=(e,a)=>{var s;if(!pe(e,f[null!==(s=e.id)&&void 0!==s?s:""]))return a?h:"";const i=e.rules.map((e=>{if("string"==typeof e)return P[e];if(w(e))return t(e);const[a,s]=J(e);if(!pe(e,a,s)||e.field===v||e.operator===y)return"";const i=ye(u,e.field);var l;return(null!=o?o:n)(e,{parseNumbers:g,escapeQuotes:"value"===(null!==(l=e.valueSource)&&void 0!==l?l:"value"),fieldData:i,format:r})})).filter(Boolean).join(O(e)?` ${P[e.combinator]} `:" "),[l,c]=e.not||!a?[(e.not?"!":"")+"(",")"]:["",""];return i?`${l}${i}${c}`:h};return t(e,!0)}if("spel"===r){const t=(e,a)=>{var s;if(!pe(e,f[null!==(s=e.id)&&void 0!==s?s:""]))return a?h:"";const i=e.rules.map((e=>{if("string"==typeof e)return e;if(w(e))return t(e);const[a,s]=J(e);if(!pe(e,a,s)||e.field===v||e.operator===y)return"";const i=ye(u,e.field);var l;return(null!=o?o:n)(e,{parseNumbers:g,escapeQuotes:"value"===(null!==(l=e.valueSource)&&void 0!==l?l:"value"),fieldData:i,format:r})})).filter(Boolean).join(O(e)?` ${e.combinator} `:" "),[l,c]=e.not||!a?[(e.not?"!":"")+"(",")"]:["",""];return i?`${l}${i}${c}`:h};return t(e,!0)}if("jsonata"===r){const t=(e,a)=>{var l;if(!pe(e,f[null!==(l=e.id)&&void 0!==l?l:""]))return a?h:"";const c=e.rules.map((e=>{if("string"==typeof e)return e;if(w(e))return t(e);const[a,l]=J(e);if(!pe(e,a,l)||e.field===v||e.operator===y)return"";const c=ye(u,e.field);var f;return(null!=o?o:n)(e,{parseNumbers:g,escapeQuotes:"value"===(null!==(f=e.valueSource)&&void 0!==f?f:"value"),fieldData:c,format:r,quoteFieldNamesWith:s,fieldIdentifierSeparator:i})})).filter(Boolean).join(O(e)?` ${e.combinator} `:" "),[p,d]=e.not||!a?[(e.not?"$not":"")+"(",")"]:["",""];return c?`${p}${c}${d}`:h};return t(e,!0)}if("jsonlogic"===r){const t=O(e)?e:ce(e),a=(e,t)=>{var s;if(!pe(e,f[null!==(s=e.id)&&void 0!==s?s:""]))return!1;const i=e.rules.map((e=>{if(w(e))return a(e);const[t,s]=J(e);if(!pe(e,t,s)||e.field===v||e.operator===y)return!1;const i=ye(u,e.field);return(null!=o?o:n)(e,{parseNumbers:g,fieldData:i,format:r})})).filter(Boolean);if(0===i.length)return!1;const l={[e.combinator]:i};return e.not?{"!":l}:l};return a(t,!0)}if("elasticsearch"===r){const t=O(e)?e:ce(e),a=e=>{var t;if(!pe(e,f[null!==(t=e.id)&&void 0!==t?t:""]))return!1;const s=e.rules.map((e=>{if(w(e))return a(e);const[t,s]=J(e);if(!pe(e,t,s)||e.field===v||e.operator===y)return!1;const i=ye(u,e.field);return(null!=o?o:n)(e,{parseNumbers:g,fieldData:i,format:r})})).filter(Boolean);return 0!==s.length&&{bool:e.not?{must_not:"or"===e.combinator?{bool:{should:s}}:s}:{["or"===e.combinator?"should":"must"]:s}}},s=a(t);return!1===s?{}:s}if("natural_language"===r){const t=(e,a)=>{var l;if(!pe(e,f[null!==(l=e.id)&&void 0!==l?l:""]))return a?h:"";const p=e.rules.map((a=>{if("string"==typeof a)return`, ${a} `;if(w(a))return t(a,1===e.rules.length);const[l,f]=J(a);if(!pe(a,l,f)||a.field===v||a.operator===y)return"";var p;const d="value"===(null!==(p=a.valueSource)&&void 0!==p?p:"value"),h=ye(u,a.field);return"function"==typeof o?o(a,{fields:u,parseNumbers:g,escapeQuotes:d,quoteFieldNamesWith:s,fieldIdentifierSeparator:i,fieldData:h,format:r,quoteValuesWith:S,concatOperator:I,getOperators:c}):Oe(a,{fields:u,parseNumbers:g,escapeQuotes:d,valueProcessor:n,quoteFieldNamesWith:s,fieldIdentifierSeparator:i,fieldData:h,format:r,quoteValuesWith:S,concatOperator:I,getOperators:c})}));if(0===p.length)return h;const d=e.not||!a?"(":"",$=e.not||!a?`) is${e.not?" not":""} true`:"";return`${d}${p.filter(Boolean).join(O(e)?`, ${e.combinator} `:"")}${$}`};return t(e,!0)}return""}var Pe={default:z,mongodb:B,cel:M,spel:k},We=e=>(t,r,n,a)=>Pe[e]({field:t,operator:r,value:n,valueSource:a},{parseNumbers:!1}),je=We("default"),xe=We("mongodb"),Ce=We("cel"),Ae=We("spel"),qe=M,De=B,Ee=k}}]);